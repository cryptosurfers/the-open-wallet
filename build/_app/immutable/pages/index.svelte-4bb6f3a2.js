var Ir=Object.defineProperty;var xr=(Y,O,K)=>O in Y?Ir(Y,O,{enumerable:!0,configurable:!0,writable:!0,value:K}):Y[O]=K;var We=(Y,O,K)=>(xr(Y,typeof O!="symbol"?O+"":O,K),K);import{S as Ve,i as $e,s as Ze,F as ir,l as we,m as be,p as Ce,h as Rt,q as Ae,K as Je,r as ze,b as re,G as oe,L as Ne,H as sr,I as or,J as ar,f as ge,t as Ee,M as hr,D as Qe,N as tr,O as je,P as Pe,Q as fr,n as Xe,R as nr,T as Tr,e as er,g as He,d as Ge,U as Nr,V as Rr,a as Be,u as pe,c as Fe,v as me,W as Ur,X as Or,w as Ke,Y as kr,Z as dr,x as Ue,y as Oe,z as ke,C as Le,_ as ur,$ as lr,o as Lr,a0 as Pr}from"../chunks/index-10f80809.js";const rr=self.localStorage;function jr(Y){return Y&&Y.__esModule&&Object.prototype.hasOwnProperty.call(Y,"default")?Y.default:Y}var Fr={exports:{}};/*! For license information please see tonweb.js.LICENSE.txt */(function(Y,O){(function(K,z){Y.exports=z()})(self,function(){return(()=>{var K=[(_,E,s)=>{const y=s(1),v=y.Address,d=s(19),g=s(22),i=s(24).default,{Contract:u}=s(23),h=s(27).default,c=s(34).default,p=s(35).default,f=s(41).default,{BlockSubscription:m,InMemoryBlockStorage:w}=s(44),{SubscriptionContract:A}=s(47),{Payments:C,PaymentChannel:M}=s(48),S=s(51).default,q=s(106).default,G=s(107).default,{Dns:U,DnsCollection:H,DnsItem:Q}=s(222).default,et="0.0.50";class it{constructor(l){this.version=et,this.utils=y,this.Address=v,this.boc=d,this.Contract=u,this.BlockSubscription=m,this.InMemoryBlockStorage=w,this.provider=l||new i,this.dns=new U(this.provider),this.wallet=new h(this.provider),this.payments=new C(this.provider),this.lockupWallet=c}async getTransactions(l,r=20,e,t,o){return this.provider.getTransactions(l.toString(),r,e,t,o)}async getBalance(l){return this.provider.getBalance(l.toString())}async sendBoc(l){return this.provider.sendBoc(y.bytesToBase64(l))}async call(l,r,e=[]){return this.provider.call(l.toString(),r,e)}}it.version=et,it.utils=y,it.Address=v,it.boc=d,it.HttpProvider=i,it.Contract=u,it.Wallets=h,it.LockupWallets=c,it.SubscriptionContract=A,it.BlockSubscription=m,it.InMemoryBlockStorage=w,it.ledger={TransportWebUSB:S,TransportWebHID:q,BluetoothTransport:G,AppTon:g},it.token={nft:p,ft:f,jetton:f},it.dns=U,it.dns.DnsCollection=H,it.dns.DnsItem=Q,it.payments=C,it.payments.PaymentChannel=M,_.exports=it},(_,E,s)=>{const{BN:y,nacl:v,sha256:d,fromNano:g,toNano:i,bytesToHex:u,hexToBytes:h,stringToBytes:c,crc32c:p,crc16:f,concatBytes:m,bytesToBase64:w,base64ToBytes:A,base64toString:C,stringToBase64:M,compareBytes:S,readNBytesUIntFromArray:q,keyPairFromSeed:G,newKeyPair:U,newSeed:H}=s(2),Q=s(18).default;_.exports={Address:Q,BN:y,nacl:v,sha256:d,fromNano:g,toNano:i,bytesToHex:u,hexToBytes:h,stringToBytes:c,crc32c:p,crc16:f,concatBytes:m,bytesToBase64:w,base64ToBytes:A,base64toString:C,stringToBase64:M,compareBytes:S,readNBytesUIntFromArray:q,parseTransferUrl:function(et){const it="ton://transfer/";if(!et.startsWith(it))throw new Error("must starts with "+it);const n=et.substring(it.length).split("?");if(n.length>2)throw new Error('multiple "?"');const l=n[0];if(!Q.isValid(l))throw new Error("invalid address format "+l);const r={address:l},e=n[1];if(e&&e.length){const t=e.split("&").map(o=>o.split("="));for(const o of t){if(o.length!==2)throw new Error("invalid url pair");const a=o[0],b=o[1];if(a==="amount"){if(r.amount)throw new Error("amount already set");if(new y(b).isNeg())throw new Error("negative amount");r.amount=b}else{if(a!=="text")throw new Error("unknown url var "+a);if(r.text)throw new Error("text already set");r.text=decodeURIComponent(b)}}}return r},formatTransferUrl:function(et,it,n){let l="ton://transfer/"+et;const r=[];return it&&r.push("amount="+it),n&&r.push("text="+encodeURIComponent(n)),r.length===0?l:l+"?"+r.join("&")},keyPairFromSeed:G,newKeyPair:U,newSeed:H}},(_,E,s)=>{var y=s(9).Buffer;const v=s(3),d=s(5),g=s(7),i=typeof self<"u"&&self.crypto&&self.crypto.subtle;let u=null;i||(u=s(16));const h=[],c={};for(let m=0;m<=255;m++){let w=m.toString(16);w.length<2&&(w="0"+w),h.push(w),c[w]=m}const p=(()=>{const m=[],w="A".charCodeAt(0),A="a".charCodeAt(0),C="0".charCodeAt(0);for(let M=0;M<26;++M)m.push(String.fromCharCode(w+M));for(let M=0;M<26;++M)m.push(String.fromCharCode(A+M));for(let M=0;M<10;++M)m.push(String.fromCharCode(C+M));return m.push("+"),m.push("/"),m})();function f(m){return typeof self>"u"?y.from(m,"base64").toString("binary"):atob(m)}_.exports={BN:v,nacl:d,sha256:function(m){return i?crypto.subtle.digest("SHA-256",m):u.subtle.digest({name:"SHA-256"},m)},fromNano:function(m){if(!v.isBN(m)&&typeof m!="string")throw new Error("Please pass numbers as strings or BN objects to avoid precision errors.");return g.fromWei(m,"gwei")},toNano:function(m){if(!v.isBN(m)&&typeof m!="string")throw new Error("Please pass numbers as strings or BN objects to avoid precision errors.");return g.toWei(m,"gwei")},bytesToHex:function(m){const w=[];for(let A=0;A<m.byteLength;A++)w.push(h[m[A]]);return w.join("")},hexToBytes:function(m){const w=(m=m.toLowerCase()).length;if(w%2!=0)throw"hex string must have length a multiple of 2";const A=w/2,C=new Uint8Array(A);for(let M=0;M<A;M++){const S=2*M,q=m.substring(S,S+2);if(!c.hasOwnProperty(q))throw new Error("invalid hex character "+q);C[M]=c[q]}return C},stringToBytes:function(m,w=1){let A,C;w===1&&(A=new ArrayBuffer(m.length),C=new Uint8Array(A)),w===2&&(A=new ArrayBuffer(2*m.length),C=new Uint16Array(A)),w===4&&(A=new ArrayBuffer(4*m.length),C=new Uint32Array(A));for(let M=0,S=m.length;M<S;M++)C[M]=m.charCodeAt(M);return new Uint8Array(C.buffer)},crc32c:function(m){const w=function(C,M){C^=4294967295;for(let q=0;q<M.length;q++)C=1&(C=1&(C=1&(C=1&(C=1&(C=1&(C=1&(C=1&(C^=M[q])?C>>>1^2197175160:C>>>1)?C>>>1^2197175160:C>>>1)?C>>>1^2197175160:C>>>1)?C>>>1^2197175160:C>>>1)?C>>>1^2197175160:C>>>1)?C>>>1^2197175160:C>>>1)?C>>>1^2197175160:C>>>1)?C>>>1^2197175160:C>>>1;return 4294967295^C}(0,m),A=new ArrayBuffer(4);return new DataView(A).setUint32(0,w,!1),new Uint8Array(A).reverse()},crc16:function(m){let w=0;const A=new Uint8Array(m.length+2);A.set(m);for(let C of A){let M=128;for(;M>0;)w<<=1,C&M&&(w+=1),M>>=1,w>65535&&(w&=65535,w^=4129)}return new Uint8Array([Math.floor(w/256),w%256])},concatBytes:function(m,w){const A=new Uint8Array(m.length+w.length);return A.set(m),A.set(w,m.length),A},bytesToBase64:function(m){let w,A="";const C=m.length;for(w=2;w<C;w+=3)A+=p[m[w-2]>>2],A+=p[(3&m[w-2])<<4|m[w-1]>>4],A+=p[(15&m[w-1])<<2|m[w]>>6],A+=p[63&m[w]];return w===C+1&&(A+=p[m[w-2]>>2],A+=p[(3&m[w-2])<<4],A+="=="),w===C&&(A+=p[m[w-2]>>2],A+=p[(3&m[w-2])<<4|m[w-1]>>4],A+=p[(15&m[w-1])<<2],A+="="),A},base64ToBytes:function(m){const w=f(m),A=w.length,C=new Uint8Array(A);for(let M=0;M<A;M++)C[M]=w.charCodeAt(M);return C},base64toString:f,stringToBase64:function(m){return typeof self>"u"?y.from(m,"binary").toString("base64"):btoa(m)},compareBytes:function(m,w){return m.toString()===w.toString()},readNBytesUIntFromArray:function(m,w){let A=0;for(let C=0;C<m;C++)A*=256,A+=w[C];return A},keyPairFromSeed:function(m){return d.sign.keyPair.fromSeed(m)},newKeyPair:function(){return d.sign.keyPair()},newSeed:function(){return d.sign.keyPair().secretKey.slice(0,32)}}},function(_,E,s){(function(y,v){function d(r,e){if(!r)throw new Error(e||"Assertion failed")}function g(r,e){r.super_=e;var t=function(){};t.prototype=e.prototype,r.prototype=new t,r.prototype.constructor=r}function i(r,e,t){if(i.isBN(r))return r;this.negative=0,this.words=null,this.length=0,this.red=null,r!==null&&(e!=="le"&&e!=="be"||(t=e,e=10),this._init(r||0,e||10,t||"be"))}var u;typeof y=="object"?y.exports=i:v.BN=i,i.BN=i,i.wordSize=26;try{u=s(4).Buffer}catch{}function h(r,e,t){for(var o=0,a=Math.min(r.length,t),b=0,I=e;I<a;I++){var x,P=r.charCodeAt(I)-48;o<<=4,o|=x=P>=49&&P<=54?P-49+10:P>=17&&P<=22?P-17+10:P,b|=x}return d(!(240&b),"Invalid character in "+r),o}function c(r,e,t,o){for(var a=0,b=0,I=Math.min(r.length,t),x=e;x<I;x++){var P=r.charCodeAt(x)-48;a*=o,b=P>=49?P-49+10:P>=17?P-17+10:P,d(P>=0&&b<o,"Invalid character"),a+=b}return a}function p(r,e){r.words=e.words,r.length=e.length,r.negative=e.negative,r.red=e.red}function f(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}i.isBN=function(r){return r instanceof i||r!==null&&typeof r=="object"&&r.constructor.wordSize===i.wordSize&&Array.isArray(r.words)},i.max=function(r,e){return r.cmp(e)>0?r:e},i.min=function(r,e){return r.cmp(e)<0?r:e},i.prototype._init=function(r,e,t){if(typeof r=="number")return this._initNumber(r,e,t);if(typeof r=="object")return this._initArray(r,e,t);e==="hex"&&(e=16),d(e===(0|e)&&e>=2&&e<=36);var o=0;(r=r.toString().replace(/\s+/g,""))[0]==="-"&&o++,e===16?this._parseHex(r,o):this._parseBase(r,e,o),r[0]==="-"&&(this.negative=1),this._strip(),t==="le"&&this._initArray(this.toArray(),e,t)},i.prototype._initNumber=function(r,e,t){r<0&&(this.negative=1,r=-r),r<67108864?(this.words=[67108863&r],this.length=1):r<4503599627370496?(this.words=[67108863&r,r/67108864&67108863],this.length=2):(d(r<9007199254740992),this.words=[67108863&r,r/67108864&67108863,1],this.length=3),t==="le"&&this._initArray(this.toArray(),e,t)},i.prototype._initArray=function(r,e,t){if(d(typeof r.length=="number"),r.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(r.length/3),this.words=new Array(this.length);for(var o=0;o<this.length;o++)this.words[o]=0;var a,b,I=0;if(t==="be")for(o=r.length-1,a=0;o>=0;o-=3)b=r[o]|r[o-1]<<8|r[o-2]<<16,this.words[a]|=b<<I&67108863,this.words[a+1]=b>>>26-I&67108863,(I+=24)>=26&&(I-=26,a++);else if(t==="le")for(o=0,a=0;o<r.length;o+=3)b=r[o]|r[o+1]<<8|r[o+2]<<16,this.words[a]|=b<<I&67108863,this.words[a+1]=b>>>26-I&67108863,(I+=24)>=26&&(I-=26,a++);return this._strip()},i.prototype._parseHex=function(r,e){this.length=Math.ceil((r.length-e)/6),this.words=new Array(this.length);for(var t=0;t<this.length;t++)this.words[t]=0;var o,a,b=0;for(t=r.length-6,o=0;t>=e;t-=6)a=h(r,t,t+6),this.words[o]|=a<<b&67108863,this.words[o+1]|=a>>>26-b&4194303,(b+=24)>=26&&(b-=26,o++);t+6!==e&&(a=h(r,e,t+6),this.words[o]|=a<<b&67108863,this.words[o+1]|=a>>>26-b&4194303),this._strip()},i.prototype._parseBase=function(r,e,t){this.words=[0],this.length=1;for(var o=0,a=1;a<=67108863;a*=e)o++;o--,a=a/e|0;for(var b=r.length-t,I=b%o,x=Math.min(b,b-I)+t,P=0,k=t;k<x;k+=o)P=c(r,k,k+o,e),this.imuln(a),this.words[0]+P<67108864?this.words[0]+=P:this._iaddn(P);if(I!==0){var Z=1;for(P=c(r,k,r.length,e),k=0;k<I;k++)Z*=e;this.imuln(Z),this.words[0]+P<67108864?this.words[0]+=P:this._iaddn(P)}},i.prototype.copy=function(r){r.words=new Array(this.length);for(var e=0;e<this.length;e++)r.words[e]=this.words[e];r.length=this.length,r.negative=this.negative,r.red=this.red},i.prototype._move=function(r){p(r,this)},i.prototype.clone=function(){var r=new i(null);return this.copy(r),r},i.prototype._expand=function(r){for(;this.length<r;)this.words[this.length++]=0;return this},i.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},i.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function"?i.prototype[Symbol.for("nodejs.util.inspect.custom")]=f:i.prototype.inspect=f;var m=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],w=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],A=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function C(r,e,t){t.negative=e.negative^r.negative;var o=r.length+e.length|0;t.length=o,o=o-1|0;var a=0|r.words[0],b=0|e.words[0],I=a*b,x=67108863&I,P=I/67108864|0;t.words[0]=x;for(var k=1;k<o;k++){for(var Z=P>>>26,$=67108863&P,at=Math.min(k,e.length-1),st=Math.max(0,k-r.length+1);st<=at;st++){var yt=k-st|0;Z+=(I=(a=0|r.words[yt])*(b=0|e.words[st])+$)/67108864|0,$=67108863&I}t.words[k]=0|$,P=0|Z}return P!==0?t.words[k]=0|P:t.length--,t._strip()}i.prototype.toString=function(r,e){var t;if(e=0|e||1,(r=r||10)===16||r==="hex"){t="";for(var o=0,a=0,b=0;b<this.length;b++){var I=this.words[b],x=(16777215&(I<<o|a)).toString(16);t=(a=I>>>24-o&16777215)!=0||b!==this.length-1?m[6-x.length]+x+t:x+t,(o+=2)>=26&&(o-=26,b--)}for(a!==0&&(t=a.toString(16)+t);t.length%e!=0;)t="0"+t;return this.negative!==0&&(t="-"+t),t}if(r===(0|r)&&r>=2&&r<=36){var P=w[r],k=A[r];t="";var Z=this.clone();for(Z.negative=0;!Z.isZero();){var $=Z.modrn(k).toString(r);t=(Z=Z.idivn(k)).isZero()?$+t:m[P-$.length]+$+t}for(this.isZero()&&(t="0"+t);t.length%e!=0;)t="0"+t;return this.negative!==0&&(t="-"+t),t}d(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var r=this.words[0];return this.length===2?r+=67108864*this.words[1]:this.length===3&&this.words[2]===1?r+=4503599627370496+67108864*this.words[1]:this.length>2&&d(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-r:r},i.prototype.toJSON=function(){return this.toString(16,2)},u&&(i.prototype.toBuffer=function(r,e){return this.toArrayLike(u,r,e)}),i.prototype.toArray=function(r,e){return this.toArrayLike(Array,r,e)},i.prototype.toArrayLike=function(r,e,t){this._strip();var o=this.byteLength(),a=t||Math.max(1,o);d(o<=a,"byte array longer than desired length"),d(a>0,"Requested array length <= 0");var b=function(I,x){return I.allocUnsafe?I.allocUnsafe(x):new I(x)}(r,a);return this["_toArrayLike"+(e==="le"?"LE":"BE")](b,o),b},i.prototype._toArrayLikeLE=function(r,e){for(var t=0,o=0,a=0,b=0;a<this.length;a++){var I=this.words[a]<<b|o;r[t++]=255&I,t<r.length&&(r[t++]=I>>8&255),t<r.length&&(r[t++]=I>>16&255),b===6?(t<r.length&&(r[t++]=I>>24&255),o=0,b=0):(o=I>>>24,b+=2)}if(t<r.length)for(r[t++]=o;t<r.length;)r[t++]=0},i.prototype._toArrayLikeBE=function(r,e){for(var t=r.length-1,o=0,a=0,b=0;a<this.length;a++){var I=this.words[a]<<b|o;r[t--]=255&I,t>=0&&(r[t--]=I>>8&255),t>=0&&(r[t--]=I>>16&255),b===6?(t>=0&&(r[t--]=I>>24&255),o=0,b=0):(o=I>>>24,b+=2)}if(t>=0)for(r[t--]=o;t>=0;)r[t--]=0},Math.clz32?i.prototype._countBits=function(r){return 32-Math.clz32(r)}:i.prototype._countBits=function(r){var e=r,t=0;return e>=4096&&(t+=13,e>>>=13),e>=64&&(t+=7,e>>>=7),e>=8&&(t+=4,e>>>=4),e>=2&&(t+=2,e>>>=2),t+e},i.prototype._zeroBits=function(r){if(r===0)return 26;var e=r,t=0;return(8191&e)==0&&(t+=13,e>>>=13),(127&e)==0&&(t+=7,e>>>=7),(15&e)==0&&(t+=4,e>>>=4),(3&e)==0&&(t+=2,e>>>=2),(1&e)==0&&t++,t},i.prototype.bitLength=function(){var r=this.words[this.length-1],e=this._countBits(r);return 26*(this.length-1)+e},i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var r=0,e=0;e<this.length;e++){var t=this._zeroBits(this.words[e]);if(r+=t,t!==26)break}return r},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(r){return this.negative!==0?this.abs().inotn(r).iaddn(1):this.clone()},i.prototype.fromTwos=function(r){return this.testn(r-1)?this.notn(r).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return this.negative!==0},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(r){for(;this.length<r.length;)this.words[this.length++]=0;for(var e=0;e<r.length;e++)this.words[e]=this.words[e]|r.words[e];return this._strip()},i.prototype.ior=function(r){return d((this.negative|r.negative)==0),this.iuor(r)},i.prototype.or=function(r){return this.length>r.length?this.clone().ior(r):r.clone().ior(this)},i.prototype.uor=function(r){return this.length>r.length?this.clone().iuor(r):r.clone().iuor(this)},i.prototype.iuand=function(r){var e;e=this.length>r.length?r:this;for(var t=0;t<e.length;t++)this.words[t]=this.words[t]&r.words[t];return this.length=e.length,this._strip()},i.prototype.iand=function(r){return d((this.negative|r.negative)==0),this.iuand(r)},i.prototype.and=function(r){return this.length>r.length?this.clone().iand(r):r.clone().iand(this)},i.prototype.uand=function(r){return this.length>r.length?this.clone().iuand(r):r.clone().iuand(this)},i.prototype.iuxor=function(r){var e,t;this.length>r.length?(e=this,t=r):(e=r,t=this);for(var o=0;o<t.length;o++)this.words[o]=e.words[o]^t.words[o];if(this!==e)for(;o<e.length;o++)this.words[o]=e.words[o];return this.length=e.length,this._strip()},i.prototype.ixor=function(r){return d((this.negative|r.negative)==0),this.iuxor(r)},i.prototype.xor=function(r){return this.length>r.length?this.clone().ixor(r):r.clone().ixor(this)},i.prototype.uxor=function(r){return this.length>r.length?this.clone().iuxor(r):r.clone().iuxor(this)},i.prototype.inotn=function(r){d(typeof r=="number"&&r>=0);var e=0|Math.ceil(r/26),t=r%26;this._expand(e),t>0&&e--;for(var o=0;o<e;o++)this.words[o]=67108863&~this.words[o];return t>0&&(this.words[o]=~this.words[o]&67108863>>26-t),this._strip()},i.prototype.notn=function(r){return this.clone().inotn(r)},i.prototype.setn=function(r,e){d(typeof r=="number"&&r>=0);var t=r/26|0,o=r%26;return this._expand(t+1),this.words[t]=e?this.words[t]|1<<o:this.words[t]&~(1<<o),this._strip()},i.prototype.iadd=function(r){var e,t,o;if(this.negative!==0&&r.negative===0)return this.negative=0,e=this.isub(r),this.negative^=1,this._normSign();if(this.negative===0&&r.negative!==0)return r.negative=0,e=this.isub(r),r.negative=1,e._normSign();this.length>r.length?(t=this,o=r):(t=r,o=this);for(var a=0,b=0;b<o.length;b++)e=(0|t.words[b])+(0|o.words[b])+a,this.words[b]=67108863&e,a=e>>>26;for(;a!==0&&b<t.length;b++)e=(0|t.words[b])+a,this.words[b]=67108863&e,a=e>>>26;if(this.length=t.length,a!==0)this.words[this.length]=a,this.length++;else if(t!==this)for(;b<t.length;b++)this.words[b]=t.words[b];return this},i.prototype.add=function(r){var e;return r.negative!==0&&this.negative===0?(r.negative=0,e=this.sub(r),r.negative^=1,e):r.negative===0&&this.negative!==0?(this.negative=0,e=r.sub(this),this.negative=1,e):this.length>r.length?this.clone().iadd(r):r.clone().iadd(this)},i.prototype.isub=function(r){if(r.negative!==0){r.negative=0;var e=this.iadd(r);return r.negative=1,e._normSign()}if(this.negative!==0)return this.negative=0,this.iadd(r),this.negative=1,this._normSign();var t,o,a=this.cmp(r);if(a===0)return this.negative=0,this.length=1,this.words[0]=0,this;a>0?(t=this,o=r):(t=r,o=this);for(var b=0,I=0;I<o.length;I++)b=(e=(0|t.words[I])-(0|o.words[I])+b)>>26,this.words[I]=67108863&e;for(;b!==0&&I<t.length;I++)b=(e=(0|t.words[I])+b)>>26,this.words[I]=67108863&e;if(b===0&&I<t.length&&t!==this)for(;I<t.length;I++)this.words[I]=t.words[I];return this.length=Math.max(this.length,I),t!==this&&(this.negative=1),this._strip()},i.prototype.sub=function(r){return this.clone().isub(r)};var M=function(r,e,t){var o,a,b,I=r.words,x=e.words,P=t.words,k=0,Z=0|I[0],$=8191&Z,at=Z>>>13,st=0|I[1],yt=8191&st,Bt=st>>>13,Lt=0|I[2],wt=8191&Lt,gt=Lt>>>13,Nt=0|I[3],Yt=8191&Nt,bt=Nt>>>13,Ht=0|I[4],ce=8191&Ht,Ut=Ht>>>13,$t=0|I[5],B=8191&$t,D=$t>>>13,N=0|I[6],rt=8191&N,X=N>>>13,nt=0|I[7],lt=8191&nt,Et=nt>>>13,Ot=0|I[8],ie=8191&Ot,Dt=Ot>>>13,Gt=0|I[9],ye=8191&Gt,Vt=Gt>>>13,ae=0|x[0],fe=8191&ae,Xt=ae>>>13,R=0|x[1],j=8191&R,L=R>>>13,F=0|x[2],T=8191&F,V=F>>>13,J=0|x[3],ht=8191&J,W=J>>>13,ct=0|x[4],kt=8191&ct,ut=ct>>>13,_t=0|x[5],Pt=8191&_t,dt=_t>>>13,St=0|x[6],qt=8191&St,vt=St>>>13,Tt=0|x[7],jt=8191&Tt,pt=Tt>>>13,It=0|x[8],Zt=8191&It,mt=It>>>13,ot=0|x[9],ft=8191&ot,At=ot>>>13;t.negative=r.negative^e.negative,t.length=19;var Ft=(k+(o=Math.imul($,fe))|0)+((8191&(a=(a=Math.imul($,Xt))+Math.imul(at,fe)|0))<<13)|0;k=((b=Math.imul(at,Xt))+(a>>>13)|0)+(Ft>>>26)|0,Ft&=67108863,o=Math.imul(yt,fe),a=(a=Math.imul(yt,Xt))+Math.imul(Bt,fe)|0,b=Math.imul(Bt,Xt);var Mt=(k+(o=o+Math.imul($,j)|0)|0)+((8191&(a=(a=a+Math.imul($,L)|0)+Math.imul(at,j)|0))<<13)|0;k=((b=b+Math.imul(at,L)|0)+(a>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,o=Math.imul(wt,fe),a=(a=Math.imul(wt,Xt))+Math.imul(gt,fe)|0,b=Math.imul(gt,Xt),o=o+Math.imul(yt,j)|0,a=(a=a+Math.imul(yt,L)|0)+Math.imul(Bt,j)|0,b=b+Math.imul(Bt,L)|0;var xt=(k+(o=o+Math.imul($,T)|0)|0)+((8191&(a=(a=a+Math.imul($,V)|0)+Math.imul(at,T)|0))<<13)|0;k=((b=b+Math.imul(at,V)|0)+(a>>>13)|0)+(xt>>>26)|0,xt&=67108863,o=Math.imul(Yt,fe),a=(a=Math.imul(Yt,Xt))+Math.imul(bt,fe)|0,b=Math.imul(bt,Xt),o=o+Math.imul(wt,j)|0,a=(a=a+Math.imul(wt,L)|0)+Math.imul(gt,j)|0,b=b+Math.imul(gt,L)|0,o=o+Math.imul(yt,T)|0,a=(a=a+Math.imul(yt,V)|0)+Math.imul(Bt,T)|0,b=b+Math.imul(Bt,V)|0;var ne=(k+(o=o+Math.imul($,ht)|0)|0)+((8191&(a=(a=a+Math.imul($,W)|0)+Math.imul(at,ht)|0))<<13)|0;k=((b=b+Math.imul(at,W)|0)+(a>>>13)|0)+(ne>>>26)|0,ne&=67108863,o=Math.imul(ce,fe),a=(a=Math.imul(ce,Xt))+Math.imul(Ut,fe)|0,b=Math.imul(Ut,Xt),o=o+Math.imul(Yt,j)|0,a=(a=a+Math.imul(Yt,L)|0)+Math.imul(bt,j)|0,b=b+Math.imul(bt,L)|0,o=o+Math.imul(wt,T)|0,a=(a=a+Math.imul(wt,V)|0)+Math.imul(gt,T)|0,b=b+Math.imul(gt,V)|0,o=o+Math.imul(yt,ht)|0,a=(a=a+Math.imul(yt,W)|0)+Math.imul(Bt,ht)|0,b=b+Math.imul(Bt,W)|0;var se=(k+(o=o+Math.imul($,kt)|0)|0)+((8191&(a=(a=a+Math.imul($,ut)|0)+Math.imul(at,kt)|0))<<13)|0;k=((b=b+Math.imul(at,ut)|0)+(a>>>13)|0)+(se>>>26)|0,se&=67108863,o=Math.imul(B,fe),a=(a=Math.imul(B,Xt))+Math.imul(D,fe)|0,b=Math.imul(D,Xt),o=o+Math.imul(ce,j)|0,a=(a=a+Math.imul(ce,L)|0)+Math.imul(Ut,j)|0,b=b+Math.imul(Ut,L)|0,o=o+Math.imul(Yt,T)|0,a=(a=a+Math.imul(Yt,V)|0)+Math.imul(bt,T)|0,b=b+Math.imul(bt,V)|0,o=o+Math.imul(wt,ht)|0,a=(a=a+Math.imul(wt,W)|0)+Math.imul(gt,ht)|0,b=b+Math.imul(gt,W)|0,o=o+Math.imul(yt,kt)|0,a=(a=a+Math.imul(yt,ut)|0)+Math.imul(Bt,kt)|0,b=b+Math.imul(Bt,ut)|0;var ee=(k+(o=o+Math.imul($,Pt)|0)|0)+((8191&(a=(a=a+Math.imul($,dt)|0)+Math.imul(at,Pt)|0))<<13)|0;k=((b=b+Math.imul(at,dt)|0)+(a>>>13)|0)+(ee>>>26)|0,ee&=67108863,o=Math.imul(rt,fe),a=(a=Math.imul(rt,Xt))+Math.imul(X,fe)|0,b=Math.imul(X,Xt),o=o+Math.imul(B,j)|0,a=(a=a+Math.imul(B,L)|0)+Math.imul(D,j)|0,b=b+Math.imul(D,L)|0,o=o+Math.imul(ce,T)|0,a=(a=a+Math.imul(ce,V)|0)+Math.imul(Ut,T)|0,b=b+Math.imul(Ut,V)|0,o=o+Math.imul(Yt,ht)|0,a=(a=a+Math.imul(Yt,W)|0)+Math.imul(bt,ht)|0,b=b+Math.imul(bt,W)|0,o=o+Math.imul(wt,kt)|0,a=(a=a+Math.imul(wt,ut)|0)+Math.imul(gt,kt)|0,b=b+Math.imul(gt,ut)|0,o=o+Math.imul(yt,Pt)|0,a=(a=a+Math.imul(yt,dt)|0)+Math.imul(Bt,Pt)|0,b=b+Math.imul(Bt,dt)|0;var he=(k+(o=o+Math.imul($,qt)|0)|0)+((8191&(a=(a=a+Math.imul($,vt)|0)+Math.imul(at,qt)|0))<<13)|0;k=((b=b+Math.imul(at,vt)|0)+(a>>>13)|0)+(he>>>26)|0,he&=67108863,o=Math.imul(lt,fe),a=(a=Math.imul(lt,Xt))+Math.imul(Et,fe)|0,b=Math.imul(Et,Xt),o=o+Math.imul(rt,j)|0,a=(a=a+Math.imul(rt,L)|0)+Math.imul(X,j)|0,b=b+Math.imul(X,L)|0,o=o+Math.imul(B,T)|0,a=(a=a+Math.imul(B,V)|0)+Math.imul(D,T)|0,b=b+Math.imul(D,V)|0,o=o+Math.imul(ce,ht)|0,a=(a=a+Math.imul(ce,W)|0)+Math.imul(Ut,ht)|0,b=b+Math.imul(Ut,W)|0,o=o+Math.imul(Yt,kt)|0,a=(a=a+Math.imul(Yt,ut)|0)+Math.imul(bt,kt)|0,b=b+Math.imul(bt,ut)|0,o=o+Math.imul(wt,Pt)|0,a=(a=a+Math.imul(wt,dt)|0)+Math.imul(gt,Pt)|0,b=b+Math.imul(gt,dt)|0,o=o+Math.imul(yt,qt)|0,a=(a=a+Math.imul(yt,vt)|0)+Math.imul(Bt,qt)|0,b=b+Math.imul(Bt,vt)|0;var ue=(k+(o=o+Math.imul($,jt)|0)|0)+((8191&(a=(a=a+Math.imul($,pt)|0)+Math.imul(at,jt)|0))<<13)|0;k=((b=b+Math.imul(at,pt)|0)+(a>>>13)|0)+(ue>>>26)|0,ue&=67108863,o=Math.imul(ie,fe),a=(a=Math.imul(ie,Xt))+Math.imul(Dt,fe)|0,b=Math.imul(Dt,Xt),o=o+Math.imul(lt,j)|0,a=(a=a+Math.imul(lt,L)|0)+Math.imul(Et,j)|0,b=b+Math.imul(Et,L)|0,o=o+Math.imul(rt,T)|0,a=(a=a+Math.imul(rt,V)|0)+Math.imul(X,T)|0,b=b+Math.imul(X,V)|0,o=o+Math.imul(B,ht)|0,a=(a=a+Math.imul(B,W)|0)+Math.imul(D,ht)|0,b=b+Math.imul(D,W)|0,o=o+Math.imul(ce,kt)|0,a=(a=a+Math.imul(ce,ut)|0)+Math.imul(Ut,kt)|0,b=b+Math.imul(Ut,ut)|0,o=o+Math.imul(Yt,Pt)|0,a=(a=a+Math.imul(Yt,dt)|0)+Math.imul(bt,Pt)|0,b=b+Math.imul(bt,dt)|0,o=o+Math.imul(wt,qt)|0,a=(a=a+Math.imul(wt,vt)|0)+Math.imul(gt,qt)|0,b=b+Math.imul(gt,vt)|0,o=o+Math.imul(yt,jt)|0,a=(a=a+Math.imul(yt,pt)|0)+Math.imul(Bt,jt)|0,b=b+Math.imul(Bt,pt)|0;var le=(k+(o=o+Math.imul($,Zt)|0)|0)+((8191&(a=(a=a+Math.imul($,mt)|0)+Math.imul(at,Zt)|0))<<13)|0;k=((b=b+Math.imul(at,mt)|0)+(a>>>13)|0)+(le>>>26)|0,le&=67108863,o=Math.imul(ye,fe),a=(a=Math.imul(ye,Xt))+Math.imul(Vt,fe)|0,b=Math.imul(Vt,Xt),o=o+Math.imul(ie,j)|0,a=(a=a+Math.imul(ie,L)|0)+Math.imul(Dt,j)|0,b=b+Math.imul(Dt,L)|0,o=o+Math.imul(lt,T)|0,a=(a=a+Math.imul(lt,V)|0)+Math.imul(Et,T)|0,b=b+Math.imul(Et,V)|0,o=o+Math.imul(rt,ht)|0,a=(a=a+Math.imul(rt,W)|0)+Math.imul(X,ht)|0,b=b+Math.imul(X,W)|0,o=o+Math.imul(B,kt)|0,a=(a=a+Math.imul(B,ut)|0)+Math.imul(D,kt)|0,b=b+Math.imul(D,ut)|0,o=o+Math.imul(ce,Pt)|0,a=(a=a+Math.imul(ce,dt)|0)+Math.imul(Ut,Pt)|0,b=b+Math.imul(Ut,dt)|0,o=o+Math.imul(Yt,qt)|0,a=(a=a+Math.imul(Yt,vt)|0)+Math.imul(bt,qt)|0,b=b+Math.imul(bt,vt)|0,o=o+Math.imul(wt,jt)|0,a=(a=a+Math.imul(wt,pt)|0)+Math.imul(gt,jt)|0,b=b+Math.imul(gt,pt)|0,o=o+Math.imul(yt,Zt)|0,a=(a=a+Math.imul(yt,mt)|0)+Math.imul(Bt,Zt)|0,b=b+Math.imul(Bt,mt)|0;var Jt=(k+(o=o+Math.imul($,ft)|0)|0)+((8191&(a=(a=a+Math.imul($,At)|0)+Math.imul(at,ft)|0))<<13)|0;k=((b=b+Math.imul(at,At)|0)+(a>>>13)|0)+(Jt>>>26)|0,Jt&=67108863,o=Math.imul(ye,j),a=(a=Math.imul(ye,L))+Math.imul(Vt,j)|0,b=Math.imul(Vt,L),o=o+Math.imul(ie,T)|0,a=(a=a+Math.imul(ie,V)|0)+Math.imul(Dt,T)|0,b=b+Math.imul(Dt,V)|0,o=o+Math.imul(lt,ht)|0,a=(a=a+Math.imul(lt,W)|0)+Math.imul(Et,ht)|0,b=b+Math.imul(Et,W)|0,o=o+Math.imul(rt,kt)|0,a=(a=a+Math.imul(rt,ut)|0)+Math.imul(X,kt)|0,b=b+Math.imul(X,ut)|0,o=o+Math.imul(B,Pt)|0,a=(a=a+Math.imul(B,dt)|0)+Math.imul(D,Pt)|0,b=b+Math.imul(D,dt)|0,o=o+Math.imul(ce,qt)|0,a=(a=a+Math.imul(ce,vt)|0)+Math.imul(Ut,qt)|0,b=b+Math.imul(Ut,vt)|0,o=o+Math.imul(Yt,jt)|0,a=(a=a+Math.imul(Yt,pt)|0)+Math.imul(bt,jt)|0,b=b+Math.imul(bt,pt)|0,o=o+Math.imul(wt,Zt)|0,a=(a=a+Math.imul(wt,mt)|0)+Math.imul(gt,Zt)|0,b=b+Math.imul(gt,mt)|0;var Ct=(k+(o=o+Math.imul(yt,ft)|0)|0)+((8191&(a=(a=a+Math.imul(yt,At)|0)+Math.imul(Bt,ft)|0))<<13)|0;k=((b=b+Math.imul(Bt,At)|0)+(a>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,o=Math.imul(ye,T),a=(a=Math.imul(ye,V))+Math.imul(Vt,T)|0,b=Math.imul(Vt,V),o=o+Math.imul(ie,ht)|0,a=(a=a+Math.imul(ie,W)|0)+Math.imul(Dt,ht)|0,b=b+Math.imul(Dt,W)|0,o=o+Math.imul(lt,kt)|0,a=(a=a+Math.imul(lt,ut)|0)+Math.imul(Et,kt)|0,b=b+Math.imul(Et,ut)|0,o=o+Math.imul(rt,Pt)|0,a=(a=a+Math.imul(rt,dt)|0)+Math.imul(X,Pt)|0,b=b+Math.imul(X,dt)|0,o=o+Math.imul(B,qt)|0,a=(a=a+Math.imul(B,vt)|0)+Math.imul(D,qt)|0,b=b+Math.imul(D,vt)|0,o=o+Math.imul(ce,jt)|0,a=(a=a+Math.imul(ce,pt)|0)+Math.imul(Ut,jt)|0,b=b+Math.imul(Ut,pt)|0,o=o+Math.imul(Yt,Zt)|0,a=(a=a+Math.imul(Yt,mt)|0)+Math.imul(bt,Zt)|0,b=b+Math.imul(bt,mt)|0;var Wt=(k+(o=o+Math.imul(wt,ft)|0)|0)+((8191&(a=(a=a+Math.imul(wt,At)|0)+Math.imul(gt,ft)|0))<<13)|0;k=((b=b+Math.imul(gt,At)|0)+(a>>>13)|0)+(Wt>>>26)|0,Wt&=67108863,o=Math.imul(ye,ht),a=(a=Math.imul(ye,W))+Math.imul(Vt,ht)|0,b=Math.imul(Vt,W),o=o+Math.imul(ie,kt)|0,a=(a=a+Math.imul(ie,ut)|0)+Math.imul(Dt,kt)|0,b=b+Math.imul(Dt,ut)|0,o=o+Math.imul(lt,Pt)|0,a=(a=a+Math.imul(lt,dt)|0)+Math.imul(Et,Pt)|0,b=b+Math.imul(Et,dt)|0,o=o+Math.imul(rt,qt)|0,a=(a=a+Math.imul(rt,vt)|0)+Math.imul(X,qt)|0,b=b+Math.imul(X,vt)|0,o=o+Math.imul(B,jt)|0,a=(a=a+Math.imul(B,pt)|0)+Math.imul(D,jt)|0,b=b+Math.imul(D,pt)|0,o=o+Math.imul(ce,Zt)|0,a=(a=a+Math.imul(ce,mt)|0)+Math.imul(Ut,Zt)|0,b=b+Math.imul(Ut,mt)|0;var zt=(k+(o=o+Math.imul(Yt,ft)|0)|0)+((8191&(a=(a=a+Math.imul(Yt,At)|0)+Math.imul(bt,ft)|0))<<13)|0;k=((b=b+Math.imul(bt,At)|0)+(a>>>13)|0)+(zt>>>26)|0,zt&=67108863,o=Math.imul(ye,kt),a=(a=Math.imul(ye,ut))+Math.imul(Vt,kt)|0,b=Math.imul(Vt,ut),o=o+Math.imul(ie,Pt)|0,a=(a=a+Math.imul(ie,dt)|0)+Math.imul(Dt,Pt)|0,b=b+Math.imul(Dt,dt)|0,o=o+Math.imul(lt,qt)|0,a=(a=a+Math.imul(lt,vt)|0)+Math.imul(Et,qt)|0,b=b+Math.imul(Et,vt)|0,o=o+Math.imul(rt,jt)|0,a=(a=a+Math.imul(rt,pt)|0)+Math.imul(X,jt)|0,b=b+Math.imul(X,pt)|0,o=o+Math.imul(B,Zt)|0,a=(a=a+Math.imul(B,mt)|0)+Math.imul(D,Zt)|0,b=b+Math.imul(D,mt)|0;var Kt=(k+(o=o+Math.imul(ce,ft)|0)|0)+((8191&(a=(a=a+Math.imul(ce,At)|0)+Math.imul(Ut,ft)|0))<<13)|0;k=((b=b+Math.imul(Ut,At)|0)+(a>>>13)|0)+(Kt>>>26)|0,Kt&=67108863,o=Math.imul(ye,Pt),a=(a=Math.imul(ye,dt))+Math.imul(Vt,Pt)|0,b=Math.imul(Vt,dt),o=o+Math.imul(ie,qt)|0,a=(a=a+Math.imul(ie,vt)|0)+Math.imul(Dt,qt)|0,b=b+Math.imul(Dt,vt)|0,o=o+Math.imul(lt,jt)|0,a=(a=a+Math.imul(lt,pt)|0)+Math.imul(Et,jt)|0,b=b+Math.imul(Et,pt)|0,o=o+Math.imul(rt,Zt)|0,a=(a=a+Math.imul(rt,mt)|0)+Math.imul(X,Zt)|0,b=b+Math.imul(X,mt)|0;var Qt=(k+(o=o+Math.imul(B,ft)|0)|0)+((8191&(a=(a=a+Math.imul(B,At)|0)+Math.imul(D,ft)|0))<<13)|0;k=((b=b+Math.imul(D,At)|0)+(a>>>13)|0)+(Qt>>>26)|0,Qt&=67108863,o=Math.imul(ye,qt),a=(a=Math.imul(ye,vt))+Math.imul(Vt,qt)|0,b=Math.imul(Vt,vt),o=o+Math.imul(ie,jt)|0,a=(a=a+Math.imul(ie,pt)|0)+Math.imul(Dt,jt)|0,b=b+Math.imul(Dt,pt)|0,o=o+Math.imul(lt,Zt)|0,a=(a=a+Math.imul(lt,mt)|0)+Math.imul(Et,Zt)|0,b=b+Math.imul(Et,mt)|0;var te=(k+(o=o+Math.imul(rt,ft)|0)|0)+((8191&(a=(a=a+Math.imul(rt,At)|0)+Math.imul(X,ft)|0))<<13)|0;k=((b=b+Math.imul(X,At)|0)+(a>>>13)|0)+(te>>>26)|0,te&=67108863,o=Math.imul(ye,jt),a=(a=Math.imul(ye,pt))+Math.imul(Vt,jt)|0,b=Math.imul(Vt,pt),o=o+Math.imul(ie,Zt)|0,a=(a=a+Math.imul(ie,mt)|0)+Math.imul(Dt,Zt)|0,b=b+Math.imul(Dt,mt)|0;var de=(k+(o=o+Math.imul(lt,ft)|0)|0)+((8191&(a=(a=a+Math.imul(lt,At)|0)+Math.imul(Et,ft)|0))<<13)|0;k=((b=b+Math.imul(Et,At)|0)+(a>>>13)|0)+(de>>>26)|0,de&=67108863,o=Math.imul(ye,Zt),a=(a=Math.imul(ye,mt))+Math.imul(Vt,Zt)|0,b=Math.imul(Vt,mt);var ve=(k+(o=o+Math.imul(ie,ft)|0)|0)+((8191&(a=(a=a+Math.imul(ie,At)|0)+Math.imul(Dt,ft)|0))<<13)|0;k=((b=b+Math.imul(Dt,At)|0)+(a>>>13)|0)+(ve>>>26)|0,ve&=67108863;var Me=(k+(o=Math.imul(ye,ft))|0)+((8191&(a=(a=Math.imul(ye,At))+Math.imul(Vt,ft)|0))<<13)|0;return k=((b=Math.imul(Vt,At))+(a>>>13)|0)+(Me>>>26)|0,Me&=67108863,P[0]=Ft,P[1]=Mt,P[2]=xt,P[3]=ne,P[4]=se,P[5]=ee,P[6]=he,P[7]=ue,P[8]=le,P[9]=Jt,P[10]=Ct,P[11]=Wt,P[12]=zt,P[13]=Kt,P[14]=Qt,P[15]=te,P[16]=de,P[17]=ve,P[18]=Me,k!==0&&(P[19]=k,t.length++),t};function S(r,e,t){t.negative=e.negative^r.negative,t.length=r.length+e.length;for(var o=0,a=0,b=0;b<t.length-1;b++){var I=a;a=0;for(var x=67108863&o,P=Math.min(b,e.length-1),k=Math.max(0,b-r.length+1);k<=P;k++){var Z=b-k,$=(0|r.words[Z])*(0|e.words[k]),at=67108863&$;x=67108863&(at=at+x|0),a+=(I=(I=I+($/67108864|0)|0)+(at>>>26)|0)>>>26,I&=67108863}t.words[b]=x,o=I,I=a}return o!==0?t.words[b]=o:t.length--,t._strip()}function q(r,e,t){return S(r,e,t)}Math.imul||(M=C),i.prototype.mulTo=function(r,e){var t=this.length+r.length;return this.length===10&&r.length===10?M(this,r,e):t<63?C(this,r,e):t<1024?S(this,r,e):q(this,r,e)},i.prototype.mul=function(r){var e=new i(null);return e.words=new Array(this.length+r.length),this.mulTo(r,e)},i.prototype.mulf=function(r){var e=new i(null);return e.words=new Array(this.length+r.length),q(this,r,e)},i.prototype.imul=function(r){return this.clone().mulTo(r,this)},i.prototype.imuln=function(r){var e=r<0;e&&(r=-r),d(typeof r=="number"),d(r<67108864);for(var t=0,o=0;o<this.length;o++){var a=(0|this.words[o])*r,b=(67108863&a)+(67108863&t);t>>=26,t+=a/67108864|0,t+=b>>>26,this.words[o]=67108863&b}return t!==0&&(this.words[o]=t,this.length++),e?this.ineg():this},i.prototype.muln=function(r){return this.clone().imuln(r)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(r){var e=function(b){for(var I=new Array(b.bitLength()),x=0;x<I.length;x++){var P=x/26|0,k=x%26;I[x]=b.words[P]>>>k&1}return I}(r);if(e.length===0)return new i(1);for(var t=this,o=0;o<e.length&&e[o]===0;o++,t=t.sqr());if(++o<e.length)for(var a=t.sqr();o<e.length;o++,a=a.sqr())e[o]!==0&&(t=t.mul(a));return t},i.prototype.iushln=function(r){d(typeof r=="number"&&r>=0);var e,t=r%26,o=(r-t)/26,a=67108863>>>26-t<<26-t;if(t!==0){var b=0;for(e=0;e<this.length;e++){var I=this.words[e]&a,x=(0|this.words[e])-I<<t;this.words[e]=x|b,b=I>>>26-t}b&&(this.words[e]=b,this.length++)}if(o!==0){for(e=this.length-1;e>=0;e--)this.words[e+o]=this.words[e];for(e=0;e<o;e++)this.words[e]=0;this.length+=o}return this._strip()},i.prototype.ishln=function(r){return d(this.negative===0),this.iushln(r)},i.prototype.iushrn=function(r,e,t){var o;d(typeof r=="number"&&r>=0),o=e?(e-e%26)/26:0;var a=r%26,b=Math.min((r-a)/26,this.length),I=67108863^67108863>>>a<<a,x=t;if(o-=b,o=Math.max(0,o),x){for(var P=0;P<b;P++)x.words[P]=this.words[P];x.length=b}if(b!==0)if(this.length>b)for(this.length-=b,P=0;P<this.length;P++)this.words[P]=this.words[P+b];else this.words[0]=0,this.length=1;var k=0;for(P=this.length-1;P>=0&&(k!==0||P>=o);P--){var Z=0|this.words[P];this.words[P]=k<<26-a|Z>>>a,k=Z&I}return x&&k!==0&&(x.words[x.length++]=k),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},i.prototype.ishrn=function(r,e,t){return d(this.negative===0),this.iushrn(r,e,t)},i.prototype.shln=function(r){return this.clone().ishln(r)},i.prototype.ushln=function(r){return this.clone().iushln(r)},i.prototype.shrn=function(r){return this.clone().ishrn(r)},i.prototype.ushrn=function(r){return this.clone().iushrn(r)},i.prototype.testn=function(r){d(typeof r=="number"&&r>=0);var e=r%26,t=(r-e)/26,o=1<<e;return!(this.length<=t||!(this.words[t]&o))},i.prototype.imaskn=function(r){d(typeof r=="number"&&r>=0);var e=r%26,t=(r-e)/26;if(d(this.negative===0,"imaskn works only with positive numbers"),this.length<=t)return this;if(e!==0&&t++,this.length=Math.min(t,this.length),e!==0){var o=67108863^67108863>>>e<<e;this.words[this.length-1]&=o}return this._strip()},i.prototype.maskn=function(r){return this.clone().imaskn(r)},i.prototype.iaddn=function(r){return d(typeof r=="number"),d(r<67108864),r<0?this.isubn(-r):this.negative!==0?this.length===1&&(0|this.words[0])<=r?(this.words[0]=r-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(r),this.negative=1,this):this._iaddn(r)},i.prototype._iaddn=function(r){this.words[0]+=r;for(var e=0;e<this.length&&this.words[e]>=67108864;e++)this.words[e]-=67108864,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},i.prototype.isubn=function(r){if(d(typeof r=="number"),d(r<67108864),r<0)return this.iaddn(-r);if(this.negative!==0)return this.negative=0,this.iaddn(r),this.negative=1,this;if(this.words[0]-=r,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,this.words[e+1]-=1;return this._strip()},i.prototype.addn=function(r){return this.clone().iaddn(r)},i.prototype.subn=function(r){return this.clone().isubn(r)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(r,e,t){var o,a,b=r.length+t;this._expand(b);var I=0;for(o=0;o<r.length;o++){a=(0|this.words[o+t])+I;var x=(0|r.words[o])*e;I=((a-=67108863&x)>>26)-(x/67108864|0),this.words[o+t]=67108863&a}for(;o<this.length-t;o++)I=(a=(0|this.words[o+t])+I)>>26,this.words[o+t]=67108863&a;if(I===0)return this._strip();for(d(I===-1),I=0,o=0;o<this.length;o++)I=(a=-(0|this.words[o])+I)>>26,this.words[o]=67108863&a;return this.negative=1,this._strip()},i.prototype._wordDiv=function(r,e){var t=(this.length,r.length),o=this.clone(),a=r,b=0|a.words[a.length-1];(t=26-this._countBits(b))!=0&&(a=a.ushln(t),o.iushln(t),b=0|a.words[a.length-1]);var I,x=o.length-a.length;if(e!=="mod"){(I=new i(null)).length=x+1,I.words=new Array(I.length);for(var P=0;P<I.length;P++)I.words[P]=0}var k=o.clone()._ishlnsubmul(a,1,x);k.negative===0&&(o=k,I&&(I.words[x]=1));for(var Z=x-1;Z>=0;Z--){var $=67108864*(0|o.words[a.length+Z])+(0|o.words[a.length+Z-1]);for($=Math.min($/b|0,67108863),o._ishlnsubmul(a,$,Z);o.negative!==0;)$--,o.negative=0,o._ishlnsubmul(a,1,Z),o.isZero()||(o.negative^=1);I&&(I.words[Z]=$)}return I&&I._strip(),o._strip(),e!=="div"&&t!==0&&o.iushrn(t),{div:I||null,mod:o}},i.prototype.divmod=function(r,e,t){return d(!r.isZero()),this.isZero()?{div:new i(0),mod:new i(0)}:this.negative!==0&&r.negative===0?(b=this.neg().divmod(r,e),e!=="mod"&&(o=b.div.neg()),e!=="div"&&(a=b.mod.neg(),t&&a.negative!==0&&a.iadd(r)),{div:o,mod:a}):this.negative===0&&r.negative!==0?(b=this.divmod(r.neg(),e),e!=="mod"&&(o=b.div.neg()),{div:o,mod:b.mod}):(this.negative&r.negative)!=0?(b=this.neg().divmod(r.neg(),e),e!=="div"&&(a=b.mod.neg(),t&&a.negative!==0&&a.isub(r)),{div:b.div,mod:a}):r.length>this.length||this.cmp(r)<0?{div:new i(0),mod:this}:r.length===1?e==="div"?{div:this.divn(r.words[0]),mod:null}:e==="mod"?{div:null,mod:new i(this.modrn(r.words[0]))}:{div:this.divn(r.words[0]),mod:new i(this.modrn(r.words[0]))}:this._wordDiv(r,e);var o,a,b},i.prototype.div=function(r){return this.divmod(r,"div",!1).div},i.prototype.mod=function(r){return this.divmod(r,"mod",!1).mod},i.prototype.umod=function(r){return this.divmod(r,"mod",!0).mod},i.prototype.divRound=function(r){var e=this.divmod(r);if(e.mod.isZero())return e.div;var t=e.div.negative!==0?e.mod.isub(r):e.mod,o=r.ushrn(1),a=r.andln(1),b=t.cmp(o);return b<0||a===1&&b===0?e.div:e.div.negative!==0?e.div.isubn(1):e.div.iaddn(1)},i.prototype.modrn=function(r){var e=r<0;e&&(r=-r),d(r<=67108863);for(var t=67108864%r,o=0,a=this.length-1;a>=0;a--)o=(t*o+(0|this.words[a]))%r;return e?-o:o},i.prototype.modn=function(r){return this.modrn(r)},i.prototype.idivn=function(r){var e=r<0;e&&(r=-r),d(r<=67108863);for(var t=0,o=this.length-1;o>=0;o--){var a=(0|this.words[o])+67108864*t;this.words[o]=a/r|0,t=a%r}return this._strip(),e?this.ineg():this},i.prototype.divn=function(r){return this.clone().idivn(r)},i.prototype.egcd=function(r){d(r.negative===0),d(!r.isZero());var e=this,t=r.clone();e=e.negative!==0?e.umod(r):e.clone();for(var o=new i(1),a=new i(0),b=new i(0),I=new i(1),x=0;e.isEven()&&t.isEven();)e.iushrn(1),t.iushrn(1),++x;for(var P=t.clone(),k=e.clone();!e.isZero();){for(var Z=0,$=1;(e.words[0]&$)==0&&Z<26;++Z,$<<=1);if(Z>0)for(e.iushrn(Z);Z-- >0;)(o.isOdd()||a.isOdd())&&(o.iadd(P),a.isub(k)),o.iushrn(1),a.iushrn(1);for(var at=0,st=1;(t.words[0]&st)==0&&at<26;++at,st<<=1);if(at>0)for(t.iushrn(at);at-- >0;)(b.isOdd()||I.isOdd())&&(b.iadd(P),I.isub(k)),b.iushrn(1),I.iushrn(1);e.cmp(t)>=0?(e.isub(t),o.isub(b),a.isub(I)):(t.isub(e),b.isub(o),I.isub(a))}return{a:b,b:I,gcd:t.iushln(x)}},i.prototype._invmp=function(r){d(r.negative===0),d(!r.isZero());var e=this,t=r.clone();e=e.negative!==0?e.umod(r):e.clone();for(var o,a=new i(1),b=new i(0),I=t.clone();e.cmpn(1)>0&&t.cmpn(1)>0;){for(var x=0,P=1;(e.words[0]&P)==0&&x<26;++x,P<<=1);if(x>0)for(e.iushrn(x);x-- >0;)a.isOdd()&&a.iadd(I),a.iushrn(1);for(var k=0,Z=1;(t.words[0]&Z)==0&&k<26;++k,Z<<=1);if(k>0)for(t.iushrn(k);k-- >0;)b.isOdd()&&b.iadd(I),b.iushrn(1);e.cmp(t)>=0?(e.isub(t),a.isub(b)):(t.isub(e),b.isub(a))}return(o=e.cmpn(1)===0?a:b).cmpn(0)<0&&o.iadd(r),o},i.prototype.gcd=function(r){if(this.isZero())return r.abs();if(r.isZero())return this.abs();var e=this.clone(),t=r.clone();e.negative=0,t.negative=0;for(var o=0;e.isEven()&&t.isEven();o++)e.iushrn(1),t.iushrn(1);for(;;){for(;e.isEven();)e.iushrn(1);for(;t.isEven();)t.iushrn(1);var a=e.cmp(t);if(a<0){var b=e;e=t,t=b}else if(a===0||t.cmpn(1)===0)break;e.isub(t)}return t.iushln(o)},i.prototype.invm=function(r){return this.egcd(r).a.umod(r)},i.prototype.isEven=function(){return(1&this.words[0])==0},i.prototype.isOdd=function(){return(1&this.words[0])==1},i.prototype.andln=function(r){return this.words[0]&r},i.prototype.bincn=function(r){d(typeof r=="number");var e=r%26,t=(r-e)/26,o=1<<e;if(this.length<=t)return this._expand(t+1),this.words[t]|=o,this;for(var a=o,b=t;a!==0&&b<this.length;b++){var I=0|this.words[b];a=(I+=a)>>>26,I&=67108863,this.words[b]=I}return a!==0&&(this.words[b]=a,this.length++),this},i.prototype.isZero=function(){return this.length===1&&this.words[0]===0},i.prototype.cmpn=function(r){var e,t=r<0;if(this.negative!==0&&!t)return-1;if(this.negative===0&&t)return 1;if(this._strip(),this.length>1)e=1;else{t&&(r=-r),d(r<=67108863,"Number is too big");var o=0|this.words[0];e=o===r?0:o<r?-1:1}return this.negative!==0?0|-e:e},i.prototype.cmp=function(r){if(this.negative!==0&&r.negative===0)return-1;if(this.negative===0&&r.negative!==0)return 1;var e=this.ucmp(r);return this.negative!==0?0|-e:e},i.prototype.ucmp=function(r){if(this.length>r.length)return 1;if(this.length<r.length)return-1;for(var e=0,t=this.length-1;t>=0;t--){var o=0|this.words[t],a=0|r.words[t];if(o!==a){o<a?e=-1:o>a&&(e=1);break}}return e},i.prototype.gtn=function(r){return this.cmpn(r)===1},i.prototype.gt=function(r){return this.cmp(r)===1},i.prototype.gten=function(r){return this.cmpn(r)>=0},i.prototype.gte=function(r){return this.cmp(r)>=0},i.prototype.ltn=function(r){return this.cmpn(r)===-1},i.prototype.lt=function(r){return this.cmp(r)===-1},i.prototype.lten=function(r){return this.cmpn(r)<=0},i.prototype.lte=function(r){return this.cmp(r)<=0},i.prototype.eqn=function(r){return this.cmpn(r)===0},i.prototype.eq=function(r){return this.cmp(r)===0},i.red=function(r){return new n(r)},i.prototype.toRed=function(r){return d(!this.red,"Already a number in reduction context"),d(this.negative===0,"red works only with positives"),r.convertTo(this)._forceRed(r)},i.prototype.fromRed=function(){return d(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(r){return this.red=r,this},i.prototype.forceRed=function(r){return d(!this.red,"Already a number in reduction context"),this._forceRed(r)},i.prototype.redAdd=function(r){return d(this.red,"redAdd works only with red numbers"),this.red.add(this,r)},i.prototype.redIAdd=function(r){return d(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,r)},i.prototype.redSub=function(r){return d(this.red,"redSub works only with red numbers"),this.red.sub(this,r)},i.prototype.redISub=function(r){return d(this.red,"redISub works only with red numbers"),this.red.isub(this,r)},i.prototype.redShl=function(r){return d(this.red,"redShl works only with red numbers"),this.red.shl(this,r)},i.prototype.redMul=function(r){return d(this.red,"redMul works only with red numbers"),this.red._verify2(this,r),this.red.mul(this,r)},i.prototype.redIMul=function(r){return d(this.red,"redMul works only with red numbers"),this.red._verify2(this,r),this.red.imul(this,r)},i.prototype.redSqr=function(){return d(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return d(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return d(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return d(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return d(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(r){return d(this.red&&!r.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,r)};var G={k256:null,p224:null,p192:null,p25519:null};function U(r,e){this.name=r,this.p=new i(e,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function H(){U.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function Q(){U.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function et(){U.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function it(){U.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function n(r){if(typeof r=="string"){var e=i._prime(r);this.m=e.p,this.prime=e}else d(r.gtn(1),"modulus must be greater than 1"),this.m=r,this.prime=null}function l(r){n.call(this,r),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}U.prototype._tmp=function(){var r=new i(null);return r.words=new Array(Math.ceil(this.n/13)),r},U.prototype.ireduce=function(r){var e,t=r;do this.split(t,this.tmp),e=(t=(t=this.imulK(t)).iadd(this.tmp)).bitLength();while(e>this.n);var o=e<this.n?-1:t.ucmp(this.p);return o===0?(t.words[0]=0,t.length=1):o>0?t.isub(this.p):t._strip(),t},U.prototype.split=function(r,e){r.iushrn(this.n,0,e)},U.prototype.imulK=function(r){return r.imul(this.k)},g(H,U),H.prototype.split=function(r,e){for(var t=4194303,o=Math.min(r.length,9),a=0;a<o;a++)e.words[a]=r.words[a];if(e.length=o,r.length<=9)return r.words[0]=0,void(r.length=1);var b=r.words[9];for(e.words[e.length++]=b&t,a=10;a<r.length;a++){var I=0|r.words[a];r.words[a-10]=(I&t)<<4|b>>>22,b=I}b>>>=22,r.words[a-10]=b,b===0&&r.length>10?r.length-=10:r.length-=9},H.prototype.imulK=function(r){r.words[r.length]=0,r.words[r.length+1]=0,r.length+=2;for(var e=0,t=0;t<r.length;t++){var o=0|r.words[t];e+=977*o,r.words[t]=67108863&e,e=64*o+(e/67108864|0)}return r.words[r.length-1]===0&&(r.length--,r.words[r.length-1]===0&&r.length--),r},g(Q,U),g(et,U),g(it,U),it.prototype.imulK=function(r){for(var e=0,t=0;t<r.length;t++){var o=19*(0|r.words[t])+e,a=67108863&o;o>>>=26,r.words[t]=a,e=o}return e!==0&&(r.words[r.length++]=e),r},i._prime=function(r){if(G[r])return G[r];var e;if(r==="k256")e=new H;else if(r==="p224")e=new Q;else if(r==="p192")e=new et;else{if(r!=="p25519")throw new Error("Unknown prime "+r);e=new it}return G[r]=e,e},n.prototype._verify1=function(r){d(r.negative===0,"red works only with positives"),d(r.red,"red works only with red numbers")},n.prototype._verify2=function(r,e){d((r.negative|e.negative)==0,"red works only with positives"),d(r.red&&r.red===e.red,"red works only with red numbers")},n.prototype.imod=function(r){return this.prime?this.prime.ireduce(r)._forceRed(this):(p(r,r.umod(this.m)._forceRed(this)),r)},n.prototype.neg=function(r){return r.isZero()?r.clone():this.m.sub(r)._forceRed(this)},n.prototype.add=function(r,e){this._verify2(r,e);var t=r.add(e);return t.cmp(this.m)>=0&&t.isub(this.m),t._forceRed(this)},n.prototype.iadd=function(r,e){this._verify2(r,e);var t=r.iadd(e);return t.cmp(this.m)>=0&&t.isub(this.m),t},n.prototype.sub=function(r,e){this._verify2(r,e);var t=r.sub(e);return t.cmpn(0)<0&&t.iadd(this.m),t._forceRed(this)},n.prototype.isub=function(r,e){this._verify2(r,e);var t=r.isub(e);return t.cmpn(0)<0&&t.iadd(this.m),t},n.prototype.shl=function(r,e){return this._verify1(r),this.imod(r.ushln(e))},n.prototype.imul=function(r,e){return this._verify2(r,e),this.imod(r.imul(e))},n.prototype.mul=function(r,e){return this._verify2(r,e),this.imod(r.mul(e))},n.prototype.isqr=function(r){return this.imul(r,r.clone())},n.prototype.sqr=function(r){return this.mul(r,r)},n.prototype.sqrt=function(r){if(r.isZero())return r.clone();var e=this.m.andln(3);if(d(e%2==1),e===3){var t=this.m.add(new i(1)).iushrn(2);return this.pow(r,t)}for(var o=this.m.subn(1),a=0;!o.isZero()&&o.andln(1)===0;)a++,o.iushrn(1);d(!o.isZero());var b=new i(1).toRed(this),I=b.redNeg(),x=this.m.subn(1).iushrn(1),P=this.m.bitLength();for(P=new i(2*P*P).toRed(this);this.pow(P,x).cmp(I)!==0;)P.redIAdd(I);for(var k=this.pow(P,o),Z=this.pow(r,o.addn(1).iushrn(1)),$=this.pow(r,o),at=a;$.cmp(b)!==0;){for(var st=$,yt=0;st.cmp(b)!==0;yt++)st=st.redSqr();d(yt<at);var Bt=this.pow(k,new i(1).iushln(at-yt-1));Z=Z.redMul(Bt),k=Bt.redSqr(),$=$.redMul(k),at=yt}return Z},n.prototype.invm=function(r){var e=r._invmp(this.m);return e.negative!==0?(e.negative=0,this.imod(e).redNeg()):this.imod(e)},n.prototype.pow=function(r,e){if(e.isZero())return new i(1).toRed(this);if(e.cmpn(1)===0)return r.clone();var t=new Array(16);t[0]=new i(1).toRed(this),t[1]=r;for(var o=2;o<t.length;o++)t[o]=this.mul(t[o-1],r);var a=t[0],b=0,I=0,x=e.bitLength()%26;for(x===0&&(x=26),o=e.length-1;o>=0;o--){for(var P=e.words[o],k=x-1;k>=0;k--){var Z=P>>k&1;a!==t[0]&&(a=this.sqr(a)),Z!==0||b!==0?(b<<=1,b|=Z,(++I==4||o===0&&k===0)&&(a=this.mul(a,t[b]),I=0,b=0)):I=0}x=26}return a},n.prototype.convertTo=function(r){var e=r.umod(this.m);return e===r?e.clone():e},n.prototype.convertFrom=function(r){var e=r.clone();return e.red=null,e},i.mont=function(r){return new l(r)},g(l,n),l.prototype.convertTo=function(r){return this.imod(r.ushln(this.shift))},l.prototype.convertFrom=function(r){var e=this.imod(r.mul(this.rinv));return e.red=null,e},l.prototype.imul=function(r,e){if(r.isZero()||e.isZero())return r.words[0]=0,r.length=1,r;var t=r.imul(e),o=t.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),a=t.isub(o).iushrn(this.shift),b=a;return a.cmp(this.m)>=0?b=a.isub(this.m):a.cmpn(0)<0&&(b=a.iadd(this.m)),b._forceRed(this)},l.prototype.mul=function(r,e){if(r.isZero()||e.isZero())return new i(0)._forceRed(this);var t=r.mul(e),o=t.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),a=t.isub(o).iushrn(this.shift),b=a;return a.cmp(this.m)>=0?b=a.isub(this.m):a.cmpn(0)<0&&(b=a.iadd(this.m)),b._forceRed(this)},l.prototype.invm=function(r){return this.imod(r._invmp(this.m).mul(this.r2))._forceRed(this)}})(_=s.nmd(_),this)},()=>{},(_,E,s)=>{(function(y){var v=function(R){var j,L=new Float64Array(16);if(R)for(j=0;j<R.length;j++)L[j]=R[j];return L},d=function(){throw new Error("no PRNG")},g=new Uint8Array(16),i=new Uint8Array(32);i[0]=9;var u=v(),h=v([1]),c=v([56129,1]),p=v([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),f=v([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),m=v([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),w=v([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),A=v([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function C(R,j,L,F){R[j]=L>>24&255,R[j+1]=L>>16&255,R[j+2]=L>>8&255,R[j+3]=255&L,R[j+4]=F>>24&255,R[j+5]=F>>16&255,R[j+6]=F>>8&255,R[j+7]=255&F}function M(R,j,L,F,T){var V,J=0;for(V=0;V<T;V++)J|=R[j+V]^L[F+V];return(1&J-1>>>8)-1}function S(R,j,L,F){return M(R,j,L,F,16)}function q(R,j,L,F){return M(R,j,L,F,32)}function G(R,j,L,F){(function(T,V,J,ht){for(var W,ct=255&ht[0]|(255&ht[1])<<8|(255&ht[2])<<16|(255&ht[3])<<24,kt=255&J[0]|(255&J[1])<<8|(255&J[2])<<16|(255&J[3])<<24,ut=255&J[4]|(255&J[5])<<8|(255&J[6])<<16|(255&J[7])<<24,_t=255&J[8]|(255&J[9])<<8|(255&J[10])<<16|(255&J[11])<<24,Pt=255&J[12]|(255&J[13])<<8|(255&J[14])<<16|(255&J[15])<<24,dt=255&ht[4]|(255&ht[5])<<8|(255&ht[6])<<16|(255&ht[7])<<24,St=255&V[0]|(255&V[1])<<8|(255&V[2])<<16|(255&V[3])<<24,qt=255&V[4]|(255&V[5])<<8|(255&V[6])<<16|(255&V[7])<<24,vt=255&V[8]|(255&V[9])<<8|(255&V[10])<<16|(255&V[11])<<24,Tt=255&V[12]|(255&V[13])<<8|(255&V[14])<<16|(255&V[15])<<24,jt=255&ht[8]|(255&ht[9])<<8|(255&ht[10])<<16|(255&ht[11])<<24,pt=255&J[16]|(255&J[17])<<8|(255&J[18])<<16|(255&J[19])<<24,It=255&J[20]|(255&J[21])<<8|(255&J[22])<<16|(255&J[23])<<24,Zt=255&J[24]|(255&J[25])<<8|(255&J[26])<<16|(255&J[27])<<24,mt=255&J[28]|(255&J[29])<<8|(255&J[30])<<16|(255&J[31])<<24,ot=255&ht[12]|(255&ht[13])<<8|(255&ht[14])<<16|(255&ht[15])<<24,ft=ct,At=kt,Ft=ut,Mt=_t,xt=Pt,ne=dt,se=St,ee=qt,he=vt,ue=Tt,le=jt,Jt=pt,Ct=It,Wt=Zt,zt=mt,Kt=ot,Qt=0;Qt<20;Qt+=2)ft^=(W=(Ct^=(W=(he^=(W=(xt^=(W=ft+Ct|0)<<7|W>>>25)+ft|0)<<9|W>>>23)+xt|0)<<13|W>>>19)+he|0)<<18|W>>>14,ne^=(W=(At^=(W=(Wt^=(W=(ue^=(W=ne+At|0)<<7|W>>>25)+ne|0)<<9|W>>>23)+ue|0)<<13|W>>>19)+Wt|0)<<18|W>>>14,le^=(W=(se^=(W=(Ft^=(W=(zt^=(W=le+se|0)<<7|W>>>25)+le|0)<<9|W>>>23)+zt|0)<<13|W>>>19)+Ft|0)<<18|W>>>14,Kt^=(W=(Jt^=(W=(ee^=(W=(Mt^=(W=Kt+Jt|0)<<7|W>>>25)+Kt|0)<<9|W>>>23)+Mt|0)<<13|W>>>19)+ee|0)<<18|W>>>14,ft^=(W=(Mt^=(W=(Ft^=(W=(At^=(W=ft+Mt|0)<<7|W>>>25)+ft|0)<<9|W>>>23)+At|0)<<13|W>>>19)+Ft|0)<<18|W>>>14,ne^=(W=(xt^=(W=(ee^=(W=(se^=(W=ne+xt|0)<<7|W>>>25)+ne|0)<<9|W>>>23)+se|0)<<13|W>>>19)+ee|0)<<18|W>>>14,le^=(W=(ue^=(W=(he^=(W=(Jt^=(W=le+ue|0)<<7|W>>>25)+le|0)<<9|W>>>23)+Jt|0)<<13|W>>>19)+he|0)<<18|W>>>14,Kt^=(W=(zt^=(W=(Wt^=(W=(Ct^=(W=Kt+zt|0)<<7|W>>>25)+Kt|0)<<9|W>>>23)+Ct|0)<<13|W>>>19)+Wt|0)<<18|W>>>14;ft=ft+ct|0,At=At+kt|0,Ft=Ft+ut|0,Mt=Mt+_t|0,xt=xt+Pt|0,ne=ne+dt|0,se=se+St|0,ee=ee+qt|0,he=he+vt|0,ue=ue+Tt|0,le=le+jt|0,Jt=Jt+pt|0,Ct=Ct+It|0,Wt=Wt+Zt|0,zt=zt+mt|0,Kt=Kt+ot|0,T[0]=ft>>>0&255,T[1]=ft>>>8&255,T[2]=ft>>>16&255,T[3]=ft>>>24&255,T[4]=At>>>0&255,T[5]=At>>>8&255,T[6]=At>>>16&255,T[7]=At>>>24&255,T[8]=Ft>>>0&255,T[9]=Ft>>>8&255,T[10]=Ft>>>16&255,T[11]=Ft>>>24&255,T[12]=Mt>>>0&255,T[13]=Mt>>>8&255,T[14]=Mt>>>16&255,T[15]=Mt>>>24&255,T[16]=xt>>>0&255,T[17]=xt>>>8&255,T[18]=xt>>>16&255,T[19]=xt>>>24&255,T[20]=ne>>>0&255,T[21]=ne>>>8&255,T[22]=ne>>>16&255,T[23]=ne>>>24&255,T[24]=se>>>0&255,T[25]=se>>>8&255,T[26]=se>>>16&255,T[27]=se>>>24&255,T[28]=ee>>>0&255,T[29]=ee>>>8&255,T[30]=ee>>>16&255,T[31]=ee>>>24&255,T[32]=he>>>0&255,T[33]=he>>>8&255,T[34]=he>>>16&255,T[35]=he>>>24&255,T[36]=ue>>>0&255,T[37]=ue>>>8&255,T[38]=ue>>>16&255,T[39]=ue>>>24&255,T[40]=le>>>0&255,T[41]=le>>>8&255,T[42]=le>>>16&255,T[43]=le>>>24&255,T[44]=Jt>>>0&255,T[45]=Jt>>>8&255,T[46]=Jt>>>16&255,T[47]=Jt>>>24&255,T[48]=Ct>>>0&255,T[49]=Ct>>>8&255,T[50]=Ct>>>16&255,T[51]=Ct>>>24&255,T[52]=Wt>>>0&255,T[53]=Wt>>>8&255,T[54]=Wt>>>16&255,T[55]=Wt>>>24&255,T[56]=zt>>>0&255,T[57]=zt>>>8&255,T[58]=zt>>>16&255,T[59]=zt>>>24&255,T[60]=Kt>>>0&255,T[61]=Kt>>>8&255,T[62]=Kt>>>16&255,T[63]=Kt>>>24&255})(R,j,L,F)}function U(R,j,L,F){(function(T,V,J,ht){for(var W,ct=255&ht[0]|(255&ht[1])<<8|(255&ht[2])<<16|(255&ht[3])<<24,kt=255&J[0]|(255&J[1])<<8|(255&J[2])<<16|(255&J[3])<<24,ut=255&J[4]|(255&J[5])<<8|(255&J[6])<<16|(255&J[7])<<24,_t=255&J[8]|(255&J[9])<<8|(255&J[10])<<16|(255&J[11])<<24,Pt=255&J[12]|(255&J[13])<<8|(255&J[14])<<16|(255&J[15])<<24,dt=255&ht[4]|(255&ht[5])<<8|(255&ht[6])<<16|(255&ht[7])<<24,St=255&V[0]|(255&V[1])<<8|(255&V[2])<<16|(255&V[3])<<24,qt=255&V[4]|(255&V[5])<<8|(255&V[6])<<16|(255&V[7])<<24,vt=255&V[8]|(255&V[9])<<8|(255&V[10])<<16|(255&V[11])<<24,Tt=255&V[12]|(255&V[13])<<8|(255&V[14])<<16|(255&V[15])<<24,jt=255&ht[8]|(255&ht[9])<<8|(255&ht[10])<<16|(255&ht[11])<<24,pt=255&J[16]|(255&J[17])<<8|(255&J[18])<<16|(255&J[19])<<24,It=255&J[20]|(255&J[21])<<8|(255&J[22])<<16|(255&J[23])<<24,Zt=255&J[24]|(255&J[25])<<8|(255&J[26])<<16|(255&J[27])<<24,mt=255&J[28]|(255&J[29])<<8|(255&J[30])<<16|(255&J[31])<<24,ot=255&ht[12]|(255&ht[13])<<8|(255&ht[14])<<16|(255&ht[15])<<24,ft=0;ft<20;ft+=2)ct^=(W=(It^=(W=(vt^=(W=(Pt^=(W=ct+It|0)<<7|W>>>25)+ct|0)<<9|W>>>23)+Pt|0)<<13|W>>>19)+vt|0)<<18|W>>>14,dt^=(W=(kt^=(W=(Zt^=(W=(Tt^=(W=dt+kt|0)<<7|W>>>25)+dt|0)<<9|W>>>23)+Tt|0)<<13|W>>>19)+Zt|0)<<18|W>>>14,jt^=(W=(St^=(W=(ut^=(W=(mt^=(W=jt+St|0)<<7|W>>>25)+jt|0)<<9|W>>>23)+mt|0)<<13|W>>>19)+ut|0)<<18|W>>>14,ot^=(W=(pt^=(W=(qt^=(W=(_t^=(W=ot+pt|0)<<7|W>>>25)+ot|0)<<9|W>>>23)+_t|0)<<13|W>>>19)+qt|0)<<18|W>>>14,ct^=(W=(_t^=(W=(ut^=(W=(kt^=(W=ct+_t|0)<<7|W>>>25)+ct|0)<<9|W>>>23)+kt|0)<<13|W>>>19)+ut|0)<<18|W>>>14,dt^=(W=(Pt^=(W=(qt^=(W=(St^=(W=dt+Pt|0)<<7|W>>>25)+dt|0)<<9|W>>>23)+St|0)<<13|W>>>19)+qt|0)<<18|W>>>14,jt^=(W=(Tt^=(W=(vt^=(W=(pt^=(W=jt+Tt|0)<<7|W>>>25)+jt|0)<<9|W>>>23)+pt|0)<<13|W>>>19)+vt|0)<<18|W>>>14,ot^=(W=(mt^=(W=(Zt^=(W=(It^=(W=ot+mt|0)<<7|W>>>25)+ot|0)<<9|W>>>23)+It|0)<<13|W>>>19)+Zt|0)<<18|W>>>14;T[0]=ct>>>0&255,T[1]=ct>>>8&255,T[2]=ct>>>16&255,T[3]=ct>>>24&255,T[4]=dt>>>0&255,T[5]=dt>>>8&255,T[6]=dt>>>16&255,T[7]=dt>>>24&255,T[8]=jt>>>0&255,T[9]=jt>>>8&255,T[10]=jt>>>16&255,T[11]=jt>>>24&255,T[12]=ot>>>0&255,T[13]=ot>>>8&255,T[14]=ot>>>16&255,T[15]=ot>>>24&255,T[16]=St>>>0&255,T[17]=St>>>8&255,T[18]=St>>>16&255,T[19]=St>>>24&255,T[20]=qt>>>0&255,T[21]=qt>>>8&255,T[22]=qt>>>16&255,T[23]=qt>>>24&255,T[24]=vt>>>0&255,T[25]=vt>>>8&255,T[26]=vt>>>16&255,T[27]=vt>>>24&255,T[28]=Tt>>>0&255,T[29]=Tt>>>8&255,T[30]=Tt>>>16&255,T[31]=Tt>>>24&255})(R,j,L,F)}var H=new Uint8Array([101,120,112,97,110,100,32,51,50,45,98,121,116,101,32,107]);function Q(R,j,L,F,T,V,J){var ht,W,ct=new Uint8Array(16),kt=new Uint8Array(64);for(W=0;W<16;W++)ct[W]=0;for(W=0;W<8;W++)ct[W]=V[W];for(;T>=64;){for(G(kt,ct,J,H),W=0;W<64;W++)R[j+W]=L[F+W]^kt[W];for(ht=1,W=8;W<16;W++)ht=ht+(255&ct[W])|0,ct[W]=255&ht,ht>>>=8;T-=64,j+=64,F+=64}if(T>0)for(G(kt,ct,J,H),W=0;W<T;W++)R[j+W]=L[F+W]^kt[W];return 0}function et(R,j,L,F,T){var V,J,ht=new Uint8Array(16),W=new Uint8Array(64);for(J=0;J<16;J++)ht[J]=0;for(J=0;J<8;J++)ht[J]=F[J];for(;L>=64;){for(G(W,ht,T,H),J=0;J<64;J++)R[j+J]=W[J];for(V=1,J=8;J<16;J++)V=V+(255&ht[J])|0,ht[J]=255&V,V>>>=8;L-=64,j+=64}if(L>0)for(G(W,ht,T,H),J=0;J<L;J++)R[j+J]=W[J];return 0}function it(R,j,L,F,T){var V=new Uint8Array(32);U(V,F,T,H);for(var J=new Uint8Array(8),ht=0;ht<8;ht++)J[ht]=F[ht+16];return et(R,j,L,J,V)}function n(R,j,L,F,T,V,J){var ht=new Uint8Array(32);U(ht,V,J,H);for(var W=new Uint8Array(8),ct=0;ct<8;ct++)W[ct]=V[ct+16];return Q(R,j,L,F,T,W,ht)}var l=function(R){var j,L,F,T,V,J,ht,W;this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.leftover=0,this.fin=0,j=255&R[0]|(255&R[1])<<8,this.r[0]=8191&j,L=255&R[2]|(255&R[3])<<8,this.r[1]=8191&(j>>>13|L<<3),F=255&R[4]|(255&R[5])<<8,this.r[2]=7939&(L>>>10|F<<6),T=255&R[6]|(255&R[7])<<8,this.r[3]=8191&(F>>>7|T<<9),V=255&R[8]|(255&R[9])<<8,this.r[4]=255&(T>>>4|V<<12),this.r[5]=V>>>1&8190,J=255&R[10]|(255&R[11])<<8,this.r[6]=8191&(V>>>14|J<<2),ht=255&R[12]|(255&R[13])<<8,this.r[7]=8065&(J>>>11|ht<<5),W=255&R[14]|(255&R[15])<<8,this.r[8]=8191&(ht>>>8|W<<8),this.r[9]=W>>>5&127,this.pad[0]=255&R[16]|(255&R[17])<<8,this.pad[1]=255&R[18]|(255&R[19])<<8,this.pad[2]=255&R[20]|(255&R[21])<<8,this.pad[3]=255&R[22]|(255&R[23])<<8,this.pad[4]=255&R[24]|(255&R[25])<<8,this.pad[5]=255&R[26]|(255&R[27])<<8,this.pad[6]=255&R[28]|(255&R[29])<<8,this.pad[7]=255&R[30]|(255&R[31])<<8};function r(R,j,L,F,T,V){var J=new l(V);return J.update(L,F,T),J.finish(R,j),0}function e(R,j,L,F,T,V){var J=new Uint8Array(16);return r(J,0,L,F,T,V),S(R,j,J,0)}function t(R,j,L,F,T){var V;if(L<32)return-1;for(n(R,0,j,0,L,F,T),r(R,16,R,32,L-32,R),V=0;V<16;V++)R[V]=0;return 0}function o(R,j,L,F,T){var V,J=new Uint8Array(32);if(L<32||(it(J,0,32,F,T),e(j,16,j,32,L-32,J)!==0))return-1;for(n(R,0,j,0,L,F,T),V=0;V<32;V++)R[V]=0;return 0}function a(R,j){var L;for(L=0;L<16;L++)R[L]=0|j[L]}function b(R){var j,L,F=1;for(j=0;j<16;j++)L=R[j]+F+65535,F=Math.floor(L/65536),R[j]=L-65536*F;R[0]+=F-1+37*(F-1)}function I(R,j,L){for(var F,T=~(L-1),V=0;V<16;V++)F=T&(R[V]^j[V]),R[V]^=F,j[V]^=F}function x(R,j){var L,F,T,V=v(),J=v();for(L=0;L<16;L++)J[L]=j[L];for(b(J),b(J),b(J),F=0;F<2;F++){for(V[0]=J[0]-65517,L=1;L<15;L++)V[L]=J[L]-65535-(V[L-1]>>16&1),V[L-1]&=65535;V[15]=J[15]-32767-(V[14]>>16&1),T=V[15]>>16&1,V[14]&=65535,I(J,V,1-T)}for(L=0;L<16;L++)R[2*L]=255&J[L],R[2*L+1]=J[L]>>8}function P(R,j){var L=new Uint8Array(32),F=new Uint8Array(32);return x(L,R),x(F,j),q(L,0,F,0)}function k(R){var j=new Uint8Array(32);return x(j,R),1&j[0]}function Z(R,j){var L;for(L=0;L<16;L++)R[L]=j[2*L]+(j[2*L+1]<<8);R[15]&=32767}function $(R,j,L){for(var F=0;F<16;F++)R[F]=j[F]+L[F]}function at(R,j,L){for(var F=0;F<16;F++)R[F]=j[F]-L[F]}function st(R,j,L){var F,T,V=0,J=0,ht=0,W=0,ct=0,kt=0,ut=0,_t=0,Pt=0,dt=0,St=0,qt=0,vt=0,Tt=0,jt=0,pt=0,It=0,Zt=0,mt=0,ot=0,ft=0,At=0,Ft=0,Mt=0,xt=0,ne=0,se=0,ee=0,he=0,ue=0,le=0,Jt=L[0],Ct=L[1],Wt=L[2],zt=L[3],Kt=L[4],Qt=L[5],te=L[6],de=L[7],ve=L[8],Me=L[9],_e=L[10],De=L[11],Se=L[12],Ie=L[13],xe=L[14],Te=L[15];V+=(F=j[0])*Jt,J+=F*Ct,ht+=F*Wt,W+=F*zt,ct+=F*Kt,kt+=F*Qt,ut+=F*te,_t+=F*de,Pt+=F*ve,dt+=F*Me,St+=F*_e,qt+=F*De,vt+=F*Se,Tt+=F*Ie,jt+=F*xe,pt+=F*Te,J+=(F=j[1])*Jt,ht+=F*Ct,W+=F*Wt,ct+=F*zt,kt+=F*Kt,ut+=F*Qt,_t+=F*te,Pt+=F*de,dt+=F*ve,St+=F*Me,qt+=F*_e,vt+=F*De,Tt+=F*Se,jt+=F*Ie,pt+=F*xe,It+=F*Te,ht+=(F=j[2])*Jt,W+=F*Ct,ct+=F*Wt,kt+=F*zt,ut+=F*Kt,_t+=F*Qt,Pt+=F*te,dt+=F*de,St+=F*ve,qt+=F*Me,vt+=F*_e,Tt+=F*De,jt+=F*Se,pt+=F*Ie,It+=F*xe,Zt+=F*Te,W+=(F=j[3])*Jt,ct+=F*Ct,kt+=F*Wt,ut+=F*zt,_t+=F*Kt,Pt+=F*Qt,dt+=F*te,St+=F*de,qt+=F*ve,vt+=F*Me,Tt+=F*_e,jt+=F*De,pt+=F*Se,It+=F*Ie,Zt+=F*xe,mt+=F*Te,ct+=(F=j[4])*Jt,kt+=F*Ct,ut+=F*Wt,_t+=F*zt,Pt+=F*Kt,dt+=F*Qt,St+=F*te,qt+=F*de,vt+=F*ve,Tt+=F*Me,jt+=F*_e,pt+=F*De,It+=F*Se,Zt+=F*Ie,mt+=F*xe,ot+=F*Te,kt+=(F=j[5])*Jt,ut+=F*Ct,_t+=F*Wt,Pt+=F*zt,dt+=F*Kt,St+=F*Qt,qt+=F*te,vt+=F*de,Tt+=F*ve,jt+=F*Me,pt+=F*_e,It+=F*De,Zt+=F*Se,mt+=F*Ie,ot+=F*xe,ft+=F*Te,ut+=(F=j[6])*Jt,_t+=F*Ct,Pt+=F*Wt,dt+=F*zt,St+=F*Kt,qt+=F*Qt,vt+=F*te,Tt+=F*de,jt+=F*ve,pt+=F*Me,It+=F*_e,Zt+=F*De,mt+=F*Se,ot+=F*Ie,ft+=F*xe,At+=F*Te,_t+=(F=j[7])*Jt,Pt+=F*Ct,dt+=F*Wt,St+=F*zt,qt+=F*Kt,vt+=F*Qt,Tt+=F*te,jt+=F*de,pt+=F*ve,It+=F*Me,Zt+=F*_e,mt+=F*De,ot+=F*Se,ft+=F*Ie,At+=F*xe,Ft+=F*Te,Pt+=(F=j[8])*Jt,dt+=F*Ct,St+=F*Wt,qt+=F*zt,vt+=F*Kt,Tt+=F*Qt,jt+=F*te,pt+=F*de,It+=F*ve,Zt+=F*Me,mt+=F*_e,ot+=F*De,ft+=F*Se,At+=F*Ie,Ft+=F*xe,Mt+=F*Te,dt+=(F=j[9])*Jt,St+=F*Ct,qt+=F*Wt,vt+=F*zt,Tt+=F*Kt,jt+=F*Qt,pt+=F*te,It+=F*de,Zt+=F*ve,mt+=F*Me,ot+=F*_e,ft+=F*De,At+=F*Se,Ft+=F*Ie,Mt+=F*xe,xt+=F*Te,St+=(F=j[10])*Jt,qt+=F*Ct,vt+=F*Wt,Tt+=F*zt,jt+=F*Kt,pt+=F*Qt,It+=F*te,Zt+=F*de,mt+=F*ve,ot+=F*Me,ft+=F*_e,At+=F*De,Ft+=F*Se,Mt+=F*Ie,xt+=F*xe,ne+=F*Te,qt+=(F=j[11])*Jt,vt+=F*Ct,Tt+=F*Wt,jt+=F*zt,pt+=F*Kt,It+=F*Qt,Zt+=F*te,mt+=F*de,ot+=F*ve,ft+=F*Me,At+=F*_e,Ft+=F*De,Mt+=F*Se,xt+=F*Ie,ne+=F*xe,se+=F*Te,vt+=(F=j[12])*Jt,Tt+=F*Ct,jt+=F*Wt,pt+=F*zt,It+=F*Kt,Zt+=F*Qt,mt+=F*te,ot+=F*de,ft+=F*ve,At+=F*Me,Ft+=F*_e,Mt+=F*De,xt+=F*Se,ne+=F*Ie,se+=F*xe,ee+=F*Te,Tt+=(F=j[13])*Jt,jt+=F*Ct,pt+=F*Wt,It+=F*zt,Zt+=F*Kt,mt+=F*Qt,ot+=F*te,ft+=F*de,At+=F*ve,Ft+=F*Me,Mt+=F*_e,xt+=F*De,ne+=F*Se,se+=F*Ie,ee+=F*xe,he+=F*Te,jt+=(F=j[14])*Jt,pt+=F*Ct,It+=F*Wt,Zt+=F*zt,mt+=F*Kt,ot+=F*Qt,ft+=F*te,At+=F*de,Ft+=F*ve,Mt+=F*Me,xt+=F*_e,ne+=F*De,se+=F*Se,ee+=F*Ie,he+=F*xe,ue+=F*Te,pt+=(F=j[15])*Jt,J+=38*(Zt+=F*Wt),ht+=38*(mt+=F*zt),W+=38*(ot+=F*Kt),ct+=38*(ft+=F*Qt),kt+=38*(At+=F*te),ut+=38*(Ft+=F*de),_t+=38*(Mt+=F*ve),Pt+=38*(xt+=F*Me),dt+=38*(ne+=F*_e),St+=38*(se+=F*De),qt+=38*(ee+=F*Se),vt+=38*(he+=F*Ie),Tt+=38*(ue+=F*xe),jt+=38*(le+=F*Te),V=(F=(V+=38*(It+=F*Ct))+(T=1)+65535)-65536*(T=Math.floor(F/65536)),J=(F=J+T+65535)-65536*(T=Math.floor(F/65536)),ht=(F=ht+T+65535)-65536*(T=Math.floor(F/65536)),W=(F=W+T+65535)-65536*(T=Math.floor(F/65536)),ct=(F=ct+T+65535)-65536*(T=Math.floor(F/65536)),kt=(F=kt+T+65535)-65536*(T=Math.floor(F/65536)),ut=(F=ut+T+65535)-65536*(T=Math.floor(F/65536)),_t=(F=_t+T+65535)-65536*(T=Math.floor(F/65536)),Pt=(F=Pt+T+65535)-65536*(T=Math.floor(F/65536)),dt=(F=dt+T+65535)-65536*(T=Math.floor(F/65536)),St=(F=St+T+65535)-65536*(T=Math.floor(F/65536)),qt=(F=qt+T+65535)-65536*(T=Math.floor(F/65536)),vt=(F=vt+T+65535)-65536*(T=Math.floor(F/65536)),Tt=(F=Tt+T+65535)-65536*(T=Math.floor(F/65536)),jt=(F=jt+T+65535)-65536*(T=Math.floor(F/65536)),pt=(F=pt+T+65535)-65536*(T=Math.floor(F/65536)),V=(F=(V+=T-1+37*(T-1))+(T=1)+65535)-65536*(T=Math.floor(F/65536)),J=(F=J+T+65535)-65536*(T=Math.floor(F/65536)),ht=(F=ht+T+65535)-65536*(T=Math.floor(F/65536)),W=(F=W+T+65535)-65536*(T=Math.floor(F/65536)),ct=(F=ct+T+65535)-65536*(T=Math.floor(F/65536)),kt=(F=kt+T+65535)-65536*(T=Math.floor(F/65536)),ut=(F=ut+T+65535)-65536*(T=Math.floor(F/65536)),_t=(F=_t+T+65535)-65536*(T=Math.floor(F/65536)),Pt=(F=Pt+T+65535)-65536*(T=Math.floor(F/65536)),dt=(F=dt+T+65535)-65536*(T=Math.floor(F/65536)),St=(F=St+T+65535)-65536*(T=Math.floor(F/65536)),qt=(F=qt+T+65535)-65536*(T=Math.floor(F/65536)),vt=(F=vt+T+65535)-65536*(T=Math.floor(F/65536)),Tt=(F=Tt+T+65535)-65536*(T=Math.floor(F/65536)),jt=(F=jt+T+65535)-65536*(T=Math.floor(F/65536)),pt=(F=pt+T+65535)-65536*(T=Math.floor(F/65536)),V+=T-1+37*(T-1),R[0]=V,R[1]=J,R[2]=ht,R[3]=W,R[4]=ct,R[5]=kt,R[6]=ut,R[7]=_t,R[8]=Pt,R[9]=dt,R[10]=St,R[11]=qt,R[12]=vt,R[13]=Tt,R[14]=jt,R[15]=pt}function yt(R,j){st(R,j,j)}function Bt(R,j){var L,F=v();for(L=0;L<16;L++)F[L]=j[L];for(L=253;L>=0;L--)yt(F,F),L!==2&&L!==4&&st(F,F,j);for(L=0;L<16;L++)R[L]=F[L]}function Lt(R,j){var L,F=v();for(L=0;L<16;L++)F[L]=j[L];for(L=250;L>=0;L--)yt(F,F),L!==1&&st(F,F,j);for(L=0;L<16;L++)R[L]=F[L]}function wt(R,j,L){var F,T,V=new Uint8Array(32),J=new Float64Array(80),ht=v(),W=v(),ct=v(),kt=v(),ut=v(),_t=v();for(T=0;T<31;T++)V[T]=j[T];for(V[31]=127&j[31]|64,V[0]&=248,Z(J,L),T=0;T<16;T++)W[T]=J[T],kt[T]=ht[T]=ct[T]=0;for(ht[0]=kt[0]=1,T=254;T>=0;--T)I(ht,W,F=V[T>>>3]>>>(7&T)&1),I(ct,kt,F),$(ut,ht,ct),at(ht,ht,ct),$(ct,W,kt),at(W,W,kt),yt(kt,ut),yt(_t,ht),st(ht,ct,ht),st(ct,W,ut),$(ut,ht,ct),at(ht,ht,ct),yt(W,ht),at(ct,kt,_t),st(ht,ct,c),$(ht,ht,kt),st(ct,ct,ht),st(ht,kt,_t),st(kt,W,J),yt(W,ut),I(ht,W,F),I(ct,kt,F);for(T=0;T<16;T++)J[T+16]=ht[T],J[T+32]=ct[T],J[T+48]=W[T],J[T+64]=kt[T];var Pt=J.subarray(32),dt=J.subarray(16);return Bt(Pt,Pt),st(dt,dt,Pt),x(R,dt),0}function gt(R,j){return wt(R,j,i)}function Nt(R,j){return d(j,32),gt(R,j)}function Yt(R,j,L){var F=new Uint8Array(32);return wt(F,L,j),U(R,g,F,H)}l.prototype.blocks=function(R,j,L){for(var F,T,V,J,ht,W,ct,kt,ut,_t,Pt,dt,St,qt,vt,Tt,jt,pt,It,Zt=this.fin?0:2048,mt=this.h[0],ot=this.h[1],ft=this.h[2],At=this.h[3],Ft=this.h[4],Mt=this.h[5],xt=this.h[6],ne=this.h[7],se=this.h[8],ee=this.h[9],he=this.r[0],ue=this.r[1],le=this.r[2],Jt=this.r[3],Ct=this.r[4],Wt=this.r[5],zt=this.r[6],Kt=this.r[7],Qt=this.r[8],te=this.r[9];L>=16;)_t=ut=0,_t+=(mt+=8191&(F=255&R[j+0]|(255&R[j+1])<<8))*he,_t+=(ot+=8191&(F>>>13|(T=255&R[j+2]|(255&R[j+3])<<8)<<3))*(5*te),_t+=(ft+=8191&(T>>>10|(V=255&R[j+4]|(255&R[j+5])<<8)<<6))*(5*Qt),_t+=(At+=8191&(V>>>7|(J=255&R[j+6]|(255&R[j+7])<<8)<<9))*(5*Kt),ut=(_t+=(Ft+=8191&(J>>>4|(ht=255&R[j+8]|(255&R[j+9])<<8)<<12))*(5*zt))>>>13,_t&=8191,_t+=(Mt+=ht>>>1&8191)*(5*Wt),_t+=(xt+=8191&(ht>>>14|(W=255&R[j+10]|(255&R[j+11])<<8)<<2))*(5*Ct),_t+=(ne+=8191&(W>>>11|(ct=255&R[j+12]|(255&R[j+13])<<8)<<5))*(5*Jt),_t+=(se+=8191&(ct>>>8|(kt=255&R[j+14]|(255&R[j+15])<<8)<<8))*(5*le),Pt=ut+=(_t+=(ee+=kt>>>5|Zt)*(5*ue))>>>13,Pt+=mt*ue,Pt+=ot*he,Pt+=ft*(5*te),Pt+=At*(5*Qt),ut=(Pt+=Ft*(5*Kt))>>>13,Pt&=8191,Pt+=Mt*(5*zt),Pt+=xt*(5*Wt),Pt+=ne*(5*Ct),Pt+=se*(5*Jt),ut+=(Pt+=ee*(5*le))>>>13,Pt&=8191,dt=ut,dt+=mt*le,dt+=ot*ue,dt+=ft*he,dt+=At*(5*te),ut=(dt+=Ft*(5*Qt))>>>13,dt&=8191,dt+=Mt*(5*Kt),dt+=xt*(5*zt),dt+=ne*(5*Wt),dt+=se*(5*Ct),St=ut+=(dt+=ee*(5*Jt))>>>13,St+=mt*Jt,St+=ot*le,St+=ft*ue,St+=At*he,ut=(St+=Ft*(5*te))>>>13,St&=8191,St+=Mt*(5*Qt),St+=xt*(5*Kt),St+=ne*(5*zt),St+=se*(5*Wt),qt=ut+=(St+=ee*(5*Ct))>>>13,qt+=mt*Ct,qt+=ot*Jt,qt+=ft*le,qt+=At*ue,ut=(qt+=Ft*he)>>>13,qt&=8191,qt+=Mt*(5*te),qt+=xt*(5*Qt),qt+=ne*(5*Kt),qt+=se*(5*zt),vt=ut+=(qt+=ee*(5*Wt))>>>13,vt+=mt*Wt,vt+=ot*Ct,vt+=ft*Jt,vt+=At*le,ut=(vt+=Ft*ue)>>>13,vt&=8191,vt+=Mt*he,vt+=xt*(5*te),vt+=ne*(5*Qt),vt+=se*(5*Kt),Tt=ut+=(vt+=ee*(5*zt))>>>13,Tt+=mt*zt,Tt+=ot*Wt,Tt+=ft*Ct,Tt+=At*Jt,ut=(Tt+=Ft*le)>>>13,Tt&=8191,Tt+=Mt*ue,Tt+=xt*he,Tt+=ne*(5*te),Tt+=se*(5*Qt),jt=ut+=(Tt+=ee*(5*Kt))>>>13,jt+=mt*Kt,jt+=ot*zt,jt+=ft*Wt,jt+=At*Ct,ut=(jt+=Ft*Jt)>>>13,jt&=8191,jt+=Mt*le,jt+=xt*ue,jt+=ne*he,jt+=se*(5*te),pt=ut+=(jt+=ee*(5*Qt))>>>13,pt+=mt*Qt,pt+=ot*Kt,pt+=ft*zt,pt+=At*Wt,ut=(pt+=Ft*Ct)>>>13,pt&=8191,pt+=Mt*Jt,pt+=xt*le,pt+=ne*ue,pt+=se*he,It=ut+=(pt+=ee*(5*te))>>>13,It+=mt*te,It+=ot*Qt,It+=ft*Kt,It+=At*zt,ut=(It+=Ft*Wt)>>>13,It&=8191,It+=Mt*Ct,It+=xt*Jt,It+=ne*le,It+=se*ue,mt=_t=8191&(ut=(ut=((ut+=(It+=ee*he)>>>13)<<2)+ut|0)+(_t&=8191)|0),ot=Pt+=ut>>>=13,ft=dt&=8191,At=St&=8191,Ft=qt&=8191,Mt=vt&=8191,xt=Tt&=8191,ne=jt&=8191,se=pt&=8191,ee=It&=8191,j+=16,L-=16;this.h[0]=mt,this.h[1]=ot,this.h[2]=ft,this.h[3]=At,this.h[4]=Ft,this.h[5]=Mt,this.h[6]=xt,this.h[7]=ne,this.h[8]=se,this.h[9]=ee},l.prototype.finish=function(R,j){var L,F,T,V,J=new Uint16Array(10);if(this.leftover){for(V=this.leftover,this.buffer[V++]=1;V<16;V++)this.buffer[V]=0;this.fin=1,this.blocks(this.buffer,0,16)}for(L=this.h[1]>>>13,this.h[1]&=8191,V=2;V<10;V++)this.h[V]+=L,L=this.h[V]>>>13,this.h[V]&=8191;for(this.h[0]+=5*L,L=this.h[0]>>>13,this.h[0]&=8191,this.h[1]+=L,L=this.h[1]>>>13,this.h[1]&=8191,this.h[2]+=L,J[0]=this.h[0]+5,L=J[0]>>>13,J[0]&=8191,V=1;V<10;V++)J[V]=this.h[V]+L,L=J[V]>>>13,J[V]&=8191;for(J[9]-=8192,F=(1^L)-1,V=0;V<10;V++)J[V]&=F;for(F=~F,V=0;V<10;V++)this.h[V]=this.h[V]&F|J[V];for(this.h[0]=65535&(this.h[0]|this.h[1]<<13),this.h[1]=65535&(this.h[1]>>>3|this.h[2]<<10),this.h[2]=65535&(this.h[2]>>>6|this.h[3]<<7),this.h[3]=65535&(this.h[3]>>>9|this.h[4]<<4),this.h[4]=65535&(this.h[4]>>>12|this.h[5]<<1|this.h[6]<<14),this.h[5]=65535&(this.h[6]>>>2|this.h[7]<<11),this.h[6]=65535&(this.h[7]>>>5|this.h[8]<<8),this.h[7]=65535&(this.h[8]>>>8|this.h[9]<<5),T=this.h[0]+this.pad[0],this.h[0]=65535&T,V=1;V<8;V++)T=(this.h[V]+this.pad[V]|0)+(T>>>16)|0,this.h[V]=65535&T;R[j+0]=this.h[0]>>>0&255,R[j+1]=this.h[0]>>>8&255,R[j+2]=this.h[1]>>>0&255,R[j+3]=this.h[1]>>>8&255,R[j+4]=this.h[2]>>>0&255,R[j+5]=this.h[2]>>>8&255,R[j+6]=this.h[3]>>>0&255,R[j+7]=this.h[3]>>>8&255,R[j+8]=this.h[4]>>>0&255,R[j+9]=this.h[4]>>>8&255,R[j+10]=this.h[5]>>>0&255,R[j+11]=this.h[5]>>>8&255,R[j+12]=this.h[6]>>>0&255,R[j+13]=this.h[6]>>>8&255,R[j+14]=this.h[7]>>>0&255,R[j+15]=this.h[7]>>>8&255},l.prototype.update=function(R,j,L){var F,T;if(this.leftover){for((T=16-this.leftover)>L&&(T=L),F=0;F<T;F++)this.buffer[this.leftover+F]=R[j+F];if(L-=T,j+=T,this.leftover+=T,this.leftover<16)return;this.blocks(this.buffer,0,16),this.leftover=0}if(L>=16&&(T=L-L%16,this.blocks(R,j,T),j+=T,L-=T),L){for(F=0;F<L;F++)this.buffer[this.leftover+F]=R[j+F];this.leftover+=L}};var bt=t,Ht=o,ce=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function Ut(R,j,L,F){for(var T,V,J,ht,W,ct,kt,ut,_t,Pt,dt,St,qt,vt,Tt,jt,pt,It,Zt,mt,ot,ft,At,Ft,Mt,xt,ne=new Int32Array(16),se=new Int32Array(16),ee=R[0],he=R[1],ue=R[2],le=R[3],Jt=R[4],Ct=R[5],Wt=R[6],zt=R[7],Kt=j[0],Qt=j[1],te=j[2],de=j[3],ve=j[4],Me=j[5],_e=j[6],De=j[7],Se=0;F>=128;){for(Zt=0;Zt<16;Zt++)mt=8*Zt+Se,ne[Zt]=L[mt+0]<<24|L[mt+1]<<16|L[mt+2]<<8|L[mt+3],se[Zt]=L[mt+4]<<24|L[mt+5]<<16|L[mt+6]<<8|L[mt+7];for(Zt=0;Zt<80;Zt++)if(T=ee,V=he,J=ue,ht=le,W=Jt,ct=Ct,kt=Wt,_t=Kt,Pt=Qt,dt=te,St=de,qt=ve,vt=Me,Tt=_e,At=65535&(ft=De),Ft=ft>>>16,Mt=65535&(ot=zt),xt=ot>>>16,At+=65535&(ft=(ve>>>14|Jt<<18)^(ve>>>18|Jt<<14)^(Jt>>>9|ve<<23)),Ft+=ft>>>16,Mt+=65535&(ot=(Jt>>>14|ve<<18)^(Jt>>>18|ve<<14)^(ve>>>9|Jt<<23)),xt+=ot>>>16,At+=65535&(ft=ve&Me^~ve&_e),Ft+=ft>>>16,Mt+=65535&(ot=Jt&Ct^~Jt&Wt),xt+=ot>>>16,At+=65535&(ft=ce[2*Zt+1]),Ft+=ft>>>16,Mt+=65535&(ot=ce[2*Zt]),xt+=ot>>>16,ot=ne[Zt%16],Ft+=(ft=se[Zt%16])>>>16,Mt+=65535&ot,xt+=ot>>>16,Mt+=(Ft+=(At+=65535&ft)>>>16)>>>16,At=65535&(ft=It=65535&At|Ft<<16),Ft=ft>>>16,Mt=65535&(ot=pt=65535&Mt|(xt+=Mt>>>16)<<16),xt=ot>>>16,At+=65535&(ft=(Kt>>>28|ee<<4)^(ee>>>2|Kt<<30)^(ee>>>7|Kt<<25)),Ft+=ft>>>16,Mt+=65535&(ot=(ee>>>28|Kt<<4)^(Kt>>>2|ee<<30)^(Kt>>>7|ee<<25)),xt+=ot>>>16,Ft+=(ft=Kt&Qt^Kt&te^Qt&te)>>>16,Mt+=65535&(ot=ee&he^ee&ue^he&ue),xt+=ot>>>16,ut=65535&(Mt+=(Ft+=(At+=65535&ft)>>>16)>>>16)|(xt+=Mt>>>16)<<16,jt=65535&At|Ft<<16,At=65535&(ft=St),Ft=ft>>>16,Mt=65535&(ot=ht),xt=ot>>>16,Ft+=(ft=It)>>>16,Mt+=65535&(ot=pt),xt+=ot>>>16,he=T,ue=V,le=J,Jt=ht=65535&(Mt+=(Ft+=(At+=65535&ft)>>>16)>>>16)|(xt+=Mt>>>16)<<16,Ct=W,Wt=ct,zt=kt,ee=ut,Qt=_t,te=Pt,de=dt,ve=St=65535&At|Ft<<16,Me=qt,_e=vt,De=Tt,Kt=jt,Zt%16==15)for(mt=0;mt<16;mt++)ot=ne[mt],At=65535&(ft=se[mt]),Ft=ft>>>16,Mt=65535&ot,xt=ot>>>16,ot=ne[(mt+9)%16],At+=65535&(ft=se[(mt+9)%16]),Ft+=ft>>>16,Mt+=65535&ot,xt+=ot>>>16,pt=ne[(mt+1)%16],At+=65535&(ft=((It=se[(mt+1)%16])>>>1|pt<<31)^(It>>>8|pt<<24)^(It>>>7|pt<<25)),Ft+=ft>>>16,Mt+=65535&(ot=(pt>>>1|It<<31)^(pt>>>8|It<<24)^pt>>>7),xt+=ot>>>16,pt=ne[(mt+14)%16],Ft+=(ft=((It=se[(mt+14)%16])>>>19|pt<<13)^(pt>>>29|It<<3)^(It>>>6|pt<<26))>>>16,Mt+=65535&(ot=(pt>>>19|It<<13)^(It>>>29|pt<<3)^pt>>>6),xt+=ot>>>16,xt+=(Mt+=(Ft+=(At+=65535&ft)>>>16)>>>16)>>>16,ne[mt]=65535&Mt|xt<<16,se[mt]=65535&At|Ft<<16;At=65535&(ft=Kt),Ft=ft>>>16,Mt=65535&(ot=ee),xt=ot>>>16,ot=R[0],Ft+=(ft=j[0])>>>16,Mt+=65535&ot,xt+=ot>>>16,xt+=(Mt+=(Ft+=(At+=65535&ft)>>>16)>>>16)>>>16,R[0]=ee=65535&Mt|xt<<16,j[0]=Kt=65535&At|Ft<<16,At=65535&(ft=Qt),Ft=ft>>>16,Mt=65535&(ot=he),xt=ot>>>16,ot=R[1],Ft+=(ft=j[1])>>>16,Mt+=65535&ot,xt+=ot>>>16,xt+=(Mt+=(Ft+=(At+=65535&ft)>>>16)>>>16)>>>16,R[1]=he=65535&Mt|xt<<16,j[1]=Qt=65535&At|Ft<<16,At=65535&(ft=te),Ft=ft>>>16,Mt=65535&(ot=ue),xt=ot>>>16,ot=R[2],Ft+=(ft=j[2])>>>16,Mt+=65535&ot,xt+=ot>>>16,xt+=(Mt+=(Ft+=(At+=65535&ft)>>>16)>>>16)>>>16,R[2]=ue=65535&Mt|xt<<16,j[2]=te=65535&At|Ft<<16,At=65535&(ft=de),Ft=ft>>>16,Mt=65535&(ot=le),xt=ot>>>16,ot=R[3],Ft+=(ft=j[3])>>>16,Mt+=65535&ot,xt+=ot>>>16,xt+=(Mt+=(Ft+=(At+=65535&ft)>>>16)>>>16)>>>16,R[3]=le=65535&Mt|xt<<16,j[3]=de=65535&At|Ft<<16,At=65535&(ft=ve),Ft=ft>>>16,Mt=65535&(ot=Jt),xt=ot>>>16,ot=R[4],Ft+=(ft=j[4])>>>16,Mt+=65535&ot,xt+=ot>>>16,xt+=(Mt+=(Ft+=(At+=65535&ft)>>>16)>>>16)>>>16,R[4]=Jt=65535&Mt|xt<<16,j[4]=ve=65535&At|Ft<<16,At=65535&(ft=Me),Ft=ft>>>16,Mt=65535&(ot=Ct),xt=ot>>>16,ot=R[5],Ft+=(ft=j[5])>>>16,Mt+=65535&ot,xt+=ot>>>16,xt+=(Mt+=(Ft+=(At+=65535&ft)>>>16)>>>16)>>>16,R[5]=Ct=65535&Mt|xt<<16,j[5]=Me=65535&At|Ft<<16,At=65535&(ft=_e),Ft=ft>>>16,Mt=65535&(ot=Wt),xt=ot>>>16,ot=R[6],Ft+=(ft=j[6])>>>16,Mt+=65535&ot,xt+=ot>>>16,xt+=(Mt+=(Ft+=(At+=65535&ft)>>>16)>>>16)>>>16,R[6]=Wt=65535&Mt|xt<<16,j[6]=_e=65535&At|Ft<<16,At=65535&(ft=De),Ft=ft>>>16,Mt=65535&(ot=zt),xt=ot>>>16,ot=R[7],Ft+=(ft=j[7])>>>16,Mt+=65535&ot,xt+=ot>>>16,xt+=(Mt+=(Ft+=(At+=65535&ft)>>>16)>>>16)>>>16,R[7]=zt=65535&Mt|xt<<16,j[7]=De=65535&At|Ft<<16,Se+=128,F-=128}return F}function $t(R,j,L){var F,T=new Int32Array(8),V=new Int32Array(8),J=new Uint8Array(256),ht=L;for(T[0]=1779033703,T[1]=3144134277,T[2]=1013904242,T[3]=2773480762,T[4]=1359893119,T[5]=2600822924,T[6]=528734635,T[7]=1541459225,V[0]=4089235720,V[1]=2227873595,V[2]=4271175723,V[3]=1595750129,V[4]=2917565137,V[5]=725511199,V[6]=4215389547,V[7]=327033209,Ut(T,V,j,L),L%=128,F=0;F<L;F++)J[F]=j[ht-L+F];for(J[L]=128,J[(L=256-128*(L<112?1:0))-9]=0,C(J,L-8,ht/536870912|0,ht<<3),Ut(T,V,J,L),F=0;F<8;F++)C(R,8*F,T[F],V[F]);return 0}function B(R,j){var L=v(),F=v(),T=v(),V=v(),J=v(),ht=v(),W=v(),ct=v(),kt=v();at(L,R[1],R[0]),at(kt,j[1],j[0]),st(L,L,kt),$(F,R[0],R[1]),$(kt,j[0],j[1]),st(F,F,kt),st(T,R[3],j[3]),st(T,T,f),st(V,R[2],j[2]),$(V,V,V),at(J,F,L),at(ht,V,T),$(W,V,T),$(ct,F,L),st(R[0],J,ht),st(R[1],ct,W),st(R[2],W,ht),st(R[3],J,ct)}function D(R,j,L){var F;for(F=0;F<4;F++)I(R[F],j[F],L)}function N(R,j){var L=v(),F=v(),T=v();Bt(T,j[2]),st(L,j[0],T),st(F,j[1],T),x(R,F),R[31]^=k(L)<<7}function rt(R,j,L){var F,T;for(a(R[0],u),a(R[1],h),a(R[2],h),a(R[3],u),T=255;T>=0;--T)D(R,j,F=L[T/8|0]>>(7&T)&1),B(j,R),B(R,R),D(R,j,F)}function X(R,j){var L=[v(),v(),v(),v()];a(L[0],m),a(L[1],w),a(L[2],h),st(L[3],m,w),rt(R,L,j)}function nt(R,j,L){var F,T=new Uint8Array(64),V=[v(),v(),v(),v()];for(L||d(j,32),$t(T,j,32),T[0]&=248,T[31]&=127,T[31]|=64,X(V,T),N(R,V),F=0;F<32;F++)j[F+32]=R[F];return 0}var lt=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function Et(R,j){var L,F,T,V;for(F=63;F>=32;--F){for(L=0,T=F-32,V=F-12;T<V;++T)j[T]+=L-16*j[F]*lt[T-(F-32)],L=Math.floor((j[T]+128)/256),j[T]-=256*L;j[T]+=L,j[F]=0}for(L=0,T=0;T<32;T++)j[T]+=L-(j[31]>>4)*lt[T],L=j[T]>>8,j[T]&=255;for(T=0;T<32;T++)j[T]-=L*lt[T];for(F=0;F<32;F++)j[F+1]+=j[F]>>8,R[F]=255&j[F]}function Ot(R){var j,L=new Float64Array(64);for(j=0;j<64;j++)L[j]=R[j];for(j=0;j<64;j++)R[j]=0;Et(R,L)}function ie(R,j,L,F){var T,V,J=new Uint8Array(64),ht=new Uint8Array(64),W=new Uint8Array(64),ct=new Float64Array(64),kt=[v(),v(),v(),v()];$t(J,F,32),J[0]&=248,J[31]&=127,J[31]|=64;var ut=L+64;for(T=0;T<L;T++)R[64+T]=j[T];for(T=0;T<32;T++)R[32+T]=J[32+T];for($t(W,R.subarray(32),L+32),Ot(W),X(kt,W),N(R,kt),T=32;T<64;T++)R[T]=F[T];for($t(ht,R,L+64),Ot(ht),T=0;T<64;T++)ct[T]=0;for(T=0;T<32;T++)ct[T]=W[T];for(T=0;T<32;T++)for(V=0;V<32;V++)ct[T+V]+=ht[T]*J[V];return Et(R.subarray(32),ct),ut}function Dt(R,j,L,F){var T,V=new Uint8Array(32),J=new Uint8Array(64),ht=[v(),v(),v(),v()],W=[v(),v(),v(),v()];if(L<64||function(ct,kt){var ut=v(),_t=v(),Pt=v(),dt=v(),St=v(),qt=v(),vt=v();return a(ct[2],h),Z(ct[1],kt),yt(Pt,ct[1]),st(dt,Pt,p),at(Pt,Pt,ct[2]),$(dt,ct[2],dt),yt(St,dt),yt(qt,St),st(vt,qt,St),st(ut,vt,Pt),st(ut,ut,dt),Lt(ut,ut),st(ut,ut,Pt),st(ut,ut,dt),st(ut,ut,dt),st(ct[0],ut,dt),yt(_t,ct[0]),st(_t,_t,dt),P(_t,Pt)&&st(ct[0],ct[0],A),yt(_t,ct[0]),st(_t,_t,dt),P(_t,Pt)?-1:(k(ct[0])===kt[31]>>7&&at(ct[0],u,ct[0]),st(ct[3],ct[0],ct[1]),0)}(W,F))return-1;for(T=0;T<L;T++)R[T]=j[T];for(T=0;T<32;T++)R[T+32]=F[T];if($t(J,R,L),Ot(J),rt(ht,W,J),X(W,j.subarray(32)),B(ht,W),N(V,ht),L-=64,q(j,0,V,0)){for(T=0;T<L;T++)R[T]=0;return-1}for(T=0;T<L;T++)R[T]=j[T+64];return L}var Gt=64,ye=32,Vt=64;function ae(R,j){if(R.length!==32)throw new Error("bad key size");if(j.length!==24)throw new Error("bad nonce size")}function fe(){for(var R=0;R<arguments.length;R++)if(!(arguments[R]instanceof Uint8Array))throw new TypeError("unexpected type, use Uint8Array")}function Xt(R){for(var j=0;j<R.length;j++)R[j]=0}y.lowlevel={crypto_core_hsalsa20:U,crypto_stream_xor:n,crypto_stream:it,crypto_stream_salsa20_xor:Q,crypto_stream_salsa20:et,crypto_onetimeauth:r,crypto_onetimeauth_verify:e,crypto_verify_16:S,crypto_verify_32:q,crypto_secretbox:t,crypto_secretbox_open:o,crypto_scalarmult:wt,crypto_scalarmult_base:gt,crypto_box_beforenm:Yt,crypto_box_afternm:bt,crypto_box:function(R,j,L,F,T,V){var J=new Uint8Array(32);return Yt(J,T,V),bt(R,j,L,F,J)},crypto_box_open:function(R,j,L,F,T,V){var J=new Uint8Array(32);return Yt(J,T,V),Ht(R,j,L,F,J)},crypto_box_keypair:Nt,crypto_hash:$t,crypto_sign:ie,crypto_sign_keypair:nt,crypto_sign_open:Dt,crypto_secretbox_KEYBYTES:32,crypto_secretbox_NONCEBYTES:24,crypto_secretbox_ZEROBYTES:32,crypto_secretbox_BOXZEROBYTES:16,crypto_scalarmult_BYTES:32,crypto_scalarmult_SCALARBYTES:32,crypto_box_PUBLICKEYBYTES:32,crypto_box_SECRETKEYBYTES:32,crypto_box_BEFORENMBYTES:32,crypto_box_NONCEBYTES:24,crypto_box_ZEROBYTES:32,crypto_box_BOXZEROBYTES:16,crypto_sign_BYTES:Gt,crypto_sign_PUBLICKEYBYTES:ye,crypto_sign_SECRETKEYBYTES:Vt,crypto_sign_SEEDBYTES:32,crypto_hash_BYTES:64,gf:v,D:p,L:lt,pack25519:x,unpack25519:Z,M:st,A:$,S:yt,Z:at,pow2523:Lt,add:B,set25519:a,modL:Et,scalarmult:rt,scalarbase:X},y.randomBytes=function(R){var j=new Uint8Array(R);return d(j,R),j},y.secretbox=function(R,j,L){fe(R,j,L),ae(L,j);for(var F=new Uint8Array(32+R.length),T=new Uint8Array(F.length),V=0;V<R.length;V++)F[V+32]=R[V];return t(T,F,F.length,j,L),T.subarray(16)},y.secretbox.open=function(R,j,L){fe(R,j,L),ae(L,j);for(var F=new Uint8Array(16+R.length),T=new Uint8Array(F.length),V=0;V<R.length;V++)F[V+16]=R[V];return F.length<32||o(T,F,F.length,j,L)!==0?null:T.subarray(32)},y.secretbox.keyLength=32,y.secretbox.nonceLength=24,y.secretbox.overheadLength=16,y.scalarMult=function(R,j){if(fe(R,j),R.length!==32)throw new Error("bad n size");if(j.length!==32)throw new Error("bad p size");var L=new Uint8Array(32);return wt(L,R,j),L},y.scalarMult.base=function(R){if(fe(R),R.length!==32)throw new Error("bad n size");var j=new Uint8Array(32);return gt(j,R),j},y.scalarMult.scalarLength=32,y.scalarMult.groupElementLength=32,y.box=function(R,j,L,F){var T=y.box.before(L,F);return y.secretbox(R,j,T)},y.box.before=function(R,j){fe(R,j),function(F,T){if(F.length!==32)throw new Error("bad public key size");if(T.length!==32)throw new Error("bad secret key size")}(R,j);var L=new Uint8Array(32);return Yt(L,R,j),L},y.box.after=y.secretbox,y.box.open=function(R,j,L,F){var T=y.box.before(L,F);return y.secretbox.open(R,j,T)},y.box.open.after=y.secretbox.open,y.box.keyPair=function(){var R=new Uint8Array(32),j=new Uint8Array(32);return Nt(R,j),{publicKey:R,secretKey:j}},y.box.keyPair.fromSecretKey=function(R){if(fe(R),R.length!==32)throw new Error("bad secret key size");var j=new Uint8Array(32);return gt(j,R),{publicKey:j,secretKey:new Uint8Array(R)}},y.box.publicKeyLength=32,y.box.secretKeyLength=32,y.box.sharedKeyLength=32,y.box.nonceLength=24,y.box.overheadLength=y.secretbox.overheadLength,y.sign=function(R,j){if(fe(R,j),j.length!==Vt)throw new Error("bad secret key size");var L=new Uint8Array(Gt+R.length);return ie(L,R,R.length,j),L},y.sign.open=function(R,j){if(fe(R,j),j.length!==ye)throw new Error("bad public key size");var L=new Uint8Array(R.length),F=Dt(L,R,R.length,j);if(F<0)return null;for(var T=new Uint8Array(F),V=0;V<T.length;V++)T[V]=L[V];return T},y.sign.detached=function(R,j){for(var L=y.sign(R,j),F=new Uint8Array(Gt),T=0;T<F.length;T++)F[T]=L[T];return F},y.sign.detached.verify=function(R,j,L){if(fe(R,j,L),j.length!==Gt)throw new Error("bad signature size");if(L.length!==ye)throw new Error("bad public key size");var F,T=new Uint8Array(Gt+R.length),V=new Uint8Array(Gt+R.length);for(F=0;F<Gt;F++)T[F]=j[F];for(F=0;F<R.length;F++)T[F+Gt]=R[F];return Dt(V,T,T.length,L)>=0},y.sign.keyPair=function(){var R=new Uint8Array(ye),j=new Uint8Array(Vt);return nt(R,j),{publicKey:R,secretKey:j}},y.sign.keyPair.fromSecretKey=function(R){if(fe(R),R.length!==Vt)throw new Error("bad secret key size");for(var j=new Uint8Array(ye),L=0;L<j.length;L++)j[L]=R[32+L];return{publicKey:j,secretKey:new Uint8Array(R)}},y.sign.keyPair.fromSeed=function(R){if(fe(R),R.length!==32)throw new Error("bad seed size");for(var j=new Uint8Array(ye),L=new Uint8Array(Vt),F=0;F<32;F++)L[F]=R[F];return nt(j,L,!0),{publicKey:j,secretKey:L}},y.sign.publicKeyLength=ye,y.sign.secretKeyLength=Vt,y.sign.seedLength=32,y.sign.signatureLength=Gt,y.hash=function(R){fe(R);var j=new Uint8Array(64);return $t(j,R,R.length),j},y.hash.hashLength=64,y.verify=function(R,j){return fe(R,j),R.length!==0&&j.length!==0&&R.length===j.length&&M(R,0,j,0,R.length)===0},y.setPRNG=function(R){d=R},function(){var R=typeof self<"u"?self.crypto||self.msCrypto:null;R&&R.getRandomValues?y.setPRNG(function(j,L){var F,T=new Uint8Array(L);for(F=0;F<L;F+=65536)R.getRandomValues(T.subarray(F,F+Math.min(L-F,65536)));for(F=0;F<L;F++)j[F]=T[F];Xt(T)}):(R=s(6))&&R.randomBytes&&y.setPRNG(function(j,L){var F,T=R.randomBytes(L);for(F=0;F<L;F++)j[F]=T[F];Xt(T)})}()})(_.exports?_.exports:self.nacl=self.nacl||{})},()=>{},(_,E,s)=>{var y=s(8),v=s(12),d=new y(0),g=new y(-1),i={noether:"0",wei:"1",kwei:"1000",Kwei:"1000",babbage:"1000",femtoether:"1000",mwei:"1000000",Mwei:"1000000",lovelace:"1000000",picoether:"1000000",gwei:"1000000000",Gwei:"1000000000",shannon:"1000000000",nanoether:"1000000000",nano:"1000000000",szabo:"1000000000000",microether:"1000000000000",micro:"1000000000000",finney:"1000000000000000",milliether:"1000000000000000",milli:"1000000000000000",ether:"1000000000000000000",kether:"1000000000000000000000",grand:"1000000000000000000000",mether:"1000000000000000000000000",gether:"1000000000000000000000000000",tether:"1000000000000000000000000000000"};function u(c){var p=c?c.toLowerCase():"ether",f=i[p];if(typeof f!="string")throw new Error("[ethjs-unit] the unit provided "+c+" doesn't exists, please use the one of the following units "+JSON.stringify(i,null,2));return new y(f,10)}function h(c){if(typeof c=="string"){if(!c.match(/^-?[0-9.]+$/))throw new Error("while converting number to string, invalid number value '"+c+"', should be a number matching (^-?[0-9.]+).");return c}if(typeof c=="number")return String(c);if(typeof c=="object"&&c.toString&&(c.toTwos||c.dividedToIntegerBy))return c.toPrecision?String(c.toPrecision()):c.toString(10);throw new Error("while converting number to string, invalid number value '"+c+"' type "+typeof c+".")}_.exports={unitMap:i,numberToString:h,getValueOfUnit:u,fromWei:function(c,p,f){var m=v(c),w=m.lt(d),A=u(p),C=i[p].length-1||1,M=f||{};w&&(m=m.mul(g));for(var S=m.mod(A).toString(10);S.length<C;)S="0"+S;M.pad||(S=S.match(/^([0-9]*[1-9]|0)(0*)/)[1]);var q=m.div(A).toString(10);M.commify&&(q=q.replace(/\B(?=(\d{3})+(?!\d))/g,","));var G=q+(S=="0"?"":"."+S);return w&&(G="-"+G),G},toWei:function(c,p){var f=h(c),m=u(p),w=i[p].length-1||1,A=f.substring(0,1)==="-";if(A&&(f=f.substring(1)),f===".")throw new Error("[ethjs-unit] while converting number "+c+" to wei, invalid value");var C=f.split(".");if(C.length>2)throw new Error("[ethjs-unit] while converting number "+c+" to wei,  too many decimal points");var M=C[0],S=C[1];if(M||(M="0"),S||(S="0"),S.length>w)throw new Error("[ethjs-unit] while converting number "+c+" to wei, too many decimal places");for(;S.length<w;)S+="0";M=new y(M),S=new y(S);var q=M.mul(m).add(S);return A&&(q=q.mul(g)),new y(q.toString(10),10)}}},function(_,E,s){(function(y,v){function d(n,l){if(!n)throw new Error(l||"Assertion failed")}function g(n,l){n.super_=l;var r=function(){};r.prototype=l.prototype,n.prototype=new r,n.prototype.constructor=n}function i(n,l,r){if(i.isBN(n))return n;this.negative=0,this.words=null,this.length=0,this.red=null,n!==null&&(l!=="le"&&l!=="be"||(r=l,l=10),this._init(n||0,l||10,r||"be"))}var u;typeof y=="object"?y.exports=i:v.BN=i,i.BN=i,i.wordSize=26;try{u=s(9).Buffer}catch{}function h(n,l,r){for(var e=0,t=Math.min(n.length,r),o=l;o<t;o++){var a=n.charCodeAt(o)-48;e<<=4,e|=a>=49&&a<=54?a-49+10:a>=17&&a<=22?a-17+10:15&a}return e}function c(n,l,r,e){for(var t=0,o=Math.min(n.length,r),a=l;a<o;a++){var b=n.charCodeAt(a)-48;t*=e,t+=b>=49?b-49+10:b>=17?b-17+10:b}return t}i.isBN=function(n){return n instanceof i||n!==null&&typeof n=="object"&&n.constructor.wordSize===i.wordSize&&Array.isArray(n.words)},i.max=function(n,l){return n.cmp(l)>0?n:l},i.min=function(n,l){return n.cmp(l)<0?n:l},i.prototype._init=function(n,l,r){if(typeof n=="number")return this._initNumber(n,l,r);if(typeof n=="object")return this._initArray(n,l,r);l==="hex"&&(l=16),d(l===(0|l)&&l>=2&&l<=36);var e=0;(n=n.toString().replace(/\s+/g,""))[0]==="-"&&e++,l===16?this._parseHex(n,e):this._parseBase(n,l,e),n[0]==="-"&&(this.negative=1),this.strip(),r==="le"&&this._initArray(this.toArray(),l,r)},i.prototype._initNumber=function(n,l,r){n<0&&(this.negative=1,n=-n),n<67108864?(this.words=[67108863&n],this.length=1):n<4503599627370496?(this.words=[67108863&n,n/67108864&67108863],this.length=2):(d(n<9007199254740992),this.words=[67108863&n,n/67108864&67108863,1],this.length=3),r==="le"&&this._initArray(this.toArray(),l,r)},i.prototype._initArray=function(n,l,r){if(d(typeof n.length=="number"),n.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(n.length/3),this.words=new Array(this.length);for(var e=0;e<this.length;e++)this.words[e]=0;var t,o,a=0;if(r==="be")for(e=n.length-1,t=0;e>=0;e-=3)o=n[e]|n[e-1]<<8|n[e-2]<<16,this.words[t]|=o<<a&67108863,this.words[t+1]=o>>>26-a&67108863,(a+=24)>=26&&(a-=26,t++);else if(r==="le")for(e=0,t=0;e<n.length;e+=3)o=n[e]|n[e+1]<<8|n[e+2]<<16,this.words[t]|=o<<a&67108863,this.words[t+1]=o>>>26-a&67108863,(a+=24)>=26&&(a-=26,t++);return this.strip()},i.prototype._parseHex=function(n,l){this.length=Math.ceil((n.length-l)/6),this.words=new Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;var e,t,o=0;for(r=n.length-6,e=0;r>=l;r-=6)t=h(n,r,r+6),this.words[e]|=t<<o&67108863,this.words[e+1]|=t>>>26-o&4194303,(o+=24)>=26&&(o-=26,e++);r+6!==l&&(t=h(n,l,r+6),this.words[e]|=t<<o&67108863,this.words[e+1]|=t>>>26-o&4194303),this.strip()},i.prototype._parseBase=function(n,l,r){this.words=[0],this.length=1;for(var e=0,t=1;t<=67108863;t*=l)e++;e--,t=t/l|0;for(var o=n.length-r,a=o%e,b=Math.min(o,o-a)+r,I=0,x=r;x<b;x+=e)I=c(n,x,x+e,l),this.imuln(t),this.words[0]+I<67108864?this.words[0]+=I:this._iaddn(I);if(a!==0){var P=1;for(I=c(n,x,n.length,l),x=0;x<a;x++)P*=l;this.imuln(P),this.words[0]+I<67108864?this.words[0]+=I:this._iaddn(I)}},i.prototype.copy=function(n){n.words=new Array(this.length);for(var l=0;l<this.length;l++)n.words[l]=this.words[l];n.length=this.length,n.negative=this.negative,n.red=this.red},i.prototype.clone=function(){var n=new i(null);return this.copy(n),n},i.prototype._expand=function(n){for(;this.length<n;)this.words[this.length++]=0;return this},i.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},i.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},i.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var p=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],f=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],m=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function w(n,l,r){r.negative=l.negative^n.negative;var e=n.length+l.length|0;r.length=e,e=e-1|0;var t=0|n.words[0],o=0|l.words[0],a=t*o,b=67108863&a,I=a/67108864|0;r.words[0]=b;for(var x=1;x<e;x++){for(var P=I>>>26,k=67108863&I,Z=Math.min(x,l.length-1),$=Math.max(0,x-n.length+1);$<=Z;$++){var at=x-$|0;P+=(a=(t=0|n.words[at])*(o=0|l.words[$])+k)/67108864|0,k=67108863&a}r.words[x]=0|k,I=0|P}return I!==0?r.words[x]=0|I:r.length--,r.strip()}i.prototype.toString=function(n,l){var r;if(l=0|l||1,(n=n||10)===16||n==="hex"){r="";for(var e=0,t=0,o=0;o<this.length;o++){var a=this.words[o],b=(16777215&(a<<e|t)).toString(16);r=(t=a>>>24-e&16777215)!=0||o!==this.length-1?p[6-b.length]+b+r:b+r,(e+=2)>=26&&(e-=26,o--)}for(t!==0&&(r=t.toString(16)+r);r.length%l!=0;)r="0"+r;return this.negative!==0&&(r="-"+r),r}if(n===(0|n)&&n>=2&&n<=36){var I=f[n],x=m[n];r="";var P=this.clone();for(P.negative=0;!P.isZero();){var k=P.modn(x).toString(n);r=(P=P.idivn(x)).isZero()?k+r:p[I-k.length]+k+r}for(this.isZero()&&(r="0"+r);r.length%l!=0;)r="0"+r;return this.negative!==0&&(r="-"+r),r}d(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var n=this.words[0];return this.length===2?n+=67108864*this.words[1]:this.length===3&&this.words[2]===1?n+=4503599627370496+67108864*this.words[1]:this.length>2&&d(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-n:n},i.prototype.toJSON=function(){return this.toString(16)},i.prototype.toBuffer=function(n,l){return d(u!==void 0),this.toArrayLike(u,n,l)},i.prototype.toArray=function(n,l){return this.toArrayLike(Array,n,l)},i.prototype.toArrayLike=function(n,l,r){var e=this.byteLength(),t=r||Math.max(1,e);d(e<=t,"byte array longer than desired length"),d(t>0,"Requested array length <= 0"),this.strip();var o,a,b=l==="le",I=new n(t),x=this.clone();if(b){for(a=0;!x.isZero();a++)o=x.andln(255),x.iushrn(8),I[a]=o;for(;a<t;a++)I[a]=0}else{for(a=0;a<t-e;a++)I[a]=0;for(a=0;!x.isZero();a++)o=x.andln(255),x.iushrn(8),I[t-a-1]=o}return I},Math.clz32?i.prototype._countBits=function(n){return 32-Math.clz32(n)}:i.prototype._countBits=function(n){var l=n,r=0;return l>=4096&&(r+=13,l>>>=13),l>=64&&(r+=7,l>>>=7),l>=8&&(r+=4,l>>>=4),l>=2&&(r+=2,l>>>=2),r+l},i.prototype._zeroBits=function(n){if(n===0)return 26;var l=n,r=0;return(8191&l)==0&&(r+=13,l>>>=13),(127&l)==0&&(r+=7,l>>>=7),(15&l)==0&&(r+=4,l>>>=4),(3&l)==0&&(r+=2,l>>>=2),(1&l)==0&&r++,r},i.prototype.bitLength=function(){var n=this.words[this.length-1],l=this._countBits(n);return 26*(this.length-1)+l},i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var n=0,l=0;l<this.length;l++){var r=this._zeroBits(this.words[l]);if(n+=r,r!==26)break}return n},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(n){return this.negative!==0?this.abs().inotn(n).iaddn(1):this.clone()},i.prototype.fromTwos=function(n){return this.testn(n-1)?this.notn(n).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return this.negative!==0},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(n){for(;this.length<n.length;)this.words[this.length++]=0;for(var l=0;l<n.length;l++)this.words[l]=this.words[l]|n.words[l];return this.strip()},i.prototype.ior=function(n){return d((this.negative|n.negative)==0),this.iuor(n)},i.prototype.or=function(n){return this.length>n.length?this.clone().ior(n):n.clone().ior(this)},i.prototype.uor=function(n){return this.length>n.length?this.clone().iuor(n):n.clone().iuor(this)},i.prototype.iuand=function(n){var l;l=this.length>n.length?n:this;for(var r=0;r<l.length;r++)this.words[r]=this.words[r]&n.words[r];return this.length=l.length,this.strip()},i.prototype.iand=function(n){return d((this.negative|n.negative)==0),this.iuand(n)},i.prototype.and=function(n){return this.length>n.length?this.clone().iand(n):n.clone().iand(this)},i.prototype.uand=function(n){return this.length>n.length?this.clone().iuand(n):n.clone().iuand(this)},i.prototype.iuxor=function(n){var l,r;this.length>n.length?(l=this,r=n):(l=n,r=this);for(var e=0;e<r.length;e++)this.words[e]=l.words[e]^r.words[e];if(this!==l)for(;e<l.length;e++)this.words[e]=l.words[e];return this.length=l.length,this.strip()},i.prototype.ixor=function(n){return d((this.negative|n.negative)==0),this.iuxor(n)},i.prototype.xor=function(n){return this.length>n.length?this.clone().ixor(n):n.clone().ixor(this)},i.prototype.uxor=function(n){return this.length>n.length?this.clone().iuxor(n):n.clone().iuxor(this)},i.prototype.inotn=function(n){d(typeof n=="number"&&n>=0);var l=0|Math.ceil(n/26),r=n%26;this._expand(l),r>0&&l--;for(var e=0;e<l;e++)this.words[e]=67108863&~this.words[e];return r>0&&(this.words[e]=~this.words[e]&67108863>>26-r),this.strip()},i.prototype.notn=function(n){return this.clone().inotn(n)},i.prototype.setn=function(n,l){d(typeof n=="number"&&n>=0);var r=n/26|0,e=n%26;return this._expand(r+1),this.words[r]=l?this.words[r]|1<<e:this.words[r]&~(1<<e),this.strip()},i.prototype.iadd=function(n){var l,r,e;if(this.negative!==0&&n.negative===0)return this.negative=0,l=this.isub(n),this.negative^=1,this._normSign();if(this.negative===0&&n.negative!==0)return n.negative=0,l=this.isub(n),n.negative=1,l._normSign();this.length>n.length?(r=this,e=n):(r=n,e=this);for(var t=0,o=0;o<e.length;o++)l=(0|r.words[o])+(0|e.words[o])+t,this.words[o]=67108863&l,t=l>>>26;for(;t!==0&&o<r.length;o++)l=(0|r.words[o])+t,this.words[o]=67108863&l,t=l>>>26;if(this.length=r.length,t!==0)this.words[this.length]=t,this.length++;else if(r!==this)for(;o<r.length;o++)this.words[o]=r.words[o];return this},i.prototype.add=function(n){var l;return n.negative!==0&&this.negative===0?(n.negative=0,l=this.sub(n),n.negative^=1,l):n.negative===0&&this.negative!==0?(this.negative=0,l=n.sub(this),this.negative=1,l):this.length>n.length?this.clone().iadd(n):n.clone().iadd(this)},i.prototype.isub=function(n){if(n.negative!==0){n.negative=0;var l=this.iadd(n);return n.negative=1,l._normSign()}if(this.negative!==0)return this.negative=0,this.iadd(n),this.negative=1,this._normSign();var r,e,t=this.cmp(n);if(t===0)return this.negative=0,this.length=1,this.words[0]=0,this;t>0?(r=this,e=n):(r=n,e=this);for(var o=0,a=0;a<e.length;a++)o=(l=(0|r.words[a])-(0|e.words[a])+o)>>26,this.words[a]=67108863&l;for(;o!==0&&a<r.length;a++)o=(l=(0|r.words[a])+o)>>26,this.words[a]=67108863&l;if(o===0&&a<r.length&&r!==this)for(;a<r.length;a++)this.words[a]=r.words[a];return this.length=Math.max(this.length,a),r!==this&&(this.negative=1),this.strip()},i.prototype.sub=function(n){return this.clone().isub(n)};var A=function(n,l,r){var e,t,o,a=n.words,b=l.words,I=r.words,x=0,P=0|a[0],k=8191&P,Z=P>>>13,$=0|a[1],at=8191&$,st=$>>>13,yt=0|a[2],Bt=8191&yt,Lt=yt>>>13,wt=0|a[3],gt=8191&wt,Nt=wt>>>13,Yt=0|a[4],bt=8191&Yt,Ht=Yt>>>13,ce=0|a[5],Ut=8191&ce,$t=ce>>>13,B=0|a[6],D=8191&B,N=B>>>13,rt=0|a[7],X=8191&rt,nt=rt>>>13,lt=0|a[8],Et=8191&lt,Ot=lt>>>13,ie=0|a[9],Dt=8191&ie,Gt=ie>>>13,ye=0|b[0],Vt=8191&ye,ae=ye>>>13,fe=0|b[1],Xt=8191&fe,R=fe>>>13,j=0|b[2],L=8191&j,F=j>>>13,T=0|b[3],V=8191&T,J=T>>>13,ht=0|b[4],W=8191&ht,ct=ht>>>13,kt=0|b[5],ut=8191&kt,_t=kt>>>13,Pt=0|b[6],dt=8191&Pt,St=Pt>>>13,qt=0|b[7],vt=8191&qt,Tt=qt>>>13,jt=0|b[8],pt=8191&jt,It=jt>>>13,Zt=0|b[9],mt=8191&Zt,ot=Zt>>>13;r.negative=n.negative^l.negative,r.length=19;var ft=(x+(e=Math.imul(k,Vt))|0)+((8191&(t=(t=Math.imul(k,ae))+Math.imul(Z,Vt)|0))<<13)|0;x=((o=Math.imul(Z,ae))+(t>>>13)|0)+(ft>>>26)|0,ft&=67108863,e=Math.imul(at,Vt),t=(t=Math.imul(at,ae))+Math.imul(st,Vt)|0,o=Math.imul(st,ae);var At=(x+(e=e+Math.imul(k,Xt)|0)|0)+((8191&(t=(t=t+Math.imul(k,R)|0)+Math.imul(Z,Xt)|0))<<13)|0;x=((o=o+Math.imul(Z,R)|0)+(t>>>13)|0)+(At>>>26)|0,At&=67108863,e=Math.imul(Bt,Vt),t=(t=Math.imul(Bt,ae))+Math.imul(Lt,Vt)|0,o=Math.imul(Lt,ae),e=e+Math.imul(at,Xt)|0,t=(t=t+Math.imul(at,R)|0)+Math.imul(st,Xt)|0,o=o+Math.imul(st,R)|0;var Ft=(x+(e=e+Math.imul(k,L)|0)|0)+((8191&(t=(t=t+Math.imul(k,F)|0)+Math.imul(Z,L)|0))<<13)|0;x=((o=o+Math.imul(Z,F)|0)+(t>>>13)|0)+(Ft>>>26)|0,Ft&=67108863,e=Math.imul(gt,Vt),t=(t=Math.imul(gt,ae))+Math.imul(Nt,Vt)|0,o=Math.imul(Nt,ae),e=e+Math.imul(Bt,Xt)|0,t=(t=t+Math.imul(Bt,R)|0)+Math.imul(Lt,Xt)|0,o=o+Math.imul(Lt,R)|0,e=e+Math.imul(at,L)|0,t=(t=t+Math.imul(at,F)|0)+Math.imul(st,L)|0,o=o+Math.imul(st,F)|0;var Mt=(x+(e=e+Math.imul(k,V)|0)|0)+((8191&(t=(t=t+Math.imul(k,J)|0)+Math.imul(Z,V)|0))<<13)|0;x=((o=o+Math.imul(Z,J)|0)+(t>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,e=Math.imul(bt,Vt),t=(t=Math.imul(bt,ae))+Math.imul(Ht,Vt)|0,o=Math.imul(Ht,ae),e=e+Math.imul(gt,Xt)|0,t=(t=t+Math.imul(gt,R)|0)+Math.imul(Nt,Xt)|0,o=o+Math.imul(Nt,R)|0,e=e+Math.imul(Bt,L)|0,t=(t=t+Math.imul(Bt,F)|0)+Math.imul(Lt,L)|0,o=o+Math.imul(Lt,F)|0,e=e+Math.imul(at,V)|0,t=(t=t+Math.imul(at,J)|0)+Math.imul(st,V)|0,o=o+Math.imul(st,J)|0;var xt=(x+(e=e+Math.imul(k,W)|0)|0)+((8191&(t=(t=t+Math.imul(k,ct)|0)+Math.imul(Z,W)|0))<<13)|0;x=((o=o+Math.imul(Z,ct)|0)+(t>>>13)|0)+(xt>>>26)|0,xt&=67108863,e=Math.imul(Ut,Vt),t=(t=Math.imul(Ut,ae))+Math.imul($t,Vt)|0,o=Math.imul($t,ae),e=e+Math.imul(bt,Xt)|0,t=(t=t+Math.imul(bt,R)|0)+Math.imul(Ht,Xt)|0,o=o+Math.imul(Ht,R)|0,e=e+Math.imul(gt,L)|0,t=(t=t+Math.imul(gt,F)|0)+Math.imul(Nt,L)|0,o=o+Math.imul(Nt,F)|0,e=e+Math.imul(Bt,V)|0,t=(t=t+Math.imul(Bt,J)|0)+Math.imul(Lt,V)|0,o=o+Math.imul(Lt,J)|0,e=e+Math.imul(at,W)|0,t=(t=t+Math.imul(at,ct)|0)+Math.imul(st,W)|0,o=o+Math.imul(st,ct)|0;var ne=(x+(e=e+Math.imul(k,ut)|0)|0)+((8191&(t=(t=t+Math.imul(k,_t)|0)+Math.imul(Z,ut)|0))<<13)|0;x=((o=o+Math.imul(Z,_t)|0)+(t>>>13)|0)+(ne>>>26)|0,ne&=67108863,e=Math.imul(D,Vt),t=(t=Math.imul(D,ae))+Math.imul(N,Vt)|0,o=Math.imul(N,ae),e=e+Math.imul(Ut,Xt)|0,t=(t=t+Math.imul(Ut,R)|0)+Math.imul($t,Xt)|0,o=o+Math.imul($t,R)|0,e=e+Math.imul(bt,L)|0,t=(t=t+Math.imul(bt,F)|0)+Math.imul(Ht,L)|0,o=o+Math.imul(Ht,F)|0,e=e+Math.imul(gt,V)|0,t=(t=t+Math.imul(gt,J)|0)+Math.imul(Nt,V)|0,o=o+Math.imul(Nt,J)|0,e=e+Math.imul(Bt,W)|0,t=(t=t+Math.imul(Bt,ct)|0)+Math.imul(Lt,W)|0,o=o+Math.imul(Lt,ct)|0,e=e+Math.imul(at,ut)|0,t=(t=t+Math.imul(at,_t)|0)+Math.imul(st,ut)|0,o=o+Math.imul(st,_t)|0;var se=(x+(e=e+Math.imul(k,dt)|0)|0)+((8191&(t=(t=t+Math.imul(k,St)|0)+Math.imul(Z,dt)|0))<<13)|0;x=((o=o+Math.imul(Z,St)|0)+(t>>>13)|0)+(se>>>26)|0,se&=67108863,e=Math.imul(X,Vt),t=(t=Math.imul(X,ae))+Math.imul(nt,Vt)|0,o=Math.imul(nt,ae),e=e+Math.imul(D,Xt)|0,t=(t=t+Math.imul(D,R)|0)+Math.imul(N,Xt)|0,o=o+Math.imul(N,R)|0,e=e+Math.imul(Ut,L)|0,t=(t=t+Math.imul(Ut,F)|0)+Math.imul($t,L)|0,o=o+Math.imul($t,F)|0,e=e+Math.imul(bt,V)|0,t=(t=t+Math.imul(bt,J)|0)+Math.imul(Ht,V)|0,o=o+Math.imul(Ht,J)|0,e=e+Math.imul(gt,W)|0,t=(t=t+Math.imul(gt,ct)|0)+Math.imul(Nt,W)|0,o=o+Math.imul(Nt,ct)|0,e=e+Math.imul(Bt,ut)|0,t=(t=t+Math.imul(Bt,_t)|0)+Math.imul(Lt,ut)|0,o=o+Math.imul(Lt,_t)|0,e=e+Math.imul(at,dt)|0,t=(t=t+Math.imul(at,St)|0)+Math.imul(st,dt)|0,o=o+Math.imul(st,St)|0;var ee=(x+(e=e+Math.imul(k,vt)|0)|0)+((8191&(t=(t=t+Math.imul(k,Tt)|0)+Math.imul(Z,vt)|0))<<13)|0;x=((o=o+Math.imul(Z,Tt)|0)+(t>>>13)|0)+(ee>>>26)|0,ee&=67108863,e=Math.imul(Et,Vt),t=(t=Math.imul(Et,ae))+Math.imul(Ot,Vt)|0,o=Math.imul(Ot,ae),e=e+Math.imul(X,Xt)|0,t=(t=t+Math.imul(X,R)|0)+Math.imul(nt,Xt)|0,o=o+Math.imul(nt,R)|0,e=e+Math.imul(D,L)|0,t=(t=t+Math.imul(D,F)|0)+Math.imul(N,L)|0,o=o+Math.imul(N,F)|0,e=e+Math.imul(Ut,V)|0,t=(t=t+Math.imul(Ut,J)|0)+Math.imul($t,V)|0,o=o+Math.imul($t,J)|0,e=e+Math.imul(bt,W)|0,t=(t=t+Math.imul(bt,ct)|0)+Math.imul(Ht,W)|0,o=o+Math.imul(Ht,ct)|0,e=e+Math.imul(gt,ut)|0,t=(t=t+Math.imul(gt,_t)|0)+Math.imul(Nt,ut)|0,o=o+Math.imul(Nt,_t)|0,e=e+Math.imul(Bt,dt)|0,t=(t=t+Math.imul(Bt,St)|0)+Math.imul(Lt,dt)|0,o=o+Math.imul(Lt,St)|0,e=e+Math.imul(at,vt)|0,t=(t=t+Math.imul(at,Tt)|0)+Math.imul(st,vt)|0,o=o+Math.imul(st,Tt)|0;var he=(x+(e=e+Math.imul(k,pt)|0)|0)+((8191&(t=(t=t+Math.imul(k,It)|0)+Math.imul(Z,pt)|0))<<13)|0;x=((o=o+Math.imul(Z,It)|0)+(t>>>13)|0)+(he>>>26)|0,he&=67108863,e=Math.imul(Dt,Vt),t=(t=Math.imul(Dt,ae))+Math.imul(Gt,Vt)|0,o=Math.imul(Gt,ae),e=e+Math.imul(Et,Xt)|0,t=(t=t+Math.imul(Et,R)|0)+Math.imul(Ot,Xt)|0,o=o+Math.imul(Ot,R)|0,e=e+Math.imul(X,L)|0,t=(t=t+Math.imul(X,F)|0)+Math.imul(nt,L)|0,o=o+Math.imul(nt,F)|0,e=e+Math.imul(D,V)|0,t=(t=t+Math.imul(D,J)|0)+Math.imul(N,V)|0,o=o+Math.imul(N,J)|0,e=e+Math.imul(Ut,W)|0,t=(t=t+Math.imul(Ut,ct)|0)+Math.imul($t,W)|0,o=o+Math.imul($t,ct)|0,e=e+Math.imul(bt,ut)|0,t=(t=t+Math.imul(bt,_t)|0)+Math.imul(Ht,ut)|0,o=o+Math.imul(Ht,_t)|0,e=e+Math.imul(gt,dt)|0,t=(t=t+Math.imul(gt,St)|0)+Math.imul(Nt,dt)|0,o=o+Math.imul(Nt,St)|0,e=e+Math.imul(Bt,vt)|0,t=(t=t+Math.imul(Bt,Tt)|0)+Math.imul(Lt,vt)|0,o=o+Math.imul(Lt,Tt)|0,e=e+Math.imul(at,pt)|0,t=(t=t+Math.imul(at,It)|0)+Math.imul(st,pt)|0,o=o+Math.imul(st,It)|0;var ue=(x+(e=e+Math.imul(k,mt)|0)|0)+((8191&(t=(t=t+Math.imul(k,ot)|0)+Math.imul(Z,mt)|0))<<13)|0;x=((o=o+Math.imul(Z,ot)|0)+(t>>>13)|0)+(ue>>>26)|0,ue&=67108863,e=Math.imul(Dt,Xt),t=(t=Math.imul(Dt,R))+Math.imul(Gt,Xt)|0,o=Math.imul(Gt,R),e=e+Math.imul(Et,L)|0,t=(t=t+Math.imul(Et,F)|0)+Math.imul(Ot,L)|0,o=o+Math.imul(Ot,F)|0,e=e+Math.imul(X,V)|0,t=(t=t+Math.imul(X,J)|0)+Math.imul(nt,V)|0,o=o+Math.imul(nt,J)|0,e=e+Math.imul(D,W)|0,t=(t=t+Math.imul(D,ct)|0)+Math.imul(N,W)|0,o=o+Math.imul(N,ct)|0,e=e+Math.imul(Ut,ut)|0,t=(t=t+Math.imul(Ut,_t)|0)+Math.imul($t,ut)|0,o=o+Math.imul($t,_t)|0,e=e+Math.imul(bt,dt)|0,t=(t=t+Math.imul(bt,St)|0)+Math.imul(Ht,dt)|0,o=o+Math.imul(Ht,St)|0,e=e+Math.imul(gt,vt)|0,t=(t=t+Math.imul(gt,Tt)|0)+Math.imul(Nt,vt)|0,o=o+Math.imul(Nt,Tt)|0,e=e+Math.imul(Bt,pt)|0,t=(t=t+Math.imul(Bt,It)|0)+Math.imul(Lt,pt)|0,o=o+Math.imul(Lt,It)|0;var le=(x+(e=e+Math.imul(at,mt)|0)|0)+((8191&(t=(t=t+Math.imul(at,ot)|0)+Math.imul(st,mt)|0))<<13)|0;x=((o=o+Math.imul(st,ot)|0)+(t>>>13)|0)+(le>>>26)|0,le&=67108863,e=Math.imul(Dt,L),t=(t=Math.imul(Dt,F))+Math.imul(Gt,L)|0,o=Math.imul(Gt,F),e=e+Math.imul(Et,V)|0,t=(t=t+Math.imul(Et,J)|0)+Math.imul(Ot,V)|0,o=o+Math.imul(Ot,J)|0,e=e+Math.imul(X,W)|0,t=(t=t+Math.imul(X,ct)|0)+Math.imul(nt,W)|0,o=o+Math.imul(nt,ct)|0,e=e+Math.imul(D,ut)|0,t=(t=t+Math.imul(D,_t)|0)+Math.imul(N,ut)|0,o=o+Math.imul(N,_t)|0,e=e+Math.imul(Ut,dt)|0,t=(t=t+Math.imul(Ut,St)|0)+Math.imul($t,dt)|0,o=o+Math.imul($t,St)|0,e=e+Math.imul(bt,vt)|0,t=(t=t+Math.imul(bt,Tt)|0)+Math.imul(Ht,vt)|0,o=o+Math.imul(Ht,Tt)|0,e=e+Math.imul(gt,pt)|0,t=(t=t+Math.imul(gt,It)|0)+Math.imul(Nt,pt)|0,o=o+Math.imul(Nt,It)|0;var Jt=(x+(e=e+Math.imul(Bt,mt)|0)|0)+((8191&(t=(t=t+Math.imul(Bt,ot)|0)+Math.imul(Lt,mt)|0))<<13)|0;x=((o=o+Math.imul(Lt,ot)|0)+(t>>>13)|0)+(Jt>>>26)|0,Jt&=67108863,e=Math.imul(Dt,V),t=(t=Math.imul(Dt,J))+Math.imul(Gt,V)|0,o=Math.imul(Gt,J),e=e+Math.imul(Et,W)|0,t=(t=t+Math.imul(Et,ct)|0)+Math.imul(Ot,W)|0,o=o+Math.imul(Ot,ct)|0,e=e+Math.imul(X,ut)|0,t=(t=t+Math.imul(X,_t)|0)+Math.imul(nt,ut)|0,o=o+Math.imul(nt,_t)|0,e=e+Math.imul(D,dt)|0,t=(t=t+Math.imul(D,St)|0)+Math.imul(N,dt)|0,o=o+Math.imul(N,St)|0,e=e+Math.imul(Ut,vt)|0,t=(t=t+Math.imul(Ut,Tt)|0)+Math.imul($t,vt)|0,o=o+Math.imul($t,Tt)|0,e=e+Math.imul(bt,pt)|0,t=(t=t+Math.imul(bt,It)|0)+Math.imul(Ht,pt)|0,o=o+Math.imul(Ht,It)|0;var Ct=(x+(e=e+Math.imul(gt,mt)|0)|0)+((8191&(t=(t=t+Math.imul(gt,ot)|0)+Math.imul(Nt,mt)|0))<<13)|0;x=((o=o+Math.imul(Nt,ot)|0)+(t>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,e=Math.imul(Dt,W),t=(t=Math.imul(Dt,ct))+Math.imul(Gt,W)|0,o=Math.imul(Gt,ct),e=e+Math.imul(Et,ut)|0,t=(t=t+Math.imul(Et,_t)|0)+Math.imul(Ot,ut)|0,o=o+Math.imul(Ot,_t)|0,e=e+Math.imul(X,dt)|0,t=(t=t+Math.imul(X,St)|0)+Math.imul(nt,dt)|0,o=o+Math.imul(nt,St)|0,e=e+Math.imul(D,vt)|0,t=(t=t+Math.imul(D,Tt)|0)+Math.imul(N,vt)|0,o=o+Math.imul(N,Tt)|0,e=e+Math.imul(Ut,pt)|0,t=(t=t+Math.imul(Ut,It)|0)+Math.imul($t,pt)|0,o=o+Math.imul($t,It)|0;var Wt=(x+(e=e+Math.imul(bt,mt)|0)|0)+((8191&(t=(t=t+Math.imul(bt,ot)|0)+Math.imul(Ht,mt)|0))<<13)|0;x=((o=o+Math.imul(Ht,ot)|0)+(t>>>13)|0)+(Wt>>>26)|0,Wt&=67108863,e=Math.imul(Dt,ut),t=(t=Math.imul(Dt,_t))+Math.imul(Gt,ut)|0,o=Math.imul(Gt,_t),e=e+Math.imul(Et,dt)|0,t=(t=t+Math.imul(Et,St)|0)+Math.imul(Ot,dt)|0,o=o+Math.imul(Ot,St)|0,e=e+Math.imul(X,vt)|0,t=(t=t+Math.imul(X,Tt)|0)+Math.imul(nt,vt)|0,o=o+Math.imul(nt,Tt)|0,e=e+Math.imul(D,pt)|0,t=(t=t+Math.imul(D,It)|0)+Math.imul(N,pt)|0,o=o+Math.imul(N,It)|0;var zt=(x+(e=e+Math.imul(Ut,mt)|0)|0)+((8191&(t=(t=t+Math.imul(Ut,ot)|0)+Math.imul($t,mt)|0))<<13)|0;x=((o=o+Math.imul($t,ot)|0)+(t>>>13)|0)+(zt>>>26)|0,zt&=67108863,e=Math.imul(Dt,dt),t=(t=Math.imul(Dt,St))+Math.imul(Gt,dt)|0,o=Math.imul(Gt,St),e=e+Math.imul(Et,vt)|0,t=(t=t+Math.imul(Et,Tt)|0)+Math.imul(Ot,vt)|0,o=o+Math.imul(Ot,Tt)|0,e=e+Math.imul(X,pt)|0,t=(t=t+Math.imul(X,It)|0)+Math.imul(nt,pt)|0,o=o+Math.imul(nt,It)|0;var Kt=(x+(e=e+Math.imul(D,mt)|0)|0)+((8191&(t=(t=t+Math.imul(D,ot)|0)+Math.imul(N,mt)|0))<<13)|0;x=((o=o+Math.imul(N,ot)|0)+(t>>>13)|0)+(Kt>>>26)|0,Kt&=67108863,e=Math.imul(Dt,vt),t=(t=Math.imul(Dt,Tt))+Math.imul(Gt,vt)|0,o=Math.imul(Gt,Tt),e=e+Math.imul(Et,pt)|0,t=(t=t+Math.imul(Et,It)|0)+Math.imul(Ot,pt)|0,o=o+Math.imul(Ot,It)|0;var Qt=(x+(e=e+Math.imul(X,mt)|0)|0)+((8191&(t=(t=t+Math.imul(X,ot)|0)+Math.imul(nt,mt)|0))<<13)|0;x=((o=o+Math.imul(nt,ot)|0)+(t>>>13)|0)+(Qt>>>26)|0,Qt&=67108863,e=Math.imul(Dt,pt),t=(t=Math.imul(Dt,It))+Math.imul(Gt,pt)|0,o=Math.imul(Gt,It);var te=(x+(e=e+Math.imul(Et,mt)|0)|0)+((8191&(t=(t=t+Math.imul(Et,ot)|0)+Math.imul(Ot,mt)|0))<<13)|0;x=((o=o+Math.imul(Ot,ot)|0)+(t>>>13)|0)+(te>>>26)|0,te&=67108863;var de=(x+(e=Math.imul(Dt,mt))|0)+((8191&(t=(t=Math.imul(Dt,ot))+Math.imul(Gt,mt)|0))<<13)|0;return x=((o=Math.imul(Gt,ot))+(t>>>13)|0)+(de>>>26)|0,de&=67108863,I[0]=ft,I[1]=At,I[2]=Ft,I[3]=Mt,I[4]=xt,I[5]=ne,I[6]=se,I[7]=ee,I[8]=he,I[9]=ue,I[10]=le,I[11]=Jt,I[12]=Ct,I[13]=Wt,I[14]=zt,I[15]=Kt,I[16]=Qt,I[17]=te,I[18]=de,x!==0&&(I[19]=x,r.length++),r};function C(n,l,r){return new M().mulp(n,l,r)}function M(n,l){this.x=n,this.y=l}Math.imul||(A=w),i.prototype.mulTo=function(n,l){var r,e=this.length+n.length;return r=this.length===10&&n.length===10?A(this,n,l):e<63?w(this,n,l):e<1024?function(t,o,a){a.negative=o.negative^t.negative,a.length=t.length+o.length;for(var b=0,I=0,x=0;x<a.length-1;x++){var P=I;I=0;for(var k=67108863&b,Z=Math.min(x,o.length-1),$=Math.max(0,x-t.length+1);$<=Z;$++){var at=x-$,st=(0|t.words[at])*(0|o.words[$]),yt=67108863&st;k=67108863&(yt=yt+k|0),I+=(P=(P=P+(st/67108864|0)|0)+(yt>>>26)|0)>>>26,P&=67108863}a.words[x]=k,b=P,P=I}return b!==0?a.words[x]=b:a.length--,a.strip()}(this,n,l):C(this,n,l),r},M.prototype.makeRBT=function(n){for(var l=new Array(n),r=i.prototype._countBits(n)-1,e=0;e<n;e++)l[e]=this.revBin(e,r,n);return l},M.prototype.revBin=function(n,l,r){if(n===0||n===r-1)return n;for(var e=0,t=0;t<l;t++)e|=(1&n)<<l-t-1,n>>=1;return e},M.prototype.permute=function(n,l,r,e,t,o){for(var a=0;a<o;a++)e[a]=l[n[a]],t[a]=r[n[a]]},M.prototype.transform=function(n,l,r,e,t,o){this.permute(o,n,l,r,e,t);for(var a=1;a<t;a<<=1)for(var b=a<<1,I=Math.cos(2*Math.PI/b),x=Math.sin(2*Math.PI/b),P=0;P<t;P+=b)for(var k=I,Z=x,$=0;$<a;$++){var at=r[P+$],st=e[P+$],yt=r[P+$+a],Bt=e[P+$+a],Lt=k*yt-Z*Bt;Bt=k*Bt+Z*yt,yt=Lt,r[P+$]=at+yt,e[P+$]=st+Bt,r[P+$+a]=at-yt,e[P+$+a]=st-Bt,$!==b&&(Lt=I*k-x*Z,Z=I*Z+x*k,k=Lt)}},M.prototype.guessLen13b=function(n,l){var r=1|Math.max(l,n),e=1&r,t=0;for(r=r/2|0;r;r>>>=1)t++;return 1<<t+1+e},M.prototype.conjugate=function(n,l,r){if(!(r<=1))for(var e=0;e<r/2;e++){var t=n[e];n[e]=n[r-e-1],n[r-e-1]=t,t=l[e],l[e]=-l[r-e-1],l[r-e-1]=-t}},M.prototype.normalize13b=function(n,l){for(var r=0,e=0;e<l/2;e++){var t=8192*Math.round(n[2*e+1]/l)+Math.round(n[2*e]/l)+r;n[e]=67108863&t,r=t<67108864?0:t/67108864|0}return n},M.prototype.convert13b=function(n,l,r,e){for(var t=0,o=0;o<l;o++)t+=0|n[o],r[2*o]=8191&t,t>>>=13,r[2*o+1]=8191&t,t>>>=13;for(o=2*l;o<e;++o)r[o]=0;d(t===0),d((-8192&t)==0)},M.prototype.stub=function(n){for(var l=new Array(n),r=0;r<n;r++)l[r]=0;return l},M.prototype.mulp=function(n,l,r){var e=2*this.guessLen13b(n.length,l.length),t=this.makeRBT(e),o=this.stub(e),a=new Array(e),b=new Array(e),I=new Array(e),x=new Array(e),P=new Array(e),k=new Array(e),Z=r.words;Z.length=e,this.convert13b(n.words,n.length,a,e),this.convert13b(l.words,l.length,x,e),this.transform(a,o,b,I,e,t),this.transform(x,o,P,k,e,t);for(var $=0;$<e;$++){var at=b[$]*P[$]-I[$]*k[$];I[$]=b[$]*k[$]+I[$]*P[$],b[$]=at}return this.conjugate(b,I,e),this.transform(b,I,Z,o,e,t),this.conjugate(Z,o,e),this.normalize13b(Z,e),r.negative=n.negative^l.negative,r.length=n.length+l.length,r.strip()},i.prototype.mul=function(n){var l=new i(null);return l.words=new Array(this.length+n.length),this.mulTo(n,l)},i.prototype.mulf=function(n){var l=new i(null);return l.words=new Array(this.length+n.length),C(this,n,l)},i.prototype.imul=function(n){return this.clone().mulTo(n,this)},i.prototype.imuln=function(n){d(typeof n=="number"),d(n<67108864);for(var l=0,r=0;r<this.length;r++){var e=(0|this.words[r])*n,t=(67108863&e)+(67108863&l);l>>=26,l+=e/67108864|0,l+=t>>>26,this.words[r]=67108863&t}return l!==0&&(this.words[r]=l,this.length++),this},i.prototype.muln=function(n){return this.clone().imuln(n)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(n){var l=function(o){for(var a=new Array(o.bitLength()),b=0;b<a.length;b++){var I=b/26|0,x=b%26;a[b]=(o.words[I]&1<<x)>>>x}return a}(n);if(l.length===0)return new i(1);for(var r=this,e=0;e<l.length&&l[e]===0;e++,r=r.sqr());if(++e<l.length)for(var t=r.sqr();e<l.length;e++,t=t.sqr())l[e]!==0&&(r=r.mul(t));return r},i.prototype.iushln=function(n){d(typeof n=="number"&&n>=0);var l,r=n%26,e=(n-r)/26,t=67108863>>>26-r<<26-r;if(r!==0){var o=0;for(l=0;l<this.length;l++){var a=this.words[l]&t,b=(0|this.words[l])-a<<r;this.words[l]=b|o,o=a>>>26-r}o&&(this.words[l]=o,this.length++)}if(e!==0){for(l=this.length-1;l>=0;l--)this.words[l+e]=this.words[l];for(l=0;l<e;l++)this.words[l]=0;this.length+=e}return this.strip()},i.prototype.ishln=function(n){return d(this.negative===0),this.iushln(n)},i.prototype.iushrn=function(n,l,r){var e;d(typeof n=="number"&&n>=0),e=l?(l-l%26)/26:0;var t=n%26,o=Math.min((n-t)/26,this.length),a=67108863^67108863>>>t<<t,b=r;if(e-=o,e=Math.max(0,e),b){for(var I=0;I<o;I++)b.words[I]=this.words[I];b.length=o}if(o!==0)if(this.length>o)for(this.length-=o,I=0;I<this.length;I++)this.words[I]=this.words[I+o];else this.words[0]=0,this.length=1;var x=0;for(I=this.length-1;I>=0&&(x!==0||I>=e);I--){var P=0|this.words[I];this.words[I]=x<<26-t|P>>>t,x=P&a}return b&&x!==0&&(b.words[b.length++]=x),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},i.prototype.ishrn=function(n,l,r){return d(this.negative===0),this.iushrn(n,l,r)},i.prototype.shln=function(n){return this.clone().ishln(n)},i.prototype.ushln=function(n){return this.clone().iushln(n)},i.prototype.shrn=function(n){return this.clone().ishrn(n)},i.prototype.ushrn=function(n){return this.clone().iushrn(n)},i.prototype.testn=function(n){d(typeof n=="number"&&n>=0);var l=n%26,r=(n-l)/26,e=1<<l;return!(this.length<=r||!(this.words[r]&e))},i.prototype.imaskn=function(n){d(typeof n=="number"&&n>=0);var l=n%26,r=(n-l)/26;if(d(this.negative===0,"imaskn works only with positive numbers"),this.length<=r)return this;if(l!==0&&r++,this.length=Math.min(r,this.length),l!==0){var e=67108863^67108863>>>l<<l;this.words[this.length-1]&=e}return this.strip()},i.prototype.maskn=function(n){return this.clone().imaskn(n)},i.prototype.iaddn=function(n){return d(typeof n=="number"),d(n<67108864),n<0?this.isubn(-n):this.negative!==0?this.length===1&&(0|this.words[0])<n?(this.words[0]=n-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(n),this.negative=1,this):this._iaddn(n)},i.prototype._iaddn=function(n){this.words[0]+=n;for(var l=0;l<this.length&&this.words[l]>=67108864;l++)this.words[l]-=67108864,l===this.length-1?this.words[l+1]=1:this.words[l+1]++;return this.length=Math.max(this.length,l+1),this},i.prototype.isubn=function(n){if(d(typeof n=="number"),d(n<67108864),n<0)return this.iaddn(-n);if(this.negative!==0)return this.negative=0,this.iaddn(n),this.negative=1,this;if(this.words[0]-=n,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var l=0;l<this.length&&this.words[l]<0;l++)this.words[l]+=67108864,this.words[l+1]-=1;return this.strip()},i.prototype.addn=function(n){return this.clone().iaddn(n)},i.prototype.subn=function(n){return this.clone().isubn(n)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(n,l,r){var e,t,o=n.length+r;this._expand(o);var a=0;for(e=0;e<n.length;e++){t=(0|this.words[e+r])+a;var b=(0|n.words[e])*l;a=((t-=67108863&b)>>26)-(b/67108864|0),this.words[e+r]=67108863&t}for(;e<this.length-r;e++)a=(t=(0|this.words[e+r])+a)>>26,this.words[e+r]=67108863&t;if(a===0)return this.strip();for(d(a===-1),a=0,e=0;e<this.length;e++)a=(t=-(0|this.words[e])+a)>>26,this.words[e]=67108863&t;return this.negative=1,this.strip()},i.prototype._wordDiv=function(n,l){var r=(this.length,n.length),e=this.clone(),t=n,o=0|t.words[t.length-1];(r=26-this._countBits(o))!=0&&(t=t.ushln(r),e.iushln(r),o=0|t.words[t.length-1]);var a,b=e.length-t.length;if(l!=="mod"){(a=new i(null)).length=b+1,a.words=new Array(a.length);for(var I=0;I<a.length;I++)a.words[I]=0}var x=e.clone()._ishlnsubmul(t,1,b);x.negative===0&&(e=x,a&&(a.words[b]=1));for(var P=b-1;P>=0;P--){var k=67108864*(0|e.words[t.length+P])+(0|e.words[t.length+P-1]);for(k=Math.min(k/o|0,67108863),e._ishlnsubmul(t,k,P);e.negative!==0;)k--,e.negative=0,e._ishlnsubmul(t,1,P),e.isZero()||(e.negative^=1);a&&(a.words[P]=k)}return a&&a.strip(),e.strip(),l!=="div"&&r!==0&&e.iushrn(r),{div:a||null,mod:e}},i.prototype.divmod=function(n,l,r){return d(!n.isZero()),this.isZero()?{div:new i(0),mod:new i(0)}:this.negative!==0&&n.negative===0?(o=this.neg().divmod(n,l),l!=="mod"&&(e=o.div.neg()),l!=="div"&&(t=o.mod.neg(),r&&t.negative!==0&&t.iadd(n)),{div:e,mod:t}):this.negative===0&&n.negative!==0?(o=this.divmod(n.neg(),l),l!=="mod"&&(e=o.div.neg()),{div:e,mod:o.mod}):(this.negative&n.negative)!=0?(o=this.neg().divmod(n.neg(),l),l!=="div"&&(t=o.mod.neg(),r&&t.negative!==0&&t.isub(n)),{div:o.div,mod:t}):n.length>this.length||this.cmp(n)<0?{div:new i(0),mod:this}:n.length===1?l==="div"?{div:this.divn(n.words[0]),mod:null}:l==="mod"?{div:null,mod:new i(this.modn(n.words[0]))}:{div:this.divn(n.words[0]),mod:new i(this.modn(n.words[0]))}:this._wordDiv(n,l);var e,t,o},i.prototype.div=function(n){return this.divmod(n,"div",!1).div},i.prototype.mod=function(n){return this.divmod(n,"mod",!1).mod},i.prototype.umod=function(n){return this.divmod(n,"mod",!0).mod},i.prototype.divRound=function(n){var l=this.divmod(n);if(l.mod.isZero())return l.div;var r=l.div.negative!==0?l.mod.isub(n):l.mod,e=n.ushrn(1),t=n.andln(1),o=r.cmp(e);return o<0||t===1&&o===0?l.div:l.div.negative!==0?l.div.isubn(1):l.div.iaddn(1)},i.prototype.modn=function(n){d(n<=67108863);for(var l=67108864%n,r=0,e=this.length-1;e>=0;e--)r=(l*r+(0|this.words[e]))%n;return r},i.prototype.idivn=function(n){d(n<=67108863);for(var l=0,r=this.length-1;r>=0;r--){var e=(0|this.words[r])+67108864*l;this.words[r]=e/n|0,l=e%n}return this.strip()},i.prototype.divn=function(n){return this.clone().idivn(n)},i.prototype.egcd=function(n){d(n.negative===0),d(!n.isZero());var l=this,r=n.clone();l=l.negative!==0?l.umod(n):l.clone();for(var e=new i(1),t=new i(0),o=new i(0),a=new i(1),b=0;l.isEven()&&r.isEven();)l.iushrn(1),r.iushrn(1),++b;for(var I=r.clone(),x=l.clone();!l.isZero();){for(var P=0,k=1;(l.words[0]&k)==0&&P<26;++P,k<<=1);if(P>0)for(l.iushrn(P);P-- >0;)(e.isOdd()||t.isOdd())&&(e.iadd(I),t.isub(x)),e.iushrn(1),t.iushrn(1);for(var Z=0,$=1;(r.words[0]&$)==0&&Z<26;++Z,$<<=1);if(Z>0)for(r.iushrn(Z);Z-- >0;)(o.isOdd()||a.isOdd())&&(o.iadd(I),a.isub(x)),o.iushrn(1),a.iushrn(1);l.cmp(r)>=0?(l.isub(r),e.isub(o),t.isub(a)):(r.isub(l),o.isub(e),a.isub(t))}return{a:o,b:a,gcd:r.iushln(b)}},i.prototype._invmp=function(n){d(n.negative===0),d(!n.isZero());var l=this,r=n.clone();l=l.negative!==0?l.umod(n):l.clone();for(var e,t=new i(1),o=new i(0),a=r.clone();l.cmpn(1)>0&&r.cmpn(1)>0;){for(var b=0,I=1;(l.words[0]&I)==0&&b<26;++b,I<<=1);if(b>0)for(l.iushrn(b);b-- >0;)t.isOdd()&&t.iadd(a),t.iushrn(1);for(var x=0,P=1;(r.words[0]&P)==0&&x<26;++x,P<<=1);if(x>0)for(r.iushrn(x);x-- >0;)o.isOdd()&&o.iadd(a),o.iushrn(1);l.cmp(r)>=0?(l.isub(r),t.isub(o)):(r.isub(l),o.isub(t))}return(e=l.cmpn(1)===0?t:o).cmpn(0)<0&&e.iadd(n),e},i.prototype.gcd=function(n){if(this.isZero())return n.abs();if(n.isZero())return this.abs();var l=this.clone(),r=n.clone();l.negative=0,r.negative=0;for(var e=0;l.isEven()&&r.isEven();e++)l.iushrn(1),r.iushrn(1);for(;;){for(;l.isEven();)l.iushrn(1);for(;r.isEven();)r.iushrn(1);var t=l.cmp(r);if(t<0){var o=l;l=r,r=o}else if(t===0||r.cmpn(1)===0)break;l.isub(r)}return r.iushln(e)},i.prototype.invm=function(n){return this.egcd(n).a.umod(n)},i.prototype.isEven=function(){return(1&this.words[0])==0},i.prototype.isOdd=function(){return(1&this.words[0])==1},i.prototype.andln=function(n){return this.words[0]&n},i.prototype.bincn=function(n){d(typeof n=="number");var l=n%26,r=(n-l)/26,e=1<<l;if(this.length<=r)return this._expand(r+1),this.words[r]|=e,this;for(var t=e,o=r;t!==0&&o<this.length;o++){var a=0|this.words[o];t=(a+=t)>>>26,a&=67108863,this.words[o]=a}return t!==0&&(this.words[o]=t,this.length++),this},i.prototype.isZero=function(){return this.length===1&&this.words[0]===0},i.prototype.cmpn=function(n){var l,r=n<0;if(this.negative!==0&&!r)return-1;if(this.negative===0&&r)return 1;if(this.strip(),this.length>1)l=1;else{r&&(n=-n),d(n<=67108863,"Number is too big");var e=0|this.words[0];l=e===n?0:e<n?-1:1}return this.negative!==0?0|-l:l},i.prototype.cmp=function(n){if(this.negative!==0&&n.negative===0)return-1;if(this.negative===0&&n.negative!==0)return 1;var l=this.ucmp(n);return this.negative!==0?0|-l:l},i.prototype.ucmp=function(n){if(this.length>n.length)return 1;if(this.length<n.length)return-1;for(var l=0,r=this.length-1;r>=0;r--){var e=0|this.words[r],t=0|n.words[r];if(e!==t){e<t?l=-1:e>t&&(l=1);break}}return l},i.prototype.gtn=function(n){return this.cmpn(n)===1},i.prototype.gt=function(n){return this.cmp(n)===1},i.prototype.gten=function(n){return this.cmpn(n)>=0},i.prototype.gte=function(n){return this.cmp(n)>=0},i.prototype.ltn=function(n){return this.cmpn(n)===-1},i.prototype.lt=function(n){return this.cmp(n)===-1},i.prototype.lten=function(n){return this.cmpn(n)<=0},i.prototype.lte=function(n){return this.cmp(n)<=0},i.prototype.eqn=function(n){return this.cmpn(n)===0},i.prototype.eq=function(n){return this.cmp(n)===0},i.red=function(n){return new et(n)},i.prototype.toRed=function(n){return d(!this.red,"Already a number in reduction context"),d(this.negative===0,"red works only with positives"),n.convertTo(this)._forceRed(n)},i.prototype.fromRed=function(){return d(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(n){return this.red=n,this},i.prototype.forceRed=function(n){return d(!this.red,"Already a number in reduction context"),this._forceRed(n)},i.prototype.redAdd=function(n){return d(this.red,"redAdd works only with red numbers"),this.red.add(this,n)},i.prototype.redIAdd=function(n){return d(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,n)},i.prototype.redSub=function(n){return d(this.red,"redSub works only with red numbers"),this.red.sub(this,n)},i.prototype.redISub=function(n){return d(this.red,"redISub works only with red numbers"),this.red.isub(this,n)},i.prototype.redShl=function(n){return d(this.red,"redShl works only with red numbers"),this.red.shl(this,n)},i.prototype.redMul=function(n){return d(this.red,"redMul works only with red numbers"),this.red._verify2(this,n),this.red.mul(this,n)},i.prototype.redIMul=function(n){return d(this.red,"redMul works only with red numbers"),this.red._verify2(this,n),this.red.imul(this,n)},i.prototype.redSqr=function(){return d(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return d(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return d(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return d(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return d(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(n){return d(this.red&&!n.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,n)};var S={k256:null,p224:null,p192:null,p25519:null};function q(n,l){this.name=n,this.p=new i(l,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function G(){q.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function U(){q.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function H(){q.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function Q(){q.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function et(n){if(typeof n=="string"){var l=i._prime(n);this.m=l.p,this.prime=l}else d(n.gtn(1),"modulus must be greater than 1"),this.m=n,this.prime=null}function it(n){et.call(this,n),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}q.prototype._tmp=function(){var n=new i(null);return n.words=new Array(Math.ceil(this.n/13)),n},q.prototype.ireduce=function(n){var l,r=n;do this.split(r,this.tmp),l=(r=(r=this.imulK(r)).iadd(this.tmp)).bitLength();while(l>this.n);var e=l<this.n?-1:r.ucmp(this.p);return e===0?(r.words[0]=0,r.length=1):e>0?r.isub(this.p):r.strip(),r},q.prototype.split=function(n,l){n.iushrn(this.n,0,l)},q.prototype.imulK=function(n){return n.imul(this.k)},g(G,q),G.prototype.split=function(n,l){for(var r=4194303,e=Math.min(n.length,9),t=0;t<e;t++)l.words[t]=n.words[t];if(l.length=e,n.length<=9)return n.words[0]=0,void(n.length=1);var o=n.words[9];for(l.words[l.length++]=o&r,t=10;t<n.length;t++){var a=0|n.words[t];n.words[t-10]=(a&r)<<4|o>>>22,o=a}o>>>=22,n.words[t-10]=o,o===0&&n.length>10?n.length-=10:n.length-=9},G.prototype.imulK=function(n){n.words[n.length]=0,n.words[n.length+1]=0,n.length+=2;for(var l=0,r=0;r<n.length;r++){var e=0|n.words[r];l+=977*e,n.words[r]=67108863&l,l=64*e+(l/67108864|0)}return n.words[n.length-1]===0&&(n.length--,n.words[n.length-1]===0&&n.length--),n},g(U,q),g(H,q),g(Q,q),Q.prototype.imulK=function(n){for(var l=0,r=0;r<n.length;r++){var e=19*(0|n.words[r])+l,t=67108863&e;e>>>=26,n.words[r]=t,l=e}return l!==0&&(n.words[n.length++]=l),n},i._prime=function(n){if(S[n])return S[n];var l;if(n==="k256")l=new G;else if(n==="p224")l=new U;else if(n==="p192")l=new H;else{if(n!=="p25519")throw new Error("Unknown prime "+n);l=new Q}return S[n]=l,l},et.prototype._verify1=function(n){d(n.negative===0,"red works only with positives"),d(n.red,"red works only with red numbers")},et.prototype._verify2=function(n,l){d((n.negative|l.negative)==0,"red works only with positives"),d(n.red&&n.red===l.red,"red works only with red numbers")},et.prototype.imod=function(n){return this.prime?this.prime.ireduce(n)._forceRed(this):n.umod(this.m)._forceRed(this)},et.prototype.neg=function(n){return n.isZero()?n.clone():this.m.sub(n)._forceRed(this)},et.prototype.add=function(n,l){this._verify2(n,l);var r=n.add(l);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},et.prototype.iadd=function(n,l){this._verify2(n,l);var r=n.iadd(l);return r.cmp(this.m)>=0&&r.isub(this.m),r},et.prototype.sub=function(n,l){this._verify2(n,l);var r=n.sub(l);return r.cmpn(0)<0&&r.iadd(this.m),r._forceRed(this)},et.prototype.isub=function(n,l){this._verify2(n,l);var r=n.isub(l);return r.cmpn(0)<0&&r.iadd(this.m),r},et.prototype.shl=function(n,l){return this._verify1(n),this.imod(n.ushln(l))},et.prototype.imul=function(n,l){return this._verify2(n,l),this.imod(n.imul(l))},et.prototype.mul=function(n,l){return this._verify2(n,l),this.imod(n.mul(l))},et.prototype.isqr=function(n){return this.imul(n,n.clone())},et.prototype.sqr=function(n){return this.mul(n,n)},et.prototype.sqrt=function(n){if(n.isZero())return n.clone();var l=this.m.andln(3);if(d(l%2==1),l===3){var r=this.m.add(new i(1)).iushrn(2);return this.pow(n,r)}for(var e=this.m.subn(1),t=0;!e.isZero()&&e.andln(1)===0;)t++,e.iushrn(1);d(!e.isZero());var o=new i(1).toRed(this),a=o.redNeg(),b=this.m.subn(1).iushrn(1),I=this.m.bitLength();for(I=new i(2*I*I).toRed(this);this.pow(I,b).cmp(a)!==0;)I.redIAdd(a);for(var x=this.pow(I,e),P=this.pow(n,e.addn(1).iushrn(1)),k=this.pow(n,e),Z=t;k.cmp(o)!==0;){for(var $=k,at=0;$.cmp(o)!==0;at++)$=$.redSqr();d(at<Z);var st=this.pow(x,new i(1).iushln(Z-at-1));P=P.redMul(st),x=st.redSqr(),k=k.redMul(x),Z=at}return P},et.prototype.invm=function(n){var l=n._invmp(this.m);return l.negative!==0?(l.negative=0,this.imod(l).redNeg()):this.imod(l)},et.prototype.pow=function(n,l){if(l.isZero())return new i(1);if(l.cmpn(1)===0)return n.clone();var r=new Array(16);r[0]=new i(1).toRed(this),r[1]=n;for(var e=2;e<r.length;e++)r[e]=this.mul(r[e-1],n);var t=r[0],o=0,a=0,b=l.bitLength()%26;for(b===0&&(b=26),e=l.length-1;e>=0;e--){for(var I=l.words[e],x=b-1;x>=0;x--){var P=I>>x&1;t!==r[0]&&(t=this.sqr(t)),P!==0||o!==0?(o<<=1,o|=P,(++a==4||e===0&&x===0)&&(t=this.mul(t,r[o]),a=0,o=0)):a=0}b=26}return t},et.prototype.convertTo=function(n){var l=n.umod(this.m);return l===n?l.clone():l},et.prototype.convertFrom=function(n){var l=n.clone();return l.red=null,l},i.mont=function(n){return new it(n)},g(it,et),it.prototype.convertTo=function(n){return this.imod(n.ushln(this.shift))},it.prototype.convertFrom=function(n){var l=this.imod(n.mul(this.rinv));return l.red=null,l},it.prototype.imul=function(n,l){if(n.isZero()||l.isZero())return n.words[0]=0,n.length=1,n;var r=n.imul(l),e=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),t=r.isub(e).iushrn(this.shift),o=t;return t.cmp(this.m)>=0?o=t.isub(this.m):t.cmpn(0)<0&&(o=t.iadd(this.m)),o._forceRed(this)},it.prototype.mul=function(n,l){if(n.isZero()||l.isZero())return new i(0)._forceRed(this);var r=n.mul(l),e=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),t=r.isub(e).iushrn(this.shift),o=t;return t.cmp(this.m)>=0?o=t.isub(this.m):t.cmpn(0)<0&&(o=t.iadd(this.m)),o._forceRed(this)},it.prototype.invm=function(n){return this.imod(n._invmp(this.m).mul(this.r2))._forceRed(this)}})(_=s.nmd(_),this)},(_,E,s)=>{const y=s(10),v=s(11),d=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;E.Buffer=u,E.SlowBuffer=function(B){return+B!=B&&(B=0),u.alloc(+B)},E.INSPECT_MAX_BYTES=50;const g=2147483647;function i(B){if(B>g)throw new RangeError('The value "'+B+'" is invalid for option "size"');const D=new Uint8Array(B);return Object.setPrototypeOf(D,u.prototype),D}function u(B,D,N){if(typeof B=="number"){if(typeof D=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return p(B)}return h(B,D,N)}function h(B,D,N){if(typeof B=="string")return function(nt,lt){if(typeof lt=="string"&&lt!==""||(lt="utf8"),!u.isEncoding(lt))throw new TypeError("Unknown encoding: "+lt);const Et=0|A(nt,lt);let Ot=i(Et);const ie=Ot.write(nt,lt);return ie!==Et&&(Ot=Ot.slice(0,ie)),Ot}(B,D);if(ArrayBuffer.isView(B))return function(nt){if(bt(nt,Uint8Array)){const lt=new Uint8Array(nt);return m(lt.buffer,lt.byteOffset,lt.byteLength)}return f(nt)}(B);if(B==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof B);if(bt(B,ArrayBuffer)||B&&bt(B.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(bt(B,SharedArrayBuffer)||B&&bt(B.buffer,SharedArrayBuffer)))return m(B,D,N);if(typeof B=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const rt=B.valueOf&&B.valueOf();if(rt!=null&&rt!==B)return u.from(rt,D,N);const X=function(nt){if(u.isBuffer(nt)){const lt=0|w(nt.length),Et=i(lt);return Et.length===0||nt.copy(Et,0,0,lt),Et}return nt.length!==void 0?typeof nt.length!="number"||Ht(nt.length)?i(0):f(nt):nt.type==="Buffer"&&Array.isArray(nt.data)?f(nt.data):void 0}(B);if(X)return X;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof B[Symbol.toPrimitive]=="function")return u.from(B[Symbol.toPrimitive]("string"),D,N);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof B)}function c(B){if(typeof B!="number")throw new TypeError('"size" argument must be of type number');if(B<0)throw new RangeError('The value "'+B+'" is invalid for option "size"')}function p(B){return c(B),i(B<0?0:0|w(B))}function f(B){const D=B.length<0?0:0|w(B.length),N=i(D);for(let rt=0;rt<D;rt+=1)N[rt]=255&B[rt];return N}function m(B,D,N){if(D<0||B.byteLength<D)throw new RangeError('"offset" is outside of buffer bounds');if(B.byteLength<D+(N||0))throw new RangeError('"length" is outside of buffer bounds');let rt;return rt=D===void 0&&N===void 0?new Uint8Array(B):N===void 0?new Uint8Array(B,D):new Uint8Array(B,D,N),Object.setPrototypeOf(rt,u.prototype),rt}function w(B){if(B>=g)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+g.toString(16)+" bytes");return 0|B}function A(B,D){if(u.isBuffer(B))return B.length;if(ArrayBuffer.isView(B)||bt(B,ArrayBuffer))return B.byteLength;if(typeof B!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof B);const N=B.length,rt=arguments.length>2&&arguments[2]===!0;if(!rt&&N===0)return 0;let X=!1;for(;;)switch(D){case"ascii":case"latin1":case"binary":return N;case"utf8":case"utf-8":return gt(B).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*N;case"hex":return N>>>1;case"base64":return Nt(B).length;default:if(X)return rt?-1:gt(B).length;D=(""+D).toLowerCase(),X=!0}}function C(B,D,N){let rt=!1;if((D===void 0||D<0)&&(D=0),D>this.length||((N===void 0||N>this.length)&&(N=this.length),N<=0)||(N>>>=0)<=(D>>>=0))return"";for(B||(B="utf8");;)switch(B){case"hex":return t(this,D,N);case"utf8":case"utf-8":return n(this,D,N);case"ascii":return r(this,D,N);case"latin1":case"binary":return e(this,D,N);case"base64":return it(this,D,N);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return o(this,D,N);default:if(rt)throw new TypeError("Unknown encoding: "+B);B=(B+"").toLowerCase(),rt=!0}}function M(B,D,N){const rt=B[D];B[D]=B[N],B[N]=rt}function S(B,D,N,rt,X){if(B.length===0)return-1;if(typeof N=="string"?(rt=N,N=0):N>2147483647?N=2147483647:N<-2147483648&&(N=-2147483648),Ht(N=+N)&&(N=X?0:B.length-1),N<0&&(N=B.length+N),N>=B.length){if(X)return-1;N=B.length-1}else if(N<0){if(!X)return-1;N=0}if(typeof D=="string"&&(D=u.from(D,rt)),u.isBuffer(D))return D.length===0?-1:q(B,D,N,rt,X);if(typeof D=="number")return D&=255,typeof Uint8Array.prototype.indexOf=="function"?X?Uint8Array.prototype.indexOf.call(B,D,N):Uint8Array.prototype.lastIndexOf.call(B,D,N):q(B,[D],N,rt,X);throw new TypeError("val must be string, number or Buffer")}function q(B,D,N,rt,X){let nt,lt=1,Et=B.length,Ot=D.length;if(rt!==void 0&&((rt=String(rt).toLowerCase())==="ucs2"||rt==="ucs-2"||rt==="utf16le"||rt==="utf-16le")){if(B.length<2||D.length<2)return-1;lt=2,Et/=2,Ot/=2,N/=2}function ie(Dt,Gt){return lt===1?Dt[Gt]:Dt.readUInt16BE(Gt*lt)}if(X){let Dt=-1;for(nt=N;nt<Et;nt++)if(ie(B,nt)===ie(D,Dt===-1?0:nt-Dt)){if(Dt===-1&&(Dt=nt),nt-Dt+1===Ot)return Dt*lt}else Dt!==-1&&(nt-=nt-Dt),Dt=-1}else for(N+Ot>Et&&(N=Et-Ot),nt=N;nt>=0;nt--){let Dt=!0;for(let Gt=0;Gt<Ot;Gt++)if(ie(B,nt+Gt)!==ie(D,Gt)){Dt=!1;break}if(Dt)return nt}return-1}function G(B,D,N,rt){N=Number(N)||0;const X=B.length-N;rt?(rt=Number(rt))>X&&(rt=X):rt=X;const nt=D.length;let lt;for(rt>nt/2&&(rt=nt/2),lt=0;lt<rt;++lt){const Et=parseInt(D.substr(2*lt,2),16);if(Ht(Et))return lt;B[N+lt]=Et}return lt}function U(B,D,N,rt){return Yt(gt(D,B.length-N),B,N,rt)}function H(B,D,N,rt){return Yt(function(X){const nt=[];for(let lt=0;lt<X.length;++lt)nt.push(255&X.charCodeAt(lt));return nt}(D),B,N,rt)}function Q(B,D,N,rt){return Yt(Nt(D),B,N,rt)}function et(B,D,N,rt){return Yt(function(X,nt){let lt,Et,Ot;const ie=[];for(let Dt=0;Dt<X.length&&!((nt-=2)<0);++Dt)lt=X.charCodeAt(Dt),Et=lt>>8,Ot=lt%256,ie.push(Ot),ie.push(Et);return ie}(D,B.length-N),B,N,rt)}function it(B,D,N){return D===0&&N===B.length?y.fromByteArray(B):y.fromByteArray(B.slice(D,N))}function n(B,D,N){N=Math.min(B.length,N);const rt=[];let X=D;for(;X<N;){const nt=B[X];let lt=null,Et=nt>239?4:nt>223?3:nt>191?2:1;if(X+Et<=N){let Ot,ie,Dt,Gt;switch(Et){case 1:nt<128&&(lt=nt);break;case 2:Ot=B[X+1],(192&Ot)==128&&(Gt=(31&nt)<<6|63&Ot,Gt>127&&(lt=Gt));break;case 3:Ot=B[X+1],ie=B[X+2],(192&Ot)==128&&(192&ie)==128&&(Gt=(15&nt)<<12|(63&Ot)<<6|63&ie,Gt>2047&&(Gt<55296||Gt>57343)&&(lt=Gt));break;case 4:Ot=B[X+1],ie=B[X+2],Dt=B[X+3],(192&Ot)==128&&(192&ie)==128&&(192&Dt)==128&&(Gt=(15&nt)<<18|(63&Ot)<<12|(63&ie)<<6|63&Dt,Gt>65535&&Gt<1114112&&(lt=Gt))}}lt===null?(lt=65533,Et=1):lt>65535&&(lt-=65536,rt.push(lt>>>10&1023|55296),lt=56320|1023&lt),rt.push(lt),X+=Et}return function(nt){const lt=nt.length;if(lt<=l)return String.fromCharCode.apply(String,nt);let Et="",Ot=0;for(;Ot<lt;)Et+=String.fromCharCode.apply(String,nt.slice(Ot,Ot+=l));return Et}(rt)}E.kMaxLength=g,u.TYPED_ARRAY_SUPPORT=function(){try{const B=new Uint8Array(1),D={foo:function(){return 42}};return Object.setPrototypeOf(D,Uint8Array.prototype),Object.setPrototypeOf(B,D),B.foo()===42}catch{return!1}}(),u.TYPED_ARRAY_SUPPORT||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}}),u.poolSize=8192,u.from=function(B,D,N){return h(B,D,N)},Object.setPrototypeOf(u.prototype,Uint8Array.prototype),Object.setPrototypeOf(u,Uint8Array),u.alloc=function(B,D,N){return function(rt,X,nt){return c(rt),rt<=0?i(rt):X!==void 0?typeof nt=="string"?i(rt).fill(X,nt):i(rt).fill(X):i(rt)}(B,D,N)},u.allocUnsafe=function(B){return p(B)},u.allocUnsafeSlow=function(B){return p(B)},u.isBuffer=function(B){return B!=null&&B._isBuffer===!0&&B!==u.prototype},u.compare=function(B,D){if(bt(B,Uint8Array)&&(B=u.from(B,B.offset,B.byteLength)),bt(D,Uint8Array)&&(D=u.from(D,D.offset,D.byteLength)),!u.isBuffer(B)||!u.isBuffer(D))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(B===D)return 0;let N=B.length,rt=D.length;for(let X=0,nt=Math.min(N,rt);X<nt;++X)if(B[X]!==D[X]){N=B[X],rt=D[X];break}return N<rt?-1:rt<N?1:0},u.isEncoding=function(B){switch(String(B).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(B,D){if(!Array.isArray(B))throw new TypeError('"list" argument must be an Array of Buffers');if(B.length===0)return u.alloc(0);let N;if(D===void 0)for(D=0,N=0;N<B.length;++N)D+=B[N].length;const rt=u.allocUnsafe(D);let X=0;for(N=0;N<B.length;++N){let nt=B[N];if(bt(nt,Uint8Array))X+nt.length>rt.length?(u.isBuffer(nt)||(nt=u.from(nt)),nt.copy(rt,X)):Uint8Array.prototype.set.call(rt,nt,X);else{if(!u.isBuffer(nt))throw new TypeError('"list" argument must be an Array of Buffers');nt.copy(rt,X)}X+=nt.length}return rt},u.byteLength=A,u.prototype._isBuffer=!0,u.prototype.swap16=function(){const B=this.length;if(B%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let D=0;D<B;D+=2)M(this,D,D+1);return this},u.prototype.swap32=function(){const B=this.length;if(B%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let D=0;D<B;D+=4)M(this,D,D+3),M(this,D+1,D+2);return this},u.prototype.swap64=function(){const B=this.length;if(B%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let D=0;D<B;D+=8)M(this,D,D+7),M(this,D+1,D+6),M(this,D+2,D+5),M(this,D+3,D+4);return this},u.prototype.toString=function(){const B=this.length;return B===0?"":arguments.length===0?n(this,0,B):C.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(B){if(!u.isBuffer(B))throw new TypeError("Argument must be a Buffer");return this===B||u.compare(this,B)===0},u.prototype.inspect=function(){let B="";const D=E.INSPECT_MAX_BYTES;return B=this.toString("hex",0,D).replace(/(.{2})/g,"$1 ").trim(),this.length>D&&(B+=" ... "),"<Buffer "+B+">"},d&&(u.prototype[d]=u.prototype.inspect),u.prototype.compare=function(B,D,N,rt,X){if(bt(B,Uint8Array)&&(B=u.from(B,B.offset,B.byteLength)),!u.isBuffer(B))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof B);if(D===void 0&&(D=0),N===void 0&&(N=B?B.length:0),rt===void 0&&(rt=0),X===void 0&&(X=this.length),D<0||N>B.length||rt<0||X>this.length)throw new RangeError("out of range index");if(rt>=X&&D>=N)return 0;if(rt>=X)return-1;if(D>=N)return 1;if(this===B)return 0;let nt=(X>>>=0)-(rt>>>=0),lt=(N>>>=0)-(D>>>=0);const Et=Math.min(nt,lt),Ot=this.slice(rt,X),ie=B.slice(D,N);for(let Dt=0;Dt<Et;++Dt)if(Ot[Dt]!==ie[Dt]){nt=Ot[Dt],lt=ie[Dt];break}return nt<lt?-1:lt<nt?1:0},u.prototype.includes=function(B,D,N){return this.indexOf(B,D,N)!==-1},u.prototype.indexOf=function(B,D,N){return S(this,B,D,N,!0)},u.prototype.lastIndexOf=function(B,D,N){return S(this,B,D,N,!1)},u.prototype.write=function(B,D,N,rt){if(D===void 0)rt="utf8",N=this.length,D=0;else if(N===void 0&&typeof D=="string")rt=D,N=this.length,D=0;else{if(!isFinite(D))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");D>>>=0,isFinite(N)?(N>>>=0,rt===void 0&&(rt="utf8")):(rt=N,N=void 0)}const X=this.length-D;if((N===void 0||N>X)&&(N=X),B.length>0&&(N<0||D<0)||D>this.length)throw new RangeError("Attempt to write outside buffer bounds");rt||(rt="utf8");let nt=!1;for(;;)switch(rt){case"hex":return G(this,B,D,N);case"utf8":case"utf-8":return U(this,B,D,N);case"ascii":case"latin1":case"binary":return H(this,B,D,N);case"base64":return Q(this,B,D,N);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return et(this,B,D,N);default:if(nt)throw new TypeError("Unknown encoding: "+rt);rt=(""+rt).toLowerCase(),nt=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const l=4096;function r(B,D,N){let rt="";N=Math.min(B.length,N);for(let X=D;X<N;++X)rt+=String.fromCharCode(127&B[X]);return rt}function e(B,D,N){let rt="";N=Math.min(B.length,N);for(let X=D;X<N;++X)rt+=String.fromCharCode(B[X]);return rt}function t(B,D,N){const rt=B.length;(!D||D<0)&&(D=0),(!N||N<0||N>rt)&&(N=rt);let X="";for(let nt=D;nt<N;++nt)X+=ce[B[nt]];return X}function o(B,D,N){const rt=B.slice(D,N);let X="";for(let nt=0;nt<rt.length-1;nt+=2)X+=String.fromCharCode(rt[nt]+256*rt[nt+1]);return X}function a(B,D,N){if(B%1!=0||B<0)throw new RangeError("offset is not uint");if(B+D>N)throw new RangeError("Trying to access beyond buffer length")}function b(B,D,N,rt,X,nt){if(!u.isBuffer(B))throw new TypeError('"buffer" argument must be a Buffer instance');if(D>X||D<nt)throw new RangeError('"value" argument is out of bounds');if(N+rt>B.length)throw new RangeError("Index out of range")}function I(B,D,N,rt,X){yt(D,rt,X,B,N,7);let nt=Number(D&BigInt(4294967295));B[N++]=nt,nt>>=8,B[N++]=nt,nt>>=8,B[N++]=nt,nt>>=8,B[N++]=nt;let lt=Number(D>>BigInt(32)&BigInt(4294967295));return B[N++]=lt,lt>>=8,B[N++]=lt,lt>>=8,B[N++]=lt,lt>>=8,B[N++]=lt,N}function x(B,D,N,rt,X){yt(D,rt,X,B,N,7);let nt=Number(D&BigInt(4294967295));B[N+7]=nt,nt>>=8,B[N+6]=nt,nt>>=8,B[N+5]=nt,nt>>=8,B[N+4]=nt;let lt=Number(D>>BigInt(32)&BigInt(4294967295));return B[N+3]=lt,lt>>=8,B[N+2]=lt,lt>>=8,B[N+1]=lt,lt>>=8,B[N]=lt,N+8}function P(B,D,N,rt,X,nt){if(N+rt>B.length)throw new RangeError("Index out of range");if(N<0)throw new RangeError("Index out of range")}function k(B,D,N,rt,X){return D=+D,N>>>=0,X||P(B,0,N,4),v.write(B,D,N,rt,23,4),N+4}function Z(B,D,N,rt,X){return D=+D,N>>>=0,X||P(B,0,N,8),v.write(B,D,N,rt,52,8),N+8}u.prototype.slice=function(B,D){const N=this.length;(B=~~B)<0?(B+=N)<0&&(B=0):B>N&&(B=N),(D=D===void 0?N:~~D)<0?(D+=N)<0&&(D=0):D>N&&(D=N),D<B&&(D=B);const rt=this.subarray(B,D);return Object.setPrototypeOf(rt,u.prototype),rt},u.prototype.readUintLE=u.prototype.readUIntLE=function(B,D,N){B>>>=0,D>>>=0,N||a(B,D,this.length);let rt=this[B],X=1,nt=0;for(;++nt<D&&(X*=256);)rt+=this[B+nt]*X;return rt},u.prototype.readUintBE=u.prototype.readUIntBE=function(B,D,N){B>>>=0,D>>>=0,N||a(B,D,this.length);let rt=this[B+--D],X=1;for(;D>0&&(X*=256);)rt+=this[B+--D]*X;return rt},u.prototype.readUint8=u.prototype.readUInt8=function(B,D){return B>>>=0,D||a(B,1,this.length),this[B]},u.prototype.readUint16LE=u.prototype.readUInt16LE=function(B,D){return B>>>=0,D||a(B,2,this.length),this[B]|this[B+1]<<8},u.prototype.readUint16BE=u.prototype.readUInt16BE=function(B,D){return B>>>=0,D||a(B,2,this.length),this[B]<<8|this[B+1]},u.prototype.readUint32LE=u.prototype.readUInt32LE=function(B,D){return B>>>=0,D||a(B,4,this.length),(this[B]|this[B+1]<<8|this[B+2]<<16)+16777216*this[B+3]},u.prototype.readUint32BE=u.prototype.readUInt32BE=function(B,D){return B>>>=0,D||a(B,4,this.length),16777216*this[B]+(this[B+1]<<16|this[B+2]<<8|this[B+3])},u.prototype.readBigUInt64LE=Ut(function(B){Bt(B>>>=0,"offset");const D=this[B],N=this[B+7];D!==void 0&&N!==void 0||Lt(B,this.length-8);const rt=D+256*this[++B]+65536*this[++B]+this[++B]*2**24,X=this[++B]+256*this[++B]+65536*this[++B]+N*2**24;return BigInt(rt)+(BigInt(X)<<BigInt(32))}),u.prototype.readBigUInt64BE=Ut(function(B){Bt(B>>>=0,"offset");const D=this[B],N=this[B+7];D!==void 0&&N!==void 0||Lt(B,this.length-8);const rt=D*2**24+65536*this[++B]+256*this[++B]+this[++B],X=this[++B]*2**24+65536*this[++B]+256*this[++B]+N;return(BigInt(rt)<<BigInt(32))+BigInt(X)}),u.prototype.readIntLE=function(B,D,N){B>>>=0,D>>>=0,N||a(B,D,this.length);let rt=this[B],X=1,nt=0;for(;++nt<D&&(X*=256);)rt+=this[B+nt]*X;return X*=128,rt>=X&&(rt-=Math.pow(2,8*D)),rt},u.prototype.readIntBE=function(B,D,N){B>>>=0,D>>>=0,N||a(B,D,this.length);let rt=D,X=1,nt=this[B+--rt];for(;rt>0&&(X*=256);)nt+=this[B+--rt]*X;return X*=128,nt>=X&&(nt-=Math.pow(2,8*D)),nt},u.prototype.readInt8=function(B,D){return B>>>=0,D||a(B,1,this.length),128&this[B]?-1*(255-this[B]+1):this[B]},u.prototype.readInt16LE=function(B,D){B>>>=0,D||a(B,2,this.length);const N=this[B]|this[B+1]<<8;return 32768&N?4294901760|N:N},u.prototype.readInt16BE=function(B,D){B>>>=0,D||a(B,2,this.length);const N=this[B+1]|this[B]<<8;return 32768&N?4294901760|N:N},u.prototype.readInt32LE=function(B,D){return B>>>=0,D||a(B,4,this.length),this[B]|this[B+1]<<8|this[B+2]<<16|this[B+3]<<24},u.prototype.readInt32BE=function(B,D){return B>>>=0,D||a(B,4,this.length),this[B]<<24|this[B+1]<<16|this[B+2]<<8|this[B+3]},u.prototype.readBigInt64LE=Ut(function(B){Bt(B>>>=0,"offset");const D=this[B],N=this[B+7];D!==void 0&&N!==void 0||Lt(B,this.length-8);const rt=this[B+4]+256*this[B+5]+65536*this[B+6]+(N<<24);return(BigInt(rt)<<BigInt(32))+BigInt(D+256*this[++B]+65536*this[++B]+this[++B]*16777216)}),u.prototype.readBigInt64BE=Ut(function(B){Bt(B>>>=0,"offset");const D=this[B],N=this[B+7];D!==void 0&&N!==void 0||Lt(B,this.length-8);const rt=(D<<24)+65536*this[++B]+256*this[++B]+this[++B];return(BigInt(rt)<<BigInt(32))+BigInt(this[++B]*16777216+65536*this[++B]+256*this[++B]+N)}),u.prototype.readFloatLE=function(B,D){return B>>>=0,D||a(B,4,this.length),v.read(this,B,!0,23,4)},u.prototype.readFloatBE=function(B,D){return B>>>=0,D||a(B,4,this.length),v.read(this,B,!1,23,4)},u.prototype.readDoubleLE=function(B,D){return B>>>=0,D||a(B,8,this.length),v.read(this,B,!0,52,8)},u.prototype.readDoubleBE=function(B,D){return B>>>=0,D||a(B,8,this.length),v.read(this,B,!1,52,8)},u.prototype.writeUintLE=u.prototype.writeUIntLE=function(B,D,N,rt){B=+B,D>>>=0,N>>>=0,rt||b(this,B,D,N,Math.pow(2,8*N)-1,0);let X=1,nt=0;for(this[D]=255&B;++nt<N&&(X*=256);)this[D+nt]=B/X&255;return D+N},u.prototype.writeUintBE=u.prototype.writeUIntBE=function(B,D,N,rt){B=+B,D>>>=0,N>>>=0,rt||b(this,B,D,N,Math.pow(2,8*N)-1,0);let X=N-1,nt=1;for(this[D+X]=255&B;--X>=0&&(nt*=256);)this[D+X]=B/nt&255;return D+N},u.prototype.writeUint8=u.prototype.writeUInt8=function(B,D,N){return B=+B,D>>>=0,N||b(this,B,D,1,255,0),this[D]=255&B,D+1},u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function(B,D,N){return B=+B,D>>>=0,N||b(this,B,D,2,65535,0),this[D]=255&B,this[D+1]=B>>>8,D+2},u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function(B,D,N){return B=+B,D>>>=0,N||b(this,B,D,2,65535,0),this[D]=B>>>8,this[D+1]=255&B,D+2},u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function(B,D,N){return B=+B,D>>>=0,N||b(this,B,D,4,4294967295,0),this[D+3]=B>>>24,this[D+2]=B>>>16,this[D+1]=B>>>8,this[D]=255&B,D+4},u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function(B,D,N){return B=+B,D>>>=0,N||b(this,B,D,4,4294967295,0),this[D]=B>>>24,this[D+1]=B>>>16,this[D+2]=B>>>8,this[D+3]=255&B,D+4},u.prototype.writeBigUInt64LE=Ut(function(B,D=0){return I(this,B,D,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeBigUInt64BE=Ut(function(B,D=0){return x(this,B,D,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeIntLE=function(B,D,N,rt){if(B=+B,D>>>=0,!rt){const Et=Math.pow(2,8*N-1);b(this,B,D,N,Et-1,-Et)}let X=0,nt=1,lt=0;for(this[D]=255&B;++X<N&&(nt*=256);)B<0&&lt===0&&this[D+X-1]!==0&&(lt=1),this[D+X]=(B/nt>>0)-lt&255;return D+N},u.prototype.writeIntBE=function(B,D,N,rt){if(B=+B,D>>>=0,!rt){const Et=Math.pow(2,8*N-1);b(this,B,D,N,Et-1,-Et)}let X=N-1,nt=1,lt=0;for(this[D+X]=255&B;--X>=0&&(nt*=256);)B<0&&lt===0&&this[D+X+1]!==0&&(lt=1),this[D+X]=(B/nt>>0)-lt&255;return D+N},u.prototype.writeInt8=function(B,D,N){return B=+B,D>>>=0,N||b(this,B,D,1,127,-128),B<0&&(B=255+B+1),this[D]=255&B,D+1},u.prototype.writeInt16LE=function(B,D,N){return B=+B,D>>>=0,N||b(this,B,D,2,32767,-32768),this[D]=255&B,this[D+1]=B>>>8,D+2},u.prototype.writeInt16BE=function(B,D,N){return B=+B,D>>>=0,N||b(this,B,D,2,32767,-32768),this[D]=B>>>8,this[D+1]=255&B,D+2},u.prototype.writeInt32LE=function(B,D,N){return B=+B,D>>>=0,N||b(this,B,D,4,2147483647,-2147483648),this[D]=255&B,this[D+1]=B>>>8,this[D+2]=B>>>16,this[D+3]=B>>>24,D+4},u.prototype.writeInt32BE=function(B,D,N){return B=+B,D>>>=0,N||b(this,B,D,4,2147483647,-2147483648),B<0&&(B=4294967295+B+1),this[D]=B>>>24,this[D+1]=B>>>16,this[D+2]=B>>>8,this[D+3]=255&B,D+4},u.prototype.writeBigInt64LE=Ut(function(B,D=0){return I(this,B,D,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),u.prototype.writeBigInt64BE=Ut(function(B,D=0){return x(this,B,D,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),u.prototype.writeFloatLE=function(B,D,N){return k(this,B,D,!0,N)},u.prototype.writeFloatBE=function(B,D,N){return k(this,B,D,!1,N)},u.prototype.writeDoubleLE=function(B,D,N){return Z(this,B,D,!0,N)},u.prototype.writeDoubleBE=function(B,D,N){return Z(this,B,D,!1,N)},u.prototype.copy=function(B,D,N,rt){if(!u.isBuffer(B))throw new TypeError("argument should be a Buffer");if(N||(N=0),rt||rt===0||(rt=this.length),D>=B.length&&(D=B.length),D||(D=0),rt>0&&rt<N&&(rt=N),rt===N||B.length===0||this.length===0)return 0;if(D<0)throw new RangeError("targetStart out of bounds");if(N<0||N>=this.length)throw new RangeError("Index out of range");if(rt<0)throw new RangeError("sourceEnd out of bounds");rt>this.length&&(rt=this.length),B.length-D<rt-N&&(rt=B.length-D+N);const X=rt-N;return this===B&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(D,N,rt):Uint8Array.prototype.set.call(B,this.subarray(N,rt),D),X},u.prototype.fill=function(B,D,N,rt){if(typeof B=="string"){if(typeof D=="string"?(rt=D,D=0,N=this.length):typeof N=="string"&&(rt=N,N=this.length),rt!==void 0&&typeof rt!="string")throw new TypeError("encoding must be a string");if(typeof rt=="string"&&!u.isEncoding(rt))throw new TypeError("Unknown encoding: "+rt);if(B.length===1){const nt=B.charCodeAt(0);(rt==="utf8"&&nt<128||rt==="latin1")&&(B=nt)}}else typeof B=="number"?B&=255:typeof B=="boolean"&&(B=Number(B));if(D<0||this.length<D||this.length<N)throw new RangeError("Out of range index");if(N<=D)return this;let X;if(D>>>=0,N=N===void 0?this.length:N>>>0,B||(B=0),typeof B=="number")for(X=D;X<N;++X)this[X]=B;else{const nt=u.isBuffer(B)?B:u.from(B,rt),lt=nt.length;if(lt===0)throw new TypeError('The value "'+B+'" is invalid for argument "value"');for(X=0;X<N-D;++X)this[X+D]=nt[X%lt]}return this};const $={};function at(B,D,N){$[B]=class extends N{constructor(){super(),Object.defineProperty(this,"message",{value:D.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${B}]`,this.stack,delete this.name}get code(){return B}set code(rt){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:rt,writable:!0})}toString(){return`${this.name} [${B}]: ${this.message}`}}}function st(B){let D="",N=B.length;const rt=B[0]==="-"?1:0;for(;N>=rt+4;N-=3)D=`_${B.slice(N-3,N)}${D}`;return`${B.slice(0,N)}${D}`}function yt(B,D,N,rt,X,nt){if(B>N||B<D){const lt=typeof D=="bigint"?"n":"";let Et;throw Et=nt>3?D===0||D===BigInt(0)?`>= 0${lt} and < 2${lt} ** ${8*(nt+1)}${lt}`:`>= -(2${lt} ** ${8*(nt+1)-1}${lt}) and < 2 ** ${8*(nt+1)-1}${lt}`:`>= ${D}${lt} and <= ${N}${lt}`,new $.ERR_OUT_OF_RANGE("value",Et,B)}(function(lt,Et,Ot){Bt(Et,"offset"),lt[Et]!==void 0&&lt[Et+Ot]!==void 0||Lt(Et,lt.length-(Ot+1))})(rt,X,nt)}function Bt(B,D){if(typeof B!="number")throw new $.ERR_INVALID_ARG_TYPE(D,"number",B)}function Lt(B,D,N){throw Math.floor(B)!==B?(Bt(B,N),new $.ERR_OUT_OF_RANGE(N||"offset","an integer",B)):D<0?new $.ERR_BUFFER_OUT_OF_BOUNDS:new $.ERR_OUT_OF_RANGE(N||"offset",`>= ${N?1:0} and <= ${D}`,B)}at("ERR_BUFFER_OUT_OF_BOUNDS",function(B){return B?`${B} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),at("ERR_INVALID_ARG_TYPE",function(B,D){return`The "${B}" argument must be of type number. Received type ${typeof D}`},TypeError),at("ERR_OUT_OF_RANGE",function(B,D,N){let rt=`The value of "${B}" is out of range.`,X=N;return Number.isInteger(N)&&Math.abs(N)>4294967296?X=st(String(N)):typeof N=="bigint"&&(X=String(N),(N>BigInt(2)**BigInt(32)||N<-(BigInt(2)**BigInt(32)))&&(X=st(X)),X+="n"),rt+=` It must be ${D}. Received ${X}`,rt},RangeError);const wt=/[^+/0-9A-Za-z-_]/g;function gt(B,D){let N;D=D||1/0;const rt=B.length;let X=null;const nt=[];for(let lt=0;lt<rt;++lt){if(N=B.charCodeAt(lt),N>55295&&N<57344){if(!X){if(N>56319){(D-=3)>-1&&nt.push(239,191,189);continue}if(lt+1===rt){(D-=3)>-1&&nt.push(239,191,189);continue}X=N;continue}if(N<56320){(D-=3)>-1&&nt.push(239,191,189),X=N;continue}N=65536+(X-55296<<10|N-56320)}else X&&(D-=3)>-1&&nt.push(239,191,189);if(X=null,N<128){if((D-=1)<0)break;nt.push(N)}else if(N<2048){if((D-=2)<0)break;nt.push(N>>6|192,63&N|128)}else if(N<65536){if((D-=3)<0)break;nt.push(N>>12|224,N>>6&63|128,63&N|128)}else{if(!(N<1114112))throw new Error("Invalid code point");if((D-=4)<0)break;nt.push(N>>18|240,N>>12&63|128,N>>6&63|128,63&N|128)}}return nt}function Nt(B){return y.toByteArray(function(D){if((D=(D=D.split("=")[0]).trim().replace(wt,"")).length<2)return"";for(;D.length%4!=0;)D+="=";return D}(B))}function Yt(B,D,N,rt){let X;for(X=0;X<rt&&!(X+N>=D.length||X>=B.length);++X)D[X+N]=B[X];return X}function bt(B,D){return B instanceof D||B!=null&&B.constructor!=null&&B.constructor.name!=null&&B.constructor.name===D.name}function Ht(B){return B!=B}const ce=function(){const B="0123456789abcdef",D=new Array(256);for(let N=0;N<16;++N){const rt=16*N;for(let X=0;X<16;++X)D[rt+X]=B[N]+B[X]}return D}();function Ut(B){return typeof BigInt>"u"?$t:B}function $t(){throw new Error("BigInt not supported")}},(_,E)=>{E.byteLength=function(c){var p=u(c),f=p[0],m=p[1];return 3*(f+m)/4-m},E.toByteArray=function(c){var p,f,m=u(c),w=m[0],A=m[1],C=new v(function(q,G,U){return 3*(G+U)/4-U}(0,w,A)),M=0,S=A>0?w-4:w;for(f=0;f<S;f+=4)p=y[c.charCodeAt(f)]<<18|y[c.charCodeAt(f+1)]<<12|y[c.charCodeAt(f+2)]<<6|y[c.charCodeAt(f+3)],C[M++]=p>>16&255,C[M++]=p>>8&255,C[M++]=255&p;return A===2&&(p=y[c.charCodeAt(f)]<<2|y[c.charCodeAt(f+1)]>>4,C[M++]=255&p),A===1&&(p=y[c.charCodeAt(f)]<<10|y[c.charCodeAt(f+1)]<<4|y[c.charCodeAt(f+2)]>>2,C[M++]=p>>8&255,C[M++]=255&p),C},E.fromByteArray=function(c){for(var p,f=c.length,m=f%3,w=[],A=16383,C=0,M=f-m;C<M;C+=A)w.push(h(c,C,C+A>M?M:C+A));return m===1?(p=c[f-1],w.push(s[p>>2]+s[p<<4&63]+"==")):m===2&&(p=(c[f-2]<<8)+c[f-1],w.push(s[p>>10]+s[p>>4&63]+s[p<<2&63]+"=")),w.join("")};for(var s=[],y=[],v=typeof Uint8Array<"u"?Uint8Array:Array,d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",g=0,i=d.length;g<i;++g)s[g]=d[g],y[d.charCodeAt(g)]=g;function u(c){var p=c.length;if(p%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var f=c.indexOf("=");return f===-1&&(f=p),[f,f===p?0:4-f%4]}function h(c,p,f){for(var m,w,A=[],C=p;C<f;C+=3)m=(c[C]<<16&16711680)+(c[C+1]<<8&65280)+(255&c[C+2]),A.push(s[(w=m)>>18&63]+s[w>>12&63]+s[w>>6&63]+s[63&w]);return A.join("")}y["-".charCodeAt(0)]=62,y["_".charCodeAt(0)]=63},(_,E)=>{E.read=function(s,y,v,d,g){var i,u,h=8*g-d-1,c=(1<<h)-1,p=c>>1,f=-7,m=v?g-1:0,w=v?-1:1,A=s[y+m];for(m+=w,i=A&(1<<-f)-1,A>>=-f,f+=h;f>0;i=256*i+s[y+m],m+=w,f-=8);for(u=i&(1<<-f)-1,i>>=-f,f+=d;f>0;u=256*u+s[y+m],m+=w,f-=8);if(i===0)i=1-p;else{if(i===c)return u?NaN:1/0*(A?-1:1);u+=Math.pow(2,d),i-=p}return(A?-1:1)*u*Math.pow(2,i-d)},E.write=function(s,y,v,d,g,i){var u,h,c,p=8*i-g-1,f=(1<<p)-1,m=f>>1,w=g===23?Math.pow(2,-24)-Math.pow(2,-77):0,A=d?0:i-1,C=d?1:-1,M=y<0||y===0&&1/y<0?1:0;for(y=Math.abs(y),isNaN(y)||y===1/0?(h=isNaN(y)?1:0,u=f):(u=Math.floor(Math.log(y)/Math.LN2),y*(c=Math.pow(2,-u))<1&&(u--,c*=2),(y+=u+m>=1?w/c:w*Math.pow(2,1-m))*c>=2&&(u++,c/=2),u+m>=f?(h=0,u=f):u+m>=1?(h=(y*c-1)*Math.pow(2,g),u+=m):(h=y*Math.pow(2,m-1)*Math.pow(2,g),u=0));g>=8;s[v+A]=255&h,A+=C,h/=256,g-=8);for(u=u<<g|h,p+=g;p>0;s[v+A]=255&u,A+=C,u/=256,p-=8);s[v+A-C]|=128*M}},(_,E,s)=>{var y=s(13),v=s(14);_.exports=function(d){if(typeof d=="string"||typeof d=="number"){var g=new y(1),i=String(d).toLowerCase().trim(),u=i.substr(0,2)==="0x"||i.substr(0,3)==="-0x",h=v(i);if(h.substr(0,1)==="-"&&(h=v(h.slice(1)),g=new y(-1,10)),!(h=h===""?"0":h).match(/^-?[0-9]+$/)&&h.match(/^[0-9A-Fa-f]+$/)||h.match(/^[a-fA-F]+$/)||u===!0&&h.match(/^[0-9A-Fa-f]+$/))return new y(h,16).mul(g);if((h.match(/^-?[0-9]+$/)||h==="")&&u===!1)return new y(h,10).mul(g)}else if(typeof d=="object"&&d.toString&&!d.pop&&!d.push&&d.toString(10).match(/^-?[0-9]+$/)&&(d.mul||d.dividedToIntegerBy))return new y(d.toString(10),10);throw new Error("[number-to-bn] while converting number "+JSON.stringify(d)+" to BN.js instance, error: invalid number value. Value must be an integer, hex string, BN or BigNumber instance. Note, decimals are not supported.")}},function(_,E,s){(function(y,v){function d(n,l){if(!n)throw new Error(l||"Assertion failed")}function g(n,l){n.super_=l;var r=function(){};r.prototype=l.prototype,n.prototype=new r,n.prototype.constructor=n}function i(n,l,r){if(i.isBN(n))return n;this.negative=0,this.words=null,this.length=0,this.red=null,n!==null&&(l!=="le"&&l!=="be"||(r=l,l=10),this._init(n||0,l||10,r||"be"))}var u;typeof y=="object"?y.exports=i:v.BN=i,i.BN=i,i.wordSize=26;try{u=s(9).Buffer}catch{}function h(n,l,r){for(var e=0,t=Math.min(n.length,r),o=l;o<t;o++){var a=n.charCodeAt(o)-48;e<<=4,e|=a>=49&&a<=54?a-49+10:a>=17&&a<=22?a-17+10:15&a}return e}function c(n,l,r,e){for(var t=0,o=Math.min(n.length,r),a=l;a<o;a++){var b=n.charCodeAt(a)-48;t*=e,t+=b>=49?b-49+10:b>=17?b-17+10:b}return t}i.isBN=function(n){return n instanceof i||n!==null&&typeof n=="object"&&n.constructor.wordSize===i.wordSize&&Array.isArray(n.words)},i.max=function(n,l){return n.cmp(l)>0?n:l},i.min=function(n,l){return n.cmp(l)<0?n:l},i.prototype._init=function(n,l,r){if(typeof n=="number")return this._initNumber(n,l,r);if(typeof n=="object")return this._initArray(n,l,r);l==="hex"&&(l=16),d(l===(0|l)&&l>=2&&l<=36);var e=0;(n=n.toString().replace(/\s+/g,""))[0]==="-"&&e++,l===16?this._parseHex(n,e):this._parseBase(n,l,e),n[0]==="-"&&(this.negative=1),this.strip(),r==="le"&&this._initArray(this.toArray(),l,r)},i.prototype._initNumber=function(n,l,r){n<0&&(this.negative=1,n=-n),n<67108864?(this.words=[67108863&n],this.length=1):n<4503599627370496?(this.words=[67108863&n,n/67108864&67108863],this.length=2):(d(n<9007199254740992),this.words=[67108863&n,n/67108864&67108863,1],this.length=3),r==="le"&&this._initArray(this.toArray(),l,r)},i.prototype._initArray=function(n,l,r){if(d(typeof n.length=="number"),n.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(n.length/3),this.words=new Array(this.length);for(var e=0;e<this.length;e++)this.words[e]=0;var t,o,a=0;if(r==="be")for(e=n.length-1,t=0;e>=0;e-=3)o=n[e]|n[e-1]<<8|n[e-2]<<16,this.words[t]|=o<<a&67108863,this.words[t+1]=o>>>26-a&67108863,(a+=24)>=26&&(a-=26,t++);else if(r==="le")for(e=0,t=0;e<n.length;e+=3)o=n[e]|n[e+1]<<8|n[e+2]<<16,this.words[t]|=o<<a&67108863,this.words[t+1]=o>>>26-a&67108863,(a+=24)>=26&&(a-=26,t++);return this.strip()},i.prototype._parseHex=function(n,l){this.length=Math.ceil((n.length-l)/6),this.words=new Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;var e,t,o=0;for(r=n.length-6,e=0;r>=l;r-=6)t=h(n,r,r+6),this.words[e]|=t<<o&67108863,this.words[e+1]|=t>>>26-o&4194303,(o+=24)>=26&&(o-=26,e++);r+6!==l&&(t=h(n,l,r+6),this.words[e]|=t<<o&67108863,this.words[e+1]|=t>>>26-o&4194303),this.strip()},i.prototype._parseBase=function(n,l,r){this.words=[0],this.length=1;for(var e=0,t=1;t<=67108863;t*=l)e++;e--,t=t/l|0;for(var o=n.length-r,a=o%e,b=Math.min(o,o-a)+r,I=0,x=r;x<b;x+=e)I=c(n,x,x+e,l),this.imuln(t),this.words[0]+I<67108864?this.words[0]+=I:this._iaddn(I);if(a!==0){var P=1;for(I=c(n,x,n.length,l),x=0;x<a;x++)P*=l;this.imuln(P),this.words[0]+I<67108864?this.words[0]+=I:this._iaddn(I)}},i.prototype.copy=function(n){n.words=new Array(this.length);for(var l=0;l<this.length;l++)n.words[l]=this.words[l];n.length=this.length,n.negative=this.negative,n.red=this.red},i.prototype.clone=function(){var n=new i(null);return this.copy(n),n},i.prototype._expand=function(n){for(;this.length<n;)this.words[this.length++]=0;return this},i.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},i.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},i.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var p=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],f=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],m=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function w(n,l,r){r.negative=l.negative^n.negative;var e=n.length+l.length|0;r.length=e,e=e-1|0;var t=0|n.words[0],o=0|l.words[0],a=t*o,b=67108863&a,I=a/67108864|0;r.words[0]=b;for(var x=1;x<e;x++){for(var P=I>>>26,k=67108863&I,Z=Math.min(x,l.length-1),$=Math.max(0,x-n.length+1);$<=Z;$++){var at=x-$|0;P+=(a=(t=0|n.words[at])*(o=0|l.words[$])+k)/67108864|0,k=67108863&a}r.words[x]=0|k,I=0|P}return I!==0?r.words[x]=0|I:r.length--,r.strip()}i.prototype.toString=function(n,l){var r;if(l=0|l||1,(n=n||10)===16||n==="hex"){r="";for(var e=0,t=0,o=0;o<this.length;o++){var a=this.words[o],b=(16777215&(a<<e|t)).toString(16);r=(t=a>>>24-e&16777215)!=0||o!==this.length-1?p[6-b.length]+b+r:b+r,(e+=2)>=26&&(e-=26,o--)}for(t!==0&&(r=t.toString(16)+r);r.length%l!=0;)r="0"+r;return this.negative!==0&&(r="-"+r),r}if(n===(0|n)&&n>=2&&n<=36){var I=f[n],x=m[n];r="";var P=this.clone();for(P.negative=0;!P.isZero();){var k=P.modn(x).toString(n);r=(P=P.idivn(x)).isZero()?k+r:p[I-k.length]+k+r}for(this.isZero()&&(r="0"+r);r.length%l!=0;)r="0"+r;return this.negative!==0&&(r="-"+r),r}d(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var n=this.words[0];return this.length===2?n+=67108864*this.words[1]:this.length===3&&this.words[2]===1?n+=4503599627370496+67108864*this.words[1]:this.length>2&&d(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-n:n},i.prototype.toJSON=function(){return this.toString(16)},i.prototype.toBuffer=function(n,l){return d(u!==void 0),this.toArrayLike(u,n,l)},i.prototype.toArray=function(n,l){return this.toArrayLike(Array,n,l)},i.prototype.toArrayLike=function(n,l,r){var e=this.byteLength(),t=r||Math.max(1,e);d(e<=t,"byte array longer than desired length"),d(t>0,"Requested array length <= 0"),this.strip();var o,a,b=l==="le",I=new n(t),x=this.clone();if(b){for(a=0;!x.isZero();a++)o=x.andln(255),x.iushrn(8),I[a]=o;for(;a<t;a++)I[a]=0}else{for(a=0;a<t-e;a++)I[a]=0;for(a=0;!x.isZero();a++)o=x.andln(255),x.iushrn(8),I[t-a-1]=o}return I},Math.clz32?i.prototype._countBits=function(n){return 32-Math.clz32(n)}:i.prototype._countBits=function(n){var l=n,r=0;return l>=4096&&(r+=13,l>>>=13),l>=64&&(r+=7,l>>>=7),l>=8&&(r+=4,l>>>=4),l>=2&&(r+=2,l>>>=2),r+l},i.prototype._zeroBits=function(n){if(n===0)return 26;var l=n,r=0;return(8191&l)==0&&(r+=13,l>>>=13),(127&l)==0&&(r+=7,l>>>=7),(15&l)==0&&(r+=4,l>>>=4),(3&l)==0&&(r+=2,l>>>=2),(1&l)==0&&r++,r},i.prototype.bitLength=function(){var n=this.words[this.length-1],l=this._countBits(n);return 26*(this.length-1)+l},i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var n=0,l=0;l<this.length;l++){var r=this._zeroBits(this.words[l]);if(n+=r,r!==26)break}return n},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(n){return this.negative!==0?this.abs().inotn(n).iaddn(1):this.clone()},i.prototype.fromTwos=function(n){return this.testn(n-1)?this.notn(n).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return this.negative!==0},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(n){for(;this.length<n.length;)this.words[this.length++]=0;for(var l=0;l<n.length;l++)this.words[l]=this.words[l]|n.words[l];return this.strip()},i.prototype.ior=function(n){return d((this.negative|n.negative)==0),this.iuor(n)},i.prototype.or=function(n){return this.length>n.length?this.clone().ior(n):n.clone().ior(this)},i.prototype.uor=function(n){return this.length>n.length?this.clone().iuor(n):n.clone().iuor(this)},i.prototype.iuand=function(n){var l;l=this.length>n.length?n:this;for(var r=0;r<l.length;r++)this.words[r]=this.words[r]&n.words[r];return this.length=l.length,this.strip()},i.prototype.iand=function(n){return d((this.negative|n.negative)==0),this.iuand(n)},i.prototype.and=function(n){return this.length>n.length?this.clone().iand(n):n.clone().iand(this)},i.prototype.uand=function(n){return this.length>n.length?this.clone().iuand(n):n.clone().iuand(this)},i.prototype.iuxor=function(n){var l,r;this.length>n.length?(l=this,r=n):(l=n,r=this);for(var e=0;e<r.length;e++)this.words[e]=l.words[e]^r.words[e];if(this!==l)for(;e<l.length;e++)this.words[e]=l.words[e];return this.length=l.length,this.strip()},i.prototype.ixor=function(n){return d((this.negative|n.negative)==0),this.iuxor(n)},i.prototype.xor=function(n){return this.length>n.length?this.clone().ixor(n):n.clone().ixor(this)},i.prototype.uxor=function(n){return this.length>n.length?this.clone().iuxor(n):n.clone().iuxor(this)},i.prototype.inotn=function(n){d(typeof n=="number"&&n>=0);var l=0|Math.ceil(n/26),r=n%26;this._expand(l),r>0&&l--;for(var e=0;e<l;e++)this.words[e]=67108863&~this.words[e];return r>0&&(this.words[e]=~this.words[e]&67108863>>26-r),this.strip()},i.prototype.notn=function(n){return this.clone().inotn(n)},i.prototype.setn=function(n,l){d(typeof n=="number"&&n>=0);var r=n/26|0,e=n%26;return this._expand(r+1),this.words[r]=l?this.words[r]|1<<e:this.words[r]&~(1<<e),this.strip()},i.prototype.iadd=function(n){var l,r,e;if(this.negative!==0&&n.negative===0)return this.negative=0,l=this.isub(n),this.negative^=1,this._normSign();if(this.negative===0&&n.negative!==0)return n.negative=0,l=this.isub(n),n.negative=1,l._normSign();this.length>n.length?(r=this,e=n):(r=n,e=this);for(var t=0,o=0;o<e.length;o++)l=(0|r.words[o])+(0|e.words[o])+t,this.words[o]=67108863&l,t=l>>>26;for(;t!==0&&o<r.length;o++)l=(0|r.words[o])+t,this.words[o]=67108863&l,t=l>>>26;if(this.length=r.length,t!==0)this.words[this.length]=t,this.length++;else if(r!==this)for(;o<r.length;o++)this.words[o]=r.words[o];return this},i.prototype.add=function(n){var l;return n.negative!==0&&this.negative===0?(n.negative=0,l=this.sub(n),n.negative^=1,l):n.negative===0&&this.negative!==0?(this.negative=0,l=n.sub(this),this.negative=1,l):this.length>n.length?this.clone().iadd(n):n.clone().iadd(this)},i.prototype.isub=function(n){if(n.negative!==0){n.negative=0;var l=this.iadd(n);return n.negative=1,l._normSign()}if(this.negative!==0)return this.negative=0,this.iadd(n),this.negative=1,this._normSign();var r,e,t=this.cmp(n);if(t===0)return this.negative=0,this.length=1,this.words[0]=0,this;t>0?(r=this,e=n):(r=n,e=this);for(var o=0,a=0;a<e.length;a++)o=(l=(0|r.words[a])-(0|e.words[a])+o)>>26,this.words[a]=67108863&l;for(;o!==0&&a<r.length;a++)o=(l=(0|r.words[a])+o)>>26,this.words[a]=67108863&l;if(o===0&&a<r.length&&r!==this)for(;a<r.length;a++)this.words[a]=r.words[a];return this.length=Math.max(this.length,a),r!==this&&(this.negative=1),this.strip()},i.prototype.sub=function(n){return this.clone().isub(n)};var A=function(n,l,r){var e,t,o,a=n.words,b=l.words,I=r.words,x=0,P=0|a[0],k=8191&P,Z=P>>>13,$=0|a[1],at=8191&$,st=$>>>13,yt=0|a[2],Bt=8191&yt,Lt=yt>>>13,wt=0|a[3],gt=8191&wt,Nt=wt>>>13,Yt=0|a[4],bt=8191&Yt,Ht=Yt>>>13,ce=0|a[5],Ut=8191&ce,$t=ce>>>13,B=0|a[6],D=8191&B,N=B>>>13,rt=0|a[7],X=8191&rt,nt=rt>>>13,lt=0|a[8],Et=8191&lt,Ot=lt>>>13,ie=0|a[9],Dt=8191&ie,Gt=ie>>>13,ye=0|b[0],Vt=8191&ye,ae=ye>>>13,fe=0|b[1],Xt=8191&fe,R=fe>>>13,j=0|b[2],L=8191&j,F=j>>>13,T=0|b[3],V=8191&T,J=T>>>13,ht=0|b[4],W=8191&ht,ct=ht>>>13,kt=0|b[5],ut=8191&kt,_t=kt>>>13,Pt=0|b[6],dt=8191&Pt,St=Pt>>>13,qt=0|b[7],vt=8191&qt,Tt=qt>>>13,jt=0|b[8],pt=8191&jt,It=jt>>>13,Zt=0|b[9],mt=8191&Zt,ot=Zt>>>13;r.negative=n.negative^l.negative,r.length=19;var ft=(x+(e=Math.imul(k,Vt))|0)+((8191&(t=(t=Math.imul(k,ae))+Math.imul(Z,Vt)|0))<<13)|0;x=((o=Math.imul(Z,ae))+(t>>>13)|0)+(ft>>>26)|0,ft&=67108863,e=Math.imul(at,Vt),t=(t=Math.imul(at,ae))+Math.imul(st,Vt)|0,o=Math.imul(st,ae);var At=(x+(e=e+Math.imul(k,Xt)|0)|0)+((8191&(t=(t=t+Math.imul(k,R)|0)+Math.imul(Z,Xt)|0))<<13)|0;x=((o=o+Math.imul(Z,R)|0)+(t>>>13)|0)+(At>>>26)|0,At&=67108863,e=Math.imul(Bt,Vt),t=(t=Math.imul(Bt,ae))+Math.imul(Lt,Vt)|0,o=Math.imul(Lt,ae),e=e+Math.imul(at,Xt)|0,t=(t=t+Math.imul(at,R)|0)+Math.imul(st,Xt)|0,o=o+Math.imul(st,R)|0;var Ft=(x+(e=e+Math.imul(k,L)|0)|0)+((8191&(t=(t=t+Math.imul(k,F)|0)+Math.imul(Z,L)|0))<<13)|0;x=((o=o+Math.imul(Z,F)|0)+(t>>>13)|0)+(Ft>>>26)|0,Ft&=67108863,e=Math.imul(gt,Vt),t=(t=Math.imul(gt,ae))+Math.imul(Nt,Vt)|0,o=Math.imul(Nt,ae),e=e+Math.imul(Bt,Xt)|0,t=(t=t+Math.imul(Bt,R)|0)+Math.imul(Lt,Xt)|0,o=o+Math.imul(Lt,R)|0,e=e+Math.imul(at,L)|0,t=(t=t+Math.imul(at,F)|0)+Math.imul(st,L)|0,o=o+Math.imul(st,F)|0;var Mt=(x+(e=e+Math.imul(k,V)|0)|0)+((8191&(t=(t=t+Math.imul(k,J)|0)+Math.imul(Z,V)|0))<<13)|0;x=((o=o+Math.imul(Z,J)|0)+(t>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,e=Math.imul(bt,Vt),t=(t=Math.imul(bt,ae))+Math.imul(Ht,Vt)|0,o=Math.imul(Ht,ae),e=e+Math.imul(gt,Xt)|0,t=(t=t+Math.imul(gt,R)|0)+Math.imul(Nt,Xt)|0,o=o+Math.imul(Nt,R)|0,e=e+Math.imul(Bt,L)|0,t=(t=t+Math.imul(Bt,F)|0)+Math.imul(Lt,L)|0,o=o+Math.imul(Lt,F)|0,e=e+Math.imul(at,V)|0,t=(t=t+Math.imul(at,J)|0)+Math.imul(st,V)|0,o=o+Math.imul(st,J)|0;var xt=(x+(e=e+Math.imul(k,W)|0)|0)+((8191&(t=(t=t+Math.imul(k,ct)|0)+Math.imul(Z,W)|0))<<13)|0;x=((o=o+Math.imul(Z,ct)|0)+(t>>>13)|0)+(xt>>>26)|0,xt&=67108863,e=Math.imul(Ut,Vt),t=(t=Math.imul(Ut,ae))+Math.imul($t,Vt)|0,o=Math.imul($t,ae),e=e+Math.imul(bt,Xt)|0,t=(t=t+Math.imul(bt,R)|0)+Math.imul(Ht,Xt)|0,o=o+Math.imul(Ht,R)|0,e=e+Math.imul(gt,L)|0,t=(t=t+Math.imul(gt,F)|0)+Math.imul(Nt,L)|0,o=o+Math.imul(Nt,F)|0,e=e+Math.imul(Bt,V)|0,t=(t=t+Math.imul(Bt,J)|0)+Math.imul(Lt,V)|0,o=o+Math.imul(Lt,J)|0,e=e+Math.imul(at,W)|0,t=(t=t+Math.imul(at,ct)|0)+Math.imul(st,W)|0,o=o+Math.imul(st,ct)|0;var ne=(x+(e=e+Math.imul(k,ut)|0)|0)+((8191&(t=(t=t+Math.imul(k,_t)|0)+Math.imul(Z,ut)|0))<<13)|0;x=((o=o+Math.imul(Z,_t)|0)+(t>>>13)|0)+(ne>>>26)|0,ne&=67108863,e=Math.imul(D,Vt),t=(t=Math.imul(D,ae))+Math.imul(N,Vt)|0,o=Math.imul(N,ae),e=e+Math.imul(Ut,Xt)|0,t=(t=t+Math.imul(Ut,R)|0)+Math.imul($t,Xt)|0,o=o+Math.imul($t,R)|0,e=e+Math.imul(bt,L)|0,t=(t=t+Math.imul(bt,F)|0)+Math.imul(Ht,L)|0,o=o+Math.imul(Ht,F)|0,e=e+Math.imul(gt,V)|0,t=(t=t+Math.imul(gt,J)|0)+Math.imul(Nt,V)|0,o=o+Math.imul(Nt,J)|0,e=e+Math.imul(Bt,W)|0,t=(t=t+Math.imul(Bt,ct)|0)+Math.imul(Lt,W)|0,o=o+Math.imul(Lt,ct)|0,e=e+Math.imul(at,ut)|0,t=(t=t+Math.imul(at,_t)|0)+Math.imul(st,ut)|0,o=o+Math.imul(st,_t)|0;var se=(x+(e=e+Math.imul(k,dt)|0)|0)+((8191&(t=(t=t+Math.imul(k,St)|0)+Math.imul(Z,dt)|0))<<13)|0;x=((o=o+Math.imul(Z,St)|0)+(t>>>13)|0)+(se>>>26)|0,se&=67108863,e=Math.imul(X,Vt),t=(t=Math.imul(X,ae))+Math.imul(nt,Vt)|0,o=Math.imul(nt,ae),e=e+Math.imul(D,Xt)|0,t=(t=t+Math.imul(D,R)|0)+Math.imul(N,Xt)|0,o=o+Math.imul(N,R)|0,e=e+Math.imul(Ut,L)|0,t=(t=t+Math.imul(Ut,F)|0)+Math.imul($t,L)|0,o=o+Math.imul($t,F)|0,e=e+Math.imul(bt,V)|0,t=(t=t+Math.imul(bt,J)|0)+Math.imul(Ht,V)|0,o=o+Math.imul(Ht,J)|0,e=e+Math.imul(gt,W)|0,t=(t=t+Math.imul(gt,ct)|0)+Math.imul(Nt,W)|0,o=o+Math.imul(Nt,ct)|0,e=e+Math.imul(Bt,ut)|0,t=(t=t+Math.imul(Bt,_t)|0)+Math.imul(Lt,ut)|0,o=o+Math.imul(Lt,_t)|0,e=e+Math.imul(at,dt)|0,t=(t=t+Math.imul(at,St)|0)+Math.imul(st,dt)|0,o=o+Math.imul(st,St)|0;var ee=(x+(e=e+Math.imul(k,vt)|0)|0)+((8191&(t=(t=t+Math.imul(k,Tt)|0)+Math.imul(Z,vt)|0))<<13)|0;x=((o=o+Math.imul(Z,Tt)|0)+(t>>>13)|0)+(ee>>>26)|0,ee&=67108863,e=Math.imul(Et,Vt),t=(t=Math.imul(Et,ae))+Math.imul(Ot,Vt)|0,o=Math.imul(Ot,ae),e=e+Math.imul(X,Xt)|0,t=(t=t+Math.imul(X,R)|0)+Math.imul(nt,Xt)|0,o=o+Math.imul(nt,R)|0,e=e+Math.imul(D,L)|0,t=(t=t+Math.imul(D,F)|0)+Math.imul(N,L)|0,o=o+Math.imul(N,F)|0,e=e+Math.imul(Ut,V)|0,t=(t=t+Math.imul(Ut,J)|0)+Math.imul($t,V)|0,o=o+Math.imul($t,J)|0,e=e+Math.imul(bt,W)|0,t=(t=t+Math.imul(bt,ct)|0)+Math.imul(Ht,W)|0,o=o+Math.imul(Ht,ct)|0,e=e+Math.imul(gt,ut)|0,t=(t=t+Math.imul(gt,_t)|0)+Math.imul(Nt,ut)|0,o=o+Math.imul(Nt,_t)|0,e=e+Math.imul(Bt,dt)|0,t=(t=t+Math.imul(Bt,St)|0)+Math.imul(Lt,dt)|0,o=o+Math.imul(Lt,St)|0,e=e+Math.imul(at,vt)|0,t=(t=t+Math.imul(at,Tt)|0)+Math.imul(st,vt)|0,o=o+Math.imul(st,Tt)|0;var he=(x+(e=e+Math.imul(k,pt)|0)|0)+((8191&(t=(t=t+Math.imul(k,It)|0)+Math.imul(Z,pt)|0))<<13)|0;x=((o=o+Math.imul(Z,It)|0)+(t>>>13)|0)+(he>>>26)|0,he&=67108863,e=Math.imul(Dt,Vt),t=(t=Math.imul(Dt,ae))+Math.imul(Gt,Vt)|0,o=Math.imul(Gt,ae),e=e+Math.imul(Et,Xt)|0,t=(t=t+Math.imul(Et,R)|0)+Math.imul(Ot,Xt)|0,o=o+Math.imul(Ot,R)|0,e=e+Math.imul(X,L)|0,t=(t=t+Math.imul(X,F)|0)+Math.imul(nt,L)|0,o=o+Math.imul(nt,F)|0,e=e+Math.imul(D,V)|0,t=(t=t+Math.imul(D,J)|0)+Math.imul(N,V)|0,o=o+Math.imul(N,J)|0,e=e+Math.imul(Ut,W)|0,t=(t=t+Math.imul(Ut,ct)|0)+Math.imul($t,W)|0,o=o+Math.imul($t,ct)|0,e=e+Math.imul(bt,ut)|0,t=(t=t+Math.imul(bt,_t)|0)+Math.imul(Ht,ut)|0,o=o+Math.imul(Ht,_t)|0,e=e+Math.imul(gt,dt)|0,t=(t=t+Math.imul(gt,St)|0)+Math.imul(Nt,dt)|0,o=o+Math.imul(Nt,St)|0,e=e+Math.imul(Bt,vt)|0,t=(t=t+Math.imul(Bt,Tt)|0)+Math.imul(Lt,vt)|0,o=o+Math.imul(Lt,Tt)|0,e=e+Math.imul(at,pt)|0,t=(t=t+Math.imul(at,It)|0)+Math.imul(st,pt)|0,o=o+Math.imul(st,It)|0;var ue=(x+(e=e+Math.imul(k,mt)|0)|0)+((8191&(t=(t=t+Math.imul(k,ot)|0)+Math.imul(Z,mt)|0))<<13)|0;x=((o=o+Math.imul(Z,ot)|0)+(t>>>13)|0)+(ue>>>26)|0,ue&=67108863,e=Math.imul(Dt,Xt),t=(t=Math.imul(Dt,R))+Math.imul(Gt,Xt)|0,o=Math.imul(Gt,R),e=e+Math.imul(Et,L)|0,t=(t=t+Math.imul(Et,F)|0)+Math.imul(Ot,L)|0,o=o+Math.imul(Ot,F)|0,e=e+Math.imul(X,V)|0,t=(t=t+Math.imul(X,J)|0)+Math.imul(nt,V)|0,o=o+Math.imul(nt,J)|0,e=e+Math.imul(D,W)|0,t=(t=t+Math.imul(D,ct)|0)+Math.imul(N,W)|0,o=o+Math.imul(N,ct)|0,e=e+Math.imul(Ut,ut)|0,t=(t=t+Math.imul(Ut,_t)|0)+Math.imul($t,ut)|0,o=o+Math.imul($t,_t)|0,e=e+Math.imul(bt,dt)|0,t=(t=t+Math.imul(bt,St)|0)+Math.imul(Ht,dt)|0,o=o+Math.imul(Ht,St)|0,e=e+Math.imul(gt,vt)|0,t=(t=t+Math.imul(gt,Tt)|0)+Math.imul(Nt,vt)|0,o=o+Math.imul(Nt,Tt)|0,e=e+Math.imul(Bt,pt)|0,t=(t=t+Math.imul(Bt,It)|0)+Math.imul(Lt,pt)|0,o=o+Math.imul(Lt,It)|0;var le=(x+(e=e+Math.imul(at,mt)|0)|0)+((8191&(t=(t=t+Math.imul(at,ot)|0)+Math.imul(st,mt)|0))<<13)|0;x=((o=o+Math.imul(st,ot)|0)+(t>>>13)|0)+(le>>>26)|0,le&=67108863,e=Math.imul(Dt,L),t=(t=Math.imul(Dt,F))+Math.imul(Gt,L)|0,o=Math.imul(Gt,F),e=e+Math.imul(Et,V)|0,t=(t=t+Math.imul(Et,J)|0)+Math.imul(Ot,V)|0,o=o+Math.imul(Ot,J)|0,e=e+Math.imul(X,W)|0,t=(t=t+Math.imul(X,ct)|0)+Math.imul(nt,W)|0,o=o+Math.imul(nt,ct)|0,e=e+Math.imul(D,ut)|0,t=(t=t+Math.imul(D,_t)|0)+Math.imul(N,ut)|0,o=o+Math.imul(N,_t)|0,e=e+Math.imul(Ut,dt)|0,t=(t=t+Math.imul(Ut,St)|0)+Math.imul($t,dt)|0,o=o+Math.imul($t,St)|0,e=e+Math.imul(bt,vt)|0,t=(t=t+Math.imul(bt,Tt)|0)+Math.imul(Ht,vt)|0,o=o+Math.imul(Ht,Tt)|0,e=e+Math.imul(gt,pt)|0,t=(t=t+Math.imul(gt,It)|0)+Math.imul(Nt,pt)|0,o=o+Math.imul(Nt,It)|0;var Jt=(x+(e=e+Math.imul(Bt,mt)|0)|0)+((8191&(t=(t=t+Math.imul(Bt,ot)|0)+Math.imul(Lt,mt)|0))<<13)|0;x=((o=o+Math.imul(Lt,ot)|0)+(t>>>13)|0)+(Jt>>>26)|0,Jt&=67108863,e=Math.imul(Dt,V),t=(t=Math.imul(Dt,J))+Math.imul(Gt,V)|0,o=Math.imul(Gt,J),e=e+Math.imul(Et,W)|0,t=(t=t+Math.imul(Et,ct)|0)+Math.imul(Ot,W)|0,o=o+Math.imul(Ot,ct)|0,e=e+Math.imul(X,ut)|0,t=(t=t+Math.imul(X,_t)|0)+Math.imul(nt,ut)|0,o=o+Math.imul(nt,_t)|0,e=e+Math.imul(D,dt)|0,t=(t=t+Math.imul(D,St)|0)+Math.imul(N,dt)|0,o=o+Math.imul(N,St)|0,e=e+Math.imul(Ut,vt)|0,t=(t=t+Math.imul(Ut,Tt)|0)+Math.imul($t,vt)|0,o=o+Math.imul($t,Tt)|0,e=e+Math.imul(bt,pt)|0,t=(t=t+Math.imul(bt,It)|0)+Math.imul(Ht,pt)|0,o=o+Math.imul(Ht,It)|0;var Ct=(x+(e=e+Math.imul(gt,mt)|0)|0)+((8191&(t=(t=t+Math.imul(gt,ot)|0)+Math.imul(Nt,mt)|0))<<13)|0;x=((o=o+Math.imul(Nt,ot)|0)+(t>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,e=Math.imul(Dt,W),t=(t=Math.imul(Dt,ct))+Math.imul(Gt,W)|0,o=Math.imul(Gt,ct),e=e+Math.imul(Et,ut)|0,t=(t=t+Math.imul(Et,_t)|0)+Math.imul(Ot,ut)|0,o=o+Math.imul(Ot,_t)|0,e=e+Math.imul(X,dt)|0,t=(t=t+Math.imul(X,St)|0)+Math.imul(nt,dt)|0,o=o+Math.imul(nt,St)|0,e=e+Math.imul(D,vt)|0,t=(t=t+Math.imul(D,Tt)|0)+Math.imul(N,vt)|0,o=o+Math.imul(N,Tt)|0,e=e+Math.imul(Ut,pt)|0,t=(t=t+Math.imul(Ut,It)|0)+Math.imul($t,pt)|0,o=o+Math.imul($t,It)|0;var Wt=(x+(e=e+Math.imul(bt,mt)|0)|0)+((8191&(t=(t=t+Math.imul(bt,ot)|0)+Math.imul(Ht,mt)|0))<<13)|0;x=((o=o+Math.imul(Ht,ot)|0)+(t>>>13)|0)+(Wt>>>26)|0,Wt&=67108863,e=Math.imul(Dt,ut),t=(t=Math.imul(Dt,_t))+Math.imul(Gt,ut)|0,o=Math.imul(Gt,_t),e=e+Math.imul(Et,dt)|0,t=(t=t+Math.imul(Et,St)|0)+Math.imul(Ot,dt)|0,o=o+Math.imul(Ot,St)|0,e=e+Math.imul(X,vt)|0,t=(t=t+Math.imul(X,Tt)|0)+Math.imul(nt,vt)|0,o=o+Math.imul(nt,Tt)|0,e=e+Math.imul(D,pt)|0,t=(t=t+Math.imul(D,It)|0)+Math.imul(N,pt)|0,o=o+Math.imul(N,It)|0;var zt=(x+(e=e+Math.imul(Ut,mt)|0)|0)+((8191&(t=(t=t+Math.imul(Ut,ot)|0)+Math.imul($t,mt)|0))<<13)|0;x=((o=o+Math.imul($t,ot)|0)+(t>>>13)|0)+(zt>>>26)|0,zt&=67108863,e=Math.imul(Dt,dt),t=(t=Math.imul(Dt,St))+Math.imul(Gt,dt)|0,o=Math.imul(Gt,St),e=e+Math.imul(Et,vt)|0,t=(t=t+Math.imul(Et,Tt)|0)+Math.imul(Ot,vt)|0,o=o+Math.imul(Ot,Tt)|0,e=e+Math.imul(X,pt)|0,t=(t=t+Math.imul(X,It)|0)+Math.imul(nt,pt)|0,o=o+Math.imul(nt,It)|0;var Kt=(x+(e=e+Math.imul(D,mt)|0)|0)+((8191&(t=(t=t+Math.imul(D,ot)|0)+Math.imul(N,mt)|0))<<13)|0;x=((o=o+Math.imul(N,ot)|0)+(t>>>13)|0)+(Kt>>>26)|0,Kt&=67108863,e=Math.imul(Dt,vt),t=(t=Math.imul(Dt,Tt))+Math.imul(Gt,vt)|0,o=Math.imul(Gt,Tt),e=e+Math.imul(Et,pt)|0,t=(t=t+Math.imul(Et,It)|0)+Math.imul(Ot,pt)|0,o=o+Math.imul(Ot,It)|0;var Qt=(x+(e=e+Math.imul(X,mt)|0)|0)+((8191&(t=(t=t+Math.imul(X,ot)|0)+Math.imul(nt,mt)|0))<<13)|0;x=((o=o+Math.imul(nt,ot)|0)+(t>>>13)|0)+(Qt>>>26)|0,Qt&=67108863,e=Math.imul(Dt,pt),t=(t=Math.imul(Dt,It))+Math.imul(Gt,pt)|0,o=Math.imul(Gt,It);var te=(x+(e=e+Math.imul(Et,mt)|0)|0)+((8191&(t=(t=t+Math.imul(Et,ot)|0)+Math.imul(Ot,mt)|0))<<13)|0;x=((o=o+Math.imul(Ot,ot)|0)+(t>>>13)|0)+(te>>>26)|0,te&=67108863;var de=(x+(e=Math.imul(Dt,mt))|0)+((8191&(t=(t=Math.imul(Dt,ot))+Math.imul(Gt,mt)|0))<<13)|0;return x=((o=Math.imul(Gt,ot))+(t>>>13)|0)+(de>>>26)|0,de&=67108863,I[0]=ft,I[1]=At,I[2]=Ft,I[3]=Mt,I[4]=xt,I[5]=ne,I[6]=se,I[7]=ee,I[8]=he,I[9]=ue,I[10]=le,I[11]=Jt,I[12]=Ct,I[13]=Wt,I[14]=zt,I[15]=Kt,I[16]=Qt,I[17]=te,I[18]=de,x!==0&&(I[19]=x,r.length++),r};function C(n,l,r){return new M().mulp(n,l,r)}function M(n,l){this.x=n,this.y=l}Math.imul||(A=w),i.prototype.mulTo=function(n,l){var r,e=this.length+n.length;return r=this.length===10&&n.length===10?A(this,n,l):e<63?w(this,n,l):e<1024?function(t,o,a){a.negative=o.negative^t.negative,a.length=t.length+o.length;for(var b=0,I=0,x=0;x<a.length-1;x++){var P=I;I=0;for(var k=67108863&b,Z=Math.min(x,o.length-1),$=Math.max(0,x-t.length+1);$<=Z;$++){var at=x-$,st=(0|t.words[at])*(0|o.words[$]),yt=67108863&st;k=67108863&(yt=yt+k|0),I+=(P=(P=P+(st/67108864|0)|0)+(yt>>>26)|0)>>>26,P&=67108863}a.words[x]=k,b=P,P=I}return b!==0?a.words[x]=b:a.length--,a.strip()}(this,n,l):C(this,n,l),r},M.prototype.makeRBT=function(n){for(var l=new Array(n),r=i.prototype._countBits(n)-1,e=0;e<n;e++)l[e]=this.revBin(e,r,n);return l},M.prototype.revBin=function(n,l,r){if(n===0||n===r-1)return n;for(var e=0,t=0;t<l;t++)e|=(1&n)<<l-t-1,n>>=1;return e},M.prototype.permute=function(n,l,r,e,t,o){for(var a=0;a<o;a++)e[a]=l[n[a]],t[a]=r[n[a]]},M.prototype.transform=function(n,l,r,e,t,o){this.permute(o,n,l,r,e,t);for(var a=1;a<t;a<<=1)for(var b=a<<1,I=Math.cos(2*Math.PI/b),x=Math.sin(2*Math.PI/b),P=0;P<t;P+=b)for(var k=I,Z=x,$=0;$<a;$++){var at=r[P+$],st=e[P+$],yt=r[P+$+a],Bt=e[P+$+a],Lt=k*yt-Z*Bt;Bt=k*Bt+Z*yt,yt=Lt,r[P+$]=at+yt,e[P+$]=st+Bt,r[P+$+a]=at-yt,e[P+$+a]=st-Bt,$!==b&&(Lt=I*k-x*Z,Z=I*Z+x*k,k=Lt)}},M.prototype.guessLen13b=function(n,l){var r=1|Math.max(l,n),e=1&r,t=0;for(r=r/2|0;r;r>>>=1)t++;return 1<<t+1+e},M.prototype.conjugate=function(n,l,r){if(!(r<=1))for(var e=0;e<r/2;e++){var t=n[e];n[e]=n[r-e-1],n[r-e-1]=t,t=l[e],l[e]=-l[r-e-1],l[r-e-1]=-t}},M.prototype.normalize13b=function(n,l){for(var r=0,e=0;e<l/2;e++){var t=8192*Math.round(n[2*e+1]/l)+Math.round(n[2*e]/l)+r;n[e]=67108863&t,r=t<67108864?0:t/67108864|0}return n},M.prototype.convert13b=function(n,l,r,e){for(var t=0,o=0;o<l;o++)t+=0|n[o],r[2*o]=8191&t,t>>>=13,r[2*o+1]=8191&t,t>>>=13;for(o=2*l;o<e;++o)r[o]=0;d(t===0),d((-8192&t)==0)},M.prototype.stub=function(n){for(var l=new Array(n),r=0;r<n;r++)l[r]=0;return l},M.prototype.mulp=function(n,l,r){var e=2*this.guessLen13b(n.length,l.length),t=this.makeRBT(e),o=this.stub(e),a=new Array(e),b=new Array(e),I=new Array(e),x=new Array(e),P=new Array(e),k=new Array(e),Z=r.words;Z.length=e,this.convert13b(n.words,n.length,a,e),this.convert13b(l.words,l.length,x,e),this.transform(a,o,b,I,e,t),this.transform(x,o,P,k,e,t);for(var $=0;$<e;$++){var at=b[$]*P[$]-I[$]*k[$];I[$]=b[$]*k[$]+I[$]*P[$],b[$]=at}return this.conjugate(b,I,e),this.transform(b,I,Z,o,e,t),this.conjugate(Z,o,e),this.normalize13b(Z,e),r.negative=n.negative^l.negative,r.length=n.length+l.length,r.strip()},i.prototype.mul=function(n){var l=new i(null);return l.words=new Array(this.length+n.length),this.mulTo(n,l)},i.prototype.mulf=function(n){var l=new i(null);return l.words=new Array(this.length+n.length),C(this,n,l)},i.prototype.imul=function(n){return this.clone().mulTo(n,this)},i.prototype.imuln=function(n){d(typeof n=="number"),d(n<67108864);for(var l=0,r=0;r<this.length;r++){var e=(0|this.words[r])*n,t=(67108863&e)+(67108863&l);l>>=26,l+=e/67108864|0,l+=t>>>26,this.words[r]=67108863&t}return l!==0&&(this.words[r]=l,this.length++),this},i.prototype.muln=function(n){return this.clone().imuln(n)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(n){var l=function(o){for(var a=new Array(o.bitLength()),b=0;b<a.length;b++){var I=b/26|0,x=b%26;a[b]=(o.words[I]&1<<x)>>>x}return a}(n);if(l.length===0)return new i(1);for(var r=this,e=0;e<l.length&&l[e]===0;e++,r=r.sqr());if(++e<l.length)for(var t=r.sqr();e<l.length;e++,t=t.sqr())l[e]!==0&&(r=r.mul(t));return r},i.prototype.iushln=function(n){d(typeof n=="number"&&n>=0);var l,r=n%26,e=(n-r)/26,t=67108863>>>26-r<<26-r;if(r!==0){var o=0;for(l=0;l<this.length;l++){var a=this.words[l]&t,b=(0|this.words[l])-a<<r;this.words[l]=b|o,o=a>>>26-r}o&&(this.words[l]=o,this.length++)}if(e!==0){for(l=this.length-1;l>=0;l--)this.words[l+e]=this.words[l];for(l=0;l<e;l++)this.words[l]=0;this.length+=e}return this.strip()},i.prototype.ishln=function(n){return d(this.negative===0),this.iushln(n)},i.prototype.iushrn=function(n,l,r){var e;d(typeof n=="number"&&n>=0),e=l?(l-l%26)/26:0;var t=n%26,o=Math.min((n-t)/26,this.length),a=67108863^67108863>>>t<<t,b=r;if(e-=o,e=Math.max(0,e),b){for(var I=0;I<o;I++)b.words[I]=this.words[I];b.length=o}if(o!==0)if(this.length>o)for(this.length-=o,I=0;I<this.length;I++)this.words[I]=this.words[I+o];else this.words[0]=0,this.length=1;var x=0;for(I=this.length-1;I>=0&&(x!==0||I>=e);I--){var P=0|this.words[I];this.words[I]=x<<26-t|P>>>t,x=P&a}return b&&x!==0&&(b.words[b.length++]=x),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},i.prototype.ishrn=function(n,l,r){return d(this.negative===0),this.iushrn(n,l,r)},i.prototype.shln=function(n){return this.clone().ishln(n)},i.prototype.ushln=function(n){return this.clone().iushln(n)},i.prototype.shrn=function(n){return this.clone().ishrn(n)},i.prototype.ushrn=function(n){return this.clone().iushrn(n)},i.prototype.testn=function(n){d(typeof n=="number"&&n>=0);var l=n%26,r=(n-l)/26,e=1<<l;return!(this.length<=r||!(this.words[r]&e))},i.prototype.imaskn=function(n){d(typeof n=="number"&&n>=0);var l=n%26,r=(n-l)/26;if(d(this.negative===0,"imaskn works only with positive numbers"),this.length<=r)return this;if(l!==0&&r++,this.length=Math.min(r,this.length),l!==0){var e=67108863^67108863>>>l<<l;this.words[this.length-1]&=e}return this.strip()},i.prototype.maskn=function(n){return this.clone().imaskn(n)},i.prototype.iaddn=function(n){return d(typeof n=="number"),d(n<67108864),n<0?this.isubn(-n):this.negative!==0?this.length===1&&(0|this.words[0])<n?(this.words[0]=n-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(n),this.negative=1,this):this._iaddn(n)},i.prototype._iaddn=function(n){this.words[0]+=n;for(var l=0;l<this.length&&this.words[l]>=67108864;l++)this.words[l]-=67108864,l===this.length-1?this.words[l+1]=1:this.words[l+1]++;return this.length=Math.max(this.length,l+1),this},i.prototype.isubn=function(n){if(d(typeof n=="number"),d(n<67108864),n<0)return this.iaddn(-n);if(this.negative!==0)return this.negative=0,this.iaddn(n),this.negative=1,this;if(this.words[0]-=n,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var l=0;l<this.length&&this.words[l]<0;l++)this.words[l]+=67108864,this.words[l+1]-=1;return this.strip()},i.prototype.addn=function(n){return this.clone().iaddn(n)},i.prototype.subn=function(n){return this.clone().isubn(n)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(n,l,r){var e,t,o=n.length+r;this._expand(o);var a=0;for(e=0;e<n.length;e++){t=(0|this.words[e+r])+a;var b=(0|n.words[e])*l;a=((t-=67108863&b)>>26)-(b/67108864|0),this.words[e+r]=67108863&t}for(;e<this.length-r;e++)a=(t=(0|this.words[e+r])+a)>>26,this.words[e+r]=67108863&t;if(a===0)return this.strip();for(d(a===-1),a=0,e=0;e<this.length;e++)a=(t=-(0|this.words[e])+a)>>26,this.words[e]=67108863&t;return this.negative=1,this.strip()},i.prototype._wordDiv=function(n,l){var r=(this.length,n.length),e=this.clone(),t=n,o=0|t.words[t.length-1];(r=26-this._countBits(o))!=0&&(t=t.ushln(r),e.iushln(r),o=0|t.words[t.length-1]);var a,b=e.length-t.length;if(l!=="mod"){(a=new i(null)).length=b+1,a.words=new Array(a.length);for(var I=0;I<a.length;I++)a.words[I]=0}var x=e.clone()._ishlnsubmul(t,1,b);x.negative===0&&(e=x,a&&(a.words[b]=1));for(var P=b-1;P>=0;P--){var k=67108864*(0|e.words[t.length+P])+(0|e.words[t.length+P-1]);for(k=Math.min(k/o|0,67108863),e._ishlnsubmul(t,k,P);e.negative!==0;)k--,e.negative=0,e._ishlnsubmul(t,1,P),e.isZero()||(e.negative^=1);a&&(a.words[P]=k)}return a&&a.strip(),e.strip(),l!=="div"&&r!==0&&e.iushrn(r),{div:a||null,mod:e}},i.prototype.divmod=function(n,l,r){return d(!n.isZero()),this.isZero()?{div:new i(0),mod:new i(0)}:this.negative!==0&&n.negative===0?(o=this.neg().divmod(n,l),l!=="mod"&&(e=o.div.neg()),l!=="div"&&(t=o.mod.neg(),r&&t.negative!==0&&t.iadd(n)),{div:e,mod:t}):this.negative===0&&n.negative!==0?(o=this.divmod(n.neg(),l),l!=="mod"&&(e=o.div.neg()),{div:e,mod:o.mod}):(this.negative&n.negative)!=0?(o=this.neg().divmod(n.neg(),l),l!=="div"&&(t=o.mod.neg(),r&&t.negative!==0&&t.isub(n)),{div:o.div,mod:t}):n.length>this.length||this.cmp(n)<0?{div:new i(0),mod:this}:n.length===1?l==="div"?{div:this.divn(n.words[0]),mod:null}:l==="mod"?{div:null,mod:new i(this.modn(n.words[0]))}:{div:this.divn(n.words[0]),mod:new i(this.modn(n.words[0]))}:this._wordDiv(n,l);var e,t,o},i.prototype.div=function(n){return this.divmod(n,"div",!1).div},i.prototype.mod=function(n){return this.divmod(n,"mod",!1).mod},i.prototype.umod=function(n){return this.divmod(n,"mod",!0).mod},i.prototype.divRound=function(n){var l=this.divmod(n);if(l.mod.isZero())return l.div;var r=l.div.negative!==0?l.mod.isub(n):l.mod,e=n.ushrn(1),t=n.andln(1),o=r.cmp(e);return o<0||t===1&&o===0?l.div:l.div.negative!==0?l.div.isubn(1):l.div.iaddn(1)},i.prototype.modn=function(n){d(n<=67108863);for(var l=67108864%n,r=0,e=this.length-1;e>=0;e--)r=(l*r+(0|this.words[e]))%n;return r},i.prototype.idivn=function(n){d(n<=67108863);for(var l=0,r=this.length-1;r>=0;r--){var e=(0|this.words[r])+67108864*l;this.words[r]=e/n|0,l=e%n}return this.strip()},i.prototype.divn=function(n){return this.clone().idivn(n)},i.prototype.egcd=function(n){d(n.negative===0),d(!n.isZero());var l=this,r=n.clone();l=l.negative!==0?l.umod(n):l.clone();for(var e=new i(1),t=new i(0),o=new i(0),a=new i(1),b=0;l.isEven()&&r.isEven();)l.iushrn(1),r.iushrn(1),++b;for(var I=r.clone(),x=l.clone();!l.isZero();){for(var P=0,k=1;(l.words[0]&k)==0&&P<26;++P,k<<=1);if(P>0)for(l.iushrn(P);P-- >0;)(e.isOdd()||t.isOdd())&&(e.iadd(I),t.isub(x)),e.iushrn(1),t.iushrn(1);for(var Z=0,$=1;(r.words[0]&$)==0&&Z<26;++Z,$<<=1);if(Z>0)for(r.iushrn(Z);Z-- >0;)(o.isOdd()||a.isOdd())&&(o.iadd(I),a.isub(x)),o.iushrn(1),a.iushrn(1);l.cmp(r)>=0?(l.isub(r),e.isub(o),t.isub(a)):(r.isub(l),o.isub(e),a.isub(t))}return{a:o,b:a,gcd:r.iushln(b)}},i.prototype._invmp=function(n){d(n.negative===0),d(!n.isZero());var l=this,r=n.clone();l=l.negative!==0?l.umod(n):l.clone();for(var e,t=new i(1),o=new i(0),a=r.clone();l.cmpn(1)>0&&r.cmpn(1)>0;){for(var b=0,I=1;(l.words[0]&I)==0&&b<26;++b,I<<=1);if(b>0)for(l.iushrn(b);b-- >0;)t.isOdd()&&t.iadd(a),t.iushrn(1);for(var x=0,P=1;(r.words[0]&P)==0&&x<26;++x,P<<=1);if(x>0)for(r.iushrn(x);x-- >0;)o.isOdd()&&o.iadd(a),o.iushrn(1);l.cmp(r)>=0?(l.isub(r),t.isub(o)):(r.isub(l),o.isub(t))}return(e=l.cmpn(1)===0?t:o).cmpn(0)<0&&e.iadd(n),e},i.prototype.gcd=function(n){if(this.isZero())return n.abs();if(n.isZero())return this.abs();var l=this.clone(),r=n.clone();l.negative=0,r.negative=0;for(var e=0;l.isEven()&&r.isEven();e++)l.iushrn(1),r.iushrn(1);for(;;){for(;l.isEven();)l.iushrn(1);for(;r.isEven();)r.iushrn(1);var t=l.cmp(r);if(t<0){var o=l;l=r,r=o}else if(t===0||r.cmpn(1)===0)break;l.isub(r)}return r.iushln(e)},i.prototype.invm=function(n){return this.egcd(n).a.umod(n)},i.prototype.isEven=function(){return(1&this.words[0])==0},i.prototype.isOdd=function(){return(1&this.words[0])==1},i.prototype.andln=function(n){return this.words[0]&n},i.prototype.bincn=function(n){d(typeof n=="number");var l=n%26,r=(n-l)/26,e=1<<l;if(this.length<=r)return this._expand(r+1),this.words[r]|=e,this;for(var t=e,o=r;t!==0&&o<this.length;o++){var a=0|this.words[o];t=(a+=t)>>>26,a&=67108863,this.words[o]=a}return t!==0&&(this.words[o]=t,this.length++),this},i.prototype.isZero=function(){return this.length===1&&this.words[0]===0},i.prototype.cmpn=function(n){var l,r=n<0;if(this.negative!==0&&!r)return-1;if(this.negative===0&&r)return 1;if(this.strip(),this.length>1)l=1;else{r&&(n=-n),d(n<=67108863,"Number is too big");var e=0|this.words[0];l=e===n?0:e<n?-1:1}return this.negative!==0?0|-l:l},i.prototype.cmp=function(n){if(this.negative!==0&&n.negative===0)return-1;if(this.negative===0&&n.negative!==0)return 1;var l=this.ucmp(n);return this.negative!==0?0|-l:l},i.prototype.ucmp=function(n){if(this.length>n.length)return 1;if(this.length<n.length)return-1;for(var l=0,r=this.length-1;r>=0;r--){var e=0|this.words[r],t=0|n.words[r];if(e!==t){e<t?l=-1:e>t&&(l=1);break}}return l},i.prototype.gtn=function(n){return this.cmpn(n)===1},i.prototype.gt=function(n){return this.cmp(n)===1},i.prototype.gten=function(n){return this.cmpn(n)>=0},i.prototype.gte=function(n){return this.cmp(n)>=0},i.prototype.ltn=function(n){return this.cmpn(n)===-1},i.prototype.lt=function(n){return this.cmp(n)===-1},i.prototype.lten=function(n){return this.cmpn(n)<=0},i.prototype.lte=function(n){return this.cmp(n)<=0},i.prototype.eqn=function(n){return this.cmpn(n)===0},i.prototype.eq=function(n){return this.cmp(n)===0},i.red=function(n){return new et(n)},i.prototype.toRed=function(n){return d(!this.red,"Already a number in reduction context"),d(this.negative===0,"red works only with positives"),n.convertTo(this)._forceRed(n)},i.prototype.fromRed=function(){return d(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(n){return this.red=n,this},i.prototype.forceRed=function(n){return d(!this.red,"Already a number in reduction context"),this._forceRed(n)},i.prototype.redAdd=function(n){return d(this.red,"redAdd works only with red numbers"),this.red.add(this,n)},i.prototype.redIAdd=function(n){return d(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,n)},i.prototype.redSub=function(n){return d(this.red,"redSub works only with red numbers"),this.red.sub(this,n)},i.prototype.redISub=function(n){return d(this.red,"redISub works only with red numbers"),this.red.isub(this,n)},i.prototype.redShl=function(n){return d(this.red,"redShl works only with red numbers"),this.red.shl(this,n)},i.prototype.redMul=function(n){return d(this.red,"redMul works only with red numbers"),this.red._verify2(this,n),this.red.mul(this,n)},i.prototype.redIMul=function(n){return d(this.red,"redMul works only with red numbers"),this.red._verify2(this,n),this.red.imul(this,n)},i.prototype.redSqr=function(){return d(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return d(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return d(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return d(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return d(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(n){return d(this.red&&!n.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,n)};var S={k256:null,p224:null,p192:null,p25519:null};function q(n,l){this.name=n,this.p=new i(l,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function G(){q.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function U(){q.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function H(){q.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function Q(){q.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function et(n){if(typeof n=="string"){var l=i._prime(n);this.m=l.p,this.prime=l}else d(n.gtn(1),"modulus must be greater than 1"),this.m=n,this.prime=null}function it(n){et.call(this,n),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}q.prototype._tmp=function(){var n=new i(null);return n.words=new Array(Math.ceil(this.n/13)),n},q.prototype.ireduce=function(n){var l,r=n;do this.split(r,this.tmp),l=(r=(r=this.imulK(r)).iadd(this.tmp)).bitLength();while(l>this.n);var e=l<this.n?-1:r.ucmp(this.p);return e===0?(r.words[0]=0,r.length=1):e>0?r.isub(this.p):r.strip(),r},q.prototype.split=function(n,l){n.iushrn(this.n,0,l)},q.prototype.imulK=function(n){return n.imul(this.k)},g(G,q),G.prototype.split=function(n,l){for(var r=4194303,e=Math.min(n.length,9),t=0;t<e;t++)l.words[t]=n.words[t];if(l.length=e,n.length<=9)return n.words[0]=0,void(n.length=1);var o=n.words[9];for(l.words[l.length++]=o&r,t=10;t<n.length;t++){var a=0|n.words[t];n.words[t-10]=(a&r)<<4|o>>>22,o=a}o>>>=22,n.words[t-10]=o,o===0&&n.length>10?n.length-=10:n.length-=9},G.prototype.imulK=function(n){n.words[n.length]=0,n.words[n.length+1]=0,n.length+=2;for(var l=0,r=0;r<n.length;r++){var e=0|n.words[r];l+=977*e,n.words[r]=67108863&l,l=64*e+(l/67108864|0)}return n.words[n.length-1]===0&&(n.length--,n.words[n.length-1]===0&&n.length--),n},g(U,q),g(H,q),g(Q,q),Q.prototype.imulK=function(n){for(var l=0,r=0;r<n.length;r++){var e=19*(0|n.words[r])+l,t=67108863&e;e>>>=26,n.words[r]=t,l=e}return l!==0&&(n.words[n.length++]=l),n},i._prime=function(n){if(S[n])return S[n];var l;if(n==="k256")l=new G;else if(n==="p224")l=new U;else if(n==="p192")l=new H;else{if(n!=="p25519")throw new Error("Unknown prime "+n);l=new Q}return S[n]=l,l},et.prototype._verify1=function(n){d(n.negative===0,"red works only with positives"),d(n.red,"red works only with red numbers")},et.prototype._verify2=function(n,l){d((n.negative|l.negative)==0,"red works only with positives"),d(n.red&&n.red===l.red,"red works only with red numbers")},et.prototype.imod=function(n){return this.prime?this.prime.ireduce(n)._forceRed(this):n.umod(this.m)._forceRed(this)},et.prototype.neg=function(n){return n.isZero()?n.clone():this.m.sub(n)._forceRed(this)},et.prototype.add=function(n,l){this._verify2(n,l);var r=n.add(l);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},et.prototype.iadd=function(n,l){this._verify2(n,l);var r=n.iadd(l);return r.cmp(this.m)>=0&&r.isub(this.m),r},et.prototype.sub=function(n,l){this._verify2(n,l);var r=n.sub(l);return r.cmpn(0)<0&&r.iadd(this.m),r._forceRed(this)},et.prototype.isub=function(n,l){this._verify2(n,l);var r=n.isub(l);return r.cmpn(0)<0&&r.iadd(this.m),r},et.prototype.shl=function(n,l){return this._verify1(n),this.imod(n.ushln(l))},et.prototype.imul=function(n,l){return this._verify2(n,l),this.imod(n.imul(l))},et.prototype.mul=function(n,l){return this._verify2(n,l),this.imod(n.mul(l))},et.prototype.isqr=function(n){return this.imul(n,n.clone())},et.prototype.sqr=function(n){return this.mul(n,n)},et.prototype.sqrt=function(n){if(n.isZero())return n.clone();var l=this.m.andln(3);if(d(l%2==1),l===3){var r=this.m.add(new i(1)).iushrn(2);return this.pow(n,r)}for(var e=this.m.subn(1),t=0;!e.isZero()&&e.andln(1)===0;)t++,e.iushrn(1);d(!e.isZero());var o=new i(1).toRed(this),a=o.redNeg(),b=this.m.subn(1).iushrn(1),I=this.m.bitLength();for(I=new i(2*I*I).toRed(this);this.pow(I,b).cmp(a)!==0;)I.redIAdd(a);for(var x=this.pow(I,e),P=this.pow(n,e.addn(1).iushrn(1)),k=this.pow(n,e),Z=t;k.cmp(o)!==0;){for(var $=k,at=0;$.cmp(o)!==0;at++)$=$.redSqr();d(at<Z);var st=this.pow(x,new i(1).iushln(Z-at-1));P=P.redMul(st),x=st.redSqr(),k=k.redMul(x),Z=at}return P},et.prototype.invm=function(n){var l=n._invmp(this.m);return l.negative!==0?(l.negative=0,this.imod(l).redNeg()):this.imod(l)},et.prototype.pow=function(n,l){if(l.isZero())return new i(1);if(l.cmpn(1)===0)return n.clone();var r=new Array(16);r[0]=new i(1).toRed(this),r[1]=n;for(var e=2;e<r.length;e++)r[e]=this.mul(r[e-1],n);var t=r[0],o=0,a=0,b=l.bitLength()%26;for(b===0&&(b=26),e=l.length-1;e>=0;e--){for(var I=l.words[e],x=b-1;x>=0;x--){var P=I>>x&1;t!==r[0]&&(t=this.sqr(t)),P!==0||o!==0?(o<<=1,o|=P,(++a==4||e===0&&x===0)&&(t=this.mul(t,r[o]),a=0,o=0)):a=0}b=26}return t},et.prototype.convertTo=function(n){var l=n.umod(this.m);return l===n?l.clone():l},et.prototype.convertFrom=function(n){var l=n.clone();return l.red=null,l},i.mont=function(n){return new it(n)},g(it,et),it.prototype.convertTo=function(n){return this.imod(n.ushln(this.shift))},it.prototype.convertFrom=function(n){var l=this.imod(n.mul(this.rinv));return l.red=null,l},it.prototype.imul=function(n,l){if(n.isZero()||l.isZero())return n.words[0]=0,n.length=1,n;var r=n.imul(l),e=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),t=r.isub(e).iushrn(this.shift),o=t;return t.cmp(this.m)>=0?o=t.isub(this.m):t.cmpn(0)<0&&(o=t.iadd(this.m)),o._forceRed(this)},it.prototype.mul=function(n,l){if(n.isZero()||l.isZero())return new i(0)._forceRed(this);var r=n.mul(l),e=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),t=r.isub(e).iushrn(this.shift),o=t;return t.cmp(this.m)>=0?o=t.isub(this.m):t.cmpn(0)<0&&(o=t.iadd(this.m)),o._forceRed(this)},it.prototype.invm=function(n){return this.imod(n._invmp(this.m).mul(this.r2))._forceRed(this)}})(_=s.nmd(_),this)},(_,E,s)=>{var y=s(15);_.exports=function(v){return typeof v!="string"?v:y(v)?v.slice(2):v}},_=>{_.exports=function(E){if(typeof E!="string")throw new Error("[is-hex-prefixed] value must be type 'string', is currently type "+typeof E+", while checking isHexPrefixed.");return E.slice(0,2)==="0x"}},(_,E,s)=>{s.r(E),s.d(E,{default:()=>y}),s(17);const y=window.crypto},(_,E,s)=>{var y,v;s.r(E),s.d(E,{default:()=>d}),y=typeof self<"u"?self:void 0,v=function(g){if(typeof Promise!="function")throw"Promise support required";var i=g.crypto||g.msCrypto;if(i){var u=i.subtle||i.webkitSubtle;if(u){var h=g.Crypto||i.constructor||Object,c=g.SubtleCrypto||u.constructor||Object,p=(g.CryptoKey||g.Key,g.navigator.userAgent.indexOf("Edge/")>-1),f=!!g.msCrypto&&!p,m=!i.subtle&&!!i.webkitSubtle;if(f||m){var w={KoZIhvcNAQEB:"1.2.840.113549.1.1.1"},A={"1.2.840.113549.1.1.1":"KoZIhvcNAQEB"};if(["generateKey","importKey","unwrapKey"].forEach(function(a){var b=u[a];u[a]=function(I,x,P){var k,Z,$,at,st=[].slice.call(arguments);switch(a){case"generateKey":k=U(I),Z=x,$=P;break;case"importKey":k=U(P),Z=st[3],$=st[4],I==="jwk"&&((x=Q(x)).alg||(x.alg=H(k)),x.key_ops||(x.key_ops=x.kty!=="oct"?"d"in x?$.filter(o):$.filter(t):$.slice()),st[1]=et(x));break;case"unwrapKey":k=st[4],Z=st[5],$=st[6],st[2]=P._key}if(a==="generateKey"&&k.name==="HMAC"&&k.hash)return k.length=k.length||{"SHA-1":512,"SHA-256":512,"SHA-384":1024,"SHA-512":1024}[k.hash.name],u.importKey("raw",i.getRandomValues(new Uint8Array(k.length+7>>3)),k,Z,$);if(m&&a==="generateKey"&&k.name==="RSASSA-PKCS1-v1_5"&&(!k.modulusLength||k.modulusLength>=2048))return(I=U(I)).name="RSAES-PKCS1-v1_5",delete I.hash,u.generateKey(I,!0,["encrypt","decrypt"]).then(function(yt){return Promise.all([u.exportKey("jwk",yt.publicKey),u.exportKey("jwk",yt.privateKey)])}).then(function(yt){return yt[0].alg=yt[1].alg=H(k),yt[0].key_ops=$.filter(t),yt[1].key_ops=$.filter(o),Promise.all([u.importKey("jwk",yt[0],k,!0,yt[0].key_ops),u.importKey("jwk",yt[1],k,Z,yt[1].key_ops)])}).then(function(yt){return{publicKey:yt[0],privateKey:yt[1]}});if((m||f&&(k.hash||{}).name==="SHA-1")&&a==="importKey"&&I==="jwk"&&k.name==="HMAC"&&x.kty==="oct")return u.importKey("raw",q(S(x.k)),P,st[3],st[4]);if(m&&a==="importKey"&&(I==="spki"||I==="pkcs8"))return u.importKey("jwk",it(x),P,st[3],st[4]);if(f&&a==="unwrapKey")return u.decrypt(st[3],P,x).then(function(yt){return u.importKey(I,yt,st[4],st[5],st[6])});try{at=b.apply(u,st)}catch(yt){return Promise.reject(yt)}return f&&(at=new Promise(function(yt,Bt){at.onabort=at.onerror=function(Lt){Bt(Lt)},at.oncomplete=function(Lt){yt(Lt.target.result)}})),at=at.then(function(yt){return k.name==="HMAC"&&(k.length||(k.length=8*yt.algorithm.length)),k.name.search("RSA")==0&&(k.modulusLength||(k.modulusLength=(yt.publicKey||yt).algorithm.modulusLength),k.publicExponent||(k.publicExponent=(yt.publicKey||yt).algorithm.publicExponent)),yt.publicKey&&yt.privateKey?{publicKey:new e(yt.publicKey,k,Z,$.filter(t)),privateKey:new e(yt.privateKey,k,Z,$.filter(o))}:new e(yt,k,Z,$)})}}),["exportKey","wrapKey"].forEach(function(a){var b=u[a];u[a]=function(I,x,P){var k,Z=[].slice.call(arguments);switch(a){case"exportKey":Z[1]=x._key;break;case"wrapKey":Z[1]=x._key,Z[2]=P._key}if((m||f&&(x.algorithm.hash||{}).name==="SHA-1")&&a==="exportKey"&&I==="jwk"&&x.algorithm.name==="HMAC"&&(Z[0]="raw"),!m||a!=="exportKey"||I!=="spki"&&I!=="pkcs8"||(Z[0]="jwk"),f&&a==="wrapKey")return u.exportKey(I,x).then(function($){return I==="jwk"&&($=q(unescape(encodeURIComponent(JSON.stringify(Q($)))))),u.encrypt(Z[3],P,$)});try{k=b.apply(u,Z)}catch($){return Promise.reject($)}return f&&(k=new Promise(function($,at){k.onabort=k.onerror=function(st){at(st)},k.oncomplete=function(st){$(st.target.result)}})),a==="exportKey"&&I==="jwk"&&(k=k.then(function($){return(m||f&&(x.algorithm.hash||{}).name==="SHA-1")&&x.algorithm.name==="HMAC"?{kty:"oct",alg:H(x.algorithm),key_ops:x.usages.slice(),ext:!0,k:M(G($))}:(($=Q($)).alg||($.alg=H(x.algorithm)),$.key_ops||($.key_ops=x.type==="public"?x.usages.filter(t):x.type==="private"?x.usages.filter(o):x.usages.slice()),$)})),!m||a!=="exportKey"||I!=="spki"&&I!=="pkcs8"||(k=k.then(function($){return n(Q($))})),k}}),["encrypt","decrypt","sign","verify"].forEach(function(a){var b=u[a];u[a]=function(I,x,P,k){if(f&&(!P.byteLength||k&&!k.byteLength))throw new Error("Empy input is not allowed");var Z,$=[].slice.call(arguments),at=U(I);if(f&&a==="decrypt"&&at.name==="AES-GCM"){var st=I.tagLength>>3;$[2]=(P.buffer||P).slice(0,P.byteLength-st),I.tag=(P.buffer||P).slice(P.byteLength-st)}$[1]=x._key;try{Z=b.apply(u,$)}catch(yt){return Promise.reject(yt)}return f&&(Z=new Promise(function(yt,Bt){Z.onabort=Z.onerror=function(Lt){Bt(Lt)},Z.oncomplete=function(Lt){if(Lt=Lt.target.result,a==="encrypt"&&Lt instanceof AesGcmEncryptResult){var wt=Lt.ciphertext,gt=Lt.tag;(Lt=new Uint8Array(wt.byteLength+gt.byteLength)).set(new Uint8Array(wt),0),Lt.set(new Uint8Array(gt),wt.byteLength),Lt=Lt.buffer}yt(Lt)}})),Z}}),f){var C=u.digest;u.digest=function(a,b){if(!b.byteLength)throw new Error("Empy input is not allowed");var I;try{I=C.call(u,a,b)}catch(x){return Promise.reject(x)}return I=new Promise(function(x,P){I.onabort=I.onerror=function(k){P(k)},I.oncomplete=function(k){x(k.target.result)}})},g.crypto=Object.create(i,{getRandomValues:{value:function(a){return i.getRandomValues(a)}},subtle:{value:u}}),g.CryptoKey=e}m&&(i.subtle=u,g.Crypto=h,g.SubtleCrypto=c,g.CryptoKey=e)}}}function M(a){return btoa(a).replace(/\=+$/,"").replace(/\+/g,"-").replace(/\//g,"_")}function S(a){return a=(a+="===").slice(0,-a.length%4),atob(a.replace(/-/g,"+").replace(/_/g,"/"))}function q(a){for(var b=new Uint8Array(a.length),I=0;I<a.length;I++)b[I]=a.charCodeAt(I);return b}function G(a){return a instanceof ArrayBuffer&&(a=new Uint8Array(a)),String.fromCharCode.apply(String,a)}function U(a){var b={name:(a.name||a||"").toUpperCase().replace("V","v")};switch(b.name){case"SHA-1":case"SHA-256":case"SHA-384":case"SHA-512":break;case"AES-CBC":case"AES-GCM":case"AES-KW":a.length&&(b.length=a.length);break;case"HMAC":a.hash&&(b.hash=U(a.hash)),a.length&&(b.length=a.length);break;case"RSAES-PKCS1-v1_5":a.publicExponent&&(b.publicExponent=new Uint8Array(a.publicExponent)),a.modulusLength&&(b.modulusLength=a.modulusLength);break;case"RSASSA-PKCS1-v1_5":case"RSA-OAEP":a.hash&&(b.hash=U(a.hash)),a.publicExponent&&(b.publicExponent=new Uint8Array(a.publicExponent)),a.modulusLength&&(b.modulusLength=a.modulusLength);break;default:throw new SyntaxError("Bad algorithm name")}return b}function H(a){return{HMAC:{"SHA-1":"HS1","SHA-256":"HS256","SHA-384":"HS384","SHA-512":"HS512"},"RSASSA-PKCS1-v1_5":{"SHA-1":"RS1","SHA-256":"RS256","SHA-384":"RS384","SHA-512":"RS512"},"RSAES-PKCS1-v1_5":{"":"RSA1_5"},"RSA-OAEP":{"SHA-1":"RSA-OAEP","SHA-256":"RSA-OAEP-256"},"AES-KW":{128:"A128KW",192:"A192KW",256:"A256KW"},"AES-GCM":{128:"A128GCM",192:"A192GCM",256:"A256GCM"},"AES-CBC":{128:"A128CBC",192:"A192CBC",256:"A256CBC"}}[a.name][(a.hash||{}).name||a.length||""]}function Q(a){(a instanceof ArrayBuffer||a instanceof Uint8Array)&&(a=JSON.parse(decodeURIComponent(escape(G(a)))));var b={kty:a.kty,alg:a.alg,ext:a.ext||a.extractable};switch(b.kty){case"oct":b.k=a.k;case"RSA":["n","e","d","p","q","dp","dq","qi","oth"].forEach(function(I){I in a&&(b[I]=a[I])});break;default:throw new TypeError("Unsupported key type")}return b}function et(a){var b=Q(a);return f&&(b.extractable=b.ext,delete b.ext),q(unescape(encodeURIComponent(JSON.stringify(b)))).buffer}function it(a){var b=l(a),I=!1;b.length>2&&(I=!0,b.shift());var x={ext:!0};if(b[0][0]!=="1.2.840.113549.1.1.1")throw new TypeError("Unsupported key type");var P=["n","e","d","p","q","dp","dq","qi"],k=l(b[1]);I&&k.shift();for(var Z=0;Z<k.length;Z++)k[Z][0]||(k[Z]=k[Z].subarray(1)),x[P[Z]]=M(G(k[Z]));return x.kty="RSA",x}function n(a){var b,I=[["",null]],x=!1;if(a.kty!=="RSA")throw new TypeError("Unsupported key type");for(var P=["n","e","d","p","q","dp","dq","qi"],k=[],Z=0;Z<P.length&&P[Z]in a;Z++){var $=k[Z]=q(S(a[P[Z]]));128&$[0]&&(k[Z]=new Uint8Array($.length+1),k[Z].set($,1))}return k.length>2&&(x=!0,k.unshift(new Uint8Array([0]))),I[0][0]="1.2.840.113549.1.1.1",b=k,I.push(new Uint8Array(r(b)).buffer),x?I.unshift(new Uint8Array([0])):I[1]={tag:3,value:I[1]},new Uint8Array(r(I)).buffer}function l(a,b){if(a instanceof ArrayBuffer&&(a=new Uint8Array(a)),b||(b={pos:0,end:a.length}),b.end-b.pos<2||b.end>a.length)throw new RangeError("Malformed DER");var I,x=a[b.pos++],P=a[b.pos++];if(P>=128){if(P&=127,b.end-b.pos<P)throw new RangeError("Malformed DER");for(var k=0;P--;)k<<=8,k|=a[b.pos++];P=k}if(b.end-b.pos<P)throw new RangeError("Malformed DER");switch(x){case 2:I=a.subarray(b.pos,b.pos+=P);break;case 3:if(a[b.pos++])throw new Error("Unsupported bit string");P--;case 4:I=new Uint8Array(a.subarray(b.pos,b.pos+=P)).buffer;break;case 5:I=null;break;case 6:var Z=btoa(G(a.subarray(b.pos,b.pos+=P)));if(!(Z in w))throw new Error("Unsupported OBJECT ID "+Z);I=w[Z];break;case 48:I=[];for(var $=b.pos+P;b.pos<$;)I.push(l(a,b));break;default:throw new Error("Unsupported DER tag 0x"+x.toString(16))}return I}function r(a,b){b||(b=[]);var I=0,x=0,P=b.length+2;if(b.push(0,0),a instanceof Uint8Array){I=2,x=a.length;for(var k=0;k<x;k++)b.push(a[k])}else if(a instanceof ArrayBuffer)for(I=4,x=a.byteLength,a=new Uint8Array(a),k=0;k<x;k++)b.push(a[k]);else if(a===null)I=5,x=0;else if(typeof a=="string"&&a in A){var Z=q(atob(A[a]));for(I=6,x=Z.length,k=0;k<x;k++)b.push(Z[k])}else if(a instanceof Array){for(k=0;k<a.length;k++)r(a[k],b);I=48,x=b.length-P}else{if(!(typeof a=="object"&&a.tag===3&&a.value instanceof ArrayBuffer))throw new Error("Unsupported DER value "+a);for(I=3,x=(a=new Uint8Array(a.value)).byteLength,b.push(0),k=0;k<x;k++)b.push(a[k]);x++}if(x>=128){var $=x;for(x=4,b.splice(P,0,$>>24&255,$>>16&255,$>>8&255,255&$);x>1&&!($>>24);)$<<=8,x--;x<4&&b.splice(P,4-x),x|=128}return b.splice(P-2,2,I,x),b}function e(a,b,I,x){Object.defineProperties(this,{_key:{value:a},type:{value:a.type,enumerable:!0},extractable:{value:I===void 0?a.extractable:I,enumerable:!0},algorithm:{value:b===void 0?a.algorithm:b,enumerable:!0},usages:{value:x===void 0?a.usages:x,enumerable:!0}})}function t(a){return a==="verify"||a==="encrypt"||a==="wrapKey"}function o(a){return a==="sign"||a==="decrypt"||a==="unwrapKey"}},Y.exports?Y.exports=v(y):v(y);const d={}},(_,E,s)=>{const{crc16:y,hexToBytes:v,bytesToHex:d,stringToBytes:g,base64toString:i,stringToBase64:u}=s(2);class h{static isValid(p){try{return new h(p),!0}catch{return!1}}constructor(p){if(p==null)throw"Invalid address";if(p instanceof h)return this.wc=p.wc,this.hashPart=p.hashPart,this.isTestOnly=p.isTestOnly,this.isUserFriendly=p.isUserFriendly,this.isBounceable=p.isBounceable,void(this.isUrlSafe=p.isUrlSafe);if(p.search(/\-/)>0||p.search(/_/)>0?(this.isUrlSafe=!0,p=p.replace(/\-/g,"+").replace(/_/g,"/")):this.isUrlSafe=!1,p.indexOf(":")>-1){const f=p.split(":");if(f.length!==2)throw new Error("Invalid address "+p);const m=parseInt(f[0]);if(m!==0&&m!==-1)throw new Error("Invalid address wc "+p);const w=f[1];if(w.length!==64)throw new Error("Invalid address hex "+p);this.isUserFriendly=!1,this.wc=m,this.hashPart=v(w),this.isTestOnly=!1,this.isBounceable=!1}else{this.isUserFriendly=!0;const f=function(m){if(m.length!==48)throw new Error("User-friendly address should contain strictly 48 characters");const w=g(i(m));if(w.length!==36)throw"Unknown address type: byte length is not equal to 36";const A=w.slice(0,34),C=w.slice(34,36),M=y(A);if(M[0]!==C[0]||M[1]!==C[1])throw"Wrong crc16 hashsum";let S=A[0],q=!1,G=!1;if(128&S&&(q=!0,S^=128),S!==17&&S!==81)throw"Unknown address tag";G=S===17;let U=null;if(U=A[1]===255?-1:A[1],U!==0&&U!==-1)throw new Error("Invalid address wc "+U);return{isTestOnly:q,isBounceable:G,workchain:U,hashPart:A.slice(2,34)}}(p);this.wc=f.workchain,this.hashPart=f.hashPart,this.isTestOnly=f.isTestOnly,this.isBounceable=f.isBounceable}}toString(p,f,m,w){if(p===void 0&&(p=this.isUserFriendly),f===void 0&&(f=this.isUrlSafe),m===void 0&&(m=this.isBounceable),w===void 0&&(w=this.isTestOnly),p){let A=m?17:81;w&&(A|=128);const C=new Int8Array(34);C[0]=A,C[1]=this.wc,C.set(this.hashPart,2);const M=new Uint8Array(36);M.set(C),M.set(y(C),34);let S=u(String.fromCharCode.apply(null,new Uint8Array(M)));return f&&(S=S.replace(/\+/g,"-").replace(/\//g,"_")),S}return this.wc+":"+d(this.hashPart)}}_.exports.default=h},(_,E,s)=>{const{BitString:y}=s(20),{Cell:v}=s(21);_.exports={BitString:y,Cell:v}},(_,E,s)=>{const{BN:y,bytesToHex:v}=s(1);class d{constructor(i){this.array=Uint8Array.from({length:Math.ceil(i/8)},()=>0),this.cursor=0,this.length=i}getFreeBits(){return this.length-this.cursor}getUsedBits(){return this.cursor}getUsedBytes(){return Math.ceil(this.cursor/8)}get(i){return(this.array[i/8|0]&1<<7-i%8)>0}checkRange(i){if(i>this.length)throw Error("BitString overflow")}on(i){this.checkRange(i),this.array[i/8|0]|=1<<7-i%8}off(i){this.checkRange(i),this.array[i/8|0]&=~(1<<7-i%8)}toggle(i){this.checkRange(i),this.array[i/8|0]^=1<<7-i%8}forEach(i){const u=this.cursor;for(let h=0;h<u;h++)i(this.get(h))}writeBit(i){i&&i>0?this.on(this.cursor):this.off(this.cursor),this.cursor=this.cursor+1}writeBitArray(i){for(let u=0;u<i.length;u++)this.writeBit(i[u])}writeUint(i,u){if(i=new y(i),u==0||i.toString(2).length>u){if(i==0)return;throw Error("bitLength is too small for number, got number="+i+",bitLength="+u)}const h=i.toString(2,u);for(let c=0;c<u;c++)this.writeBit(h[c]==1)}writeInt(i,u){if(i=new y(i),u==1){if(i==-1)return void this.writeBit(!0);if(i==0)return void this.writeBit(!1);throw Error("Bitlength is too small for number")}if(i.isNeg()){this.writeBit(!0);const h=new y(2).pow(new y(u-1));this.writeUint(h.add(i),u-1)}else this.writeBit(!1),this.writeUint(i,u-1)}writeUint8(i){this.writeUint(i,8)}writeBytes(i){for(let u=0;u<i.length;u++)this.writeUint8(i[u])}writeString(i){this.writeBytes(new TextEncoder().encode(i))}writeGrams(i){if(i==0)this.writeUint(0,4);else{i=new y(i);const u=Math.ceil(i.toString(16).length/2);this.writeUint(u,4),this.writeUint(i,8*u)}}writeCoins(i){this.writeGrams(i)}writeAddress(i){i==null?this.writeUint(0,2):(this.writeUint(2,2),this.writeUint(0,1),this.writeInt(i.wc,8),this.writeBytes(i.hashPart))}writeBitString(i){i.forEach(u=>{this.writeBit(u)})}clone(){const i=new d(0);return i.array=this.array.slice(0),i.length=this.length,i.cursor=this.cursor,i}toString(){return this.toHex()}getTopUppedArray(){const i=this.clone();let u=8*Math.ceil(i.cursor/8)-i.cursor;if(u>0)for(u-=1,i.writeBit(!0);u>0;)u-=1,i.writeBit(!1);return i.array=i.array.slice(0,Math.ceil(i.cursor/8)),i.array}toHex(){if(this.cursor%4==0){const i=v(this.array.slice(0,Math.ceil(this.cursor/8))).toUpperCase();return this.cursor%8==0?i:i.substr(0,i.length-1)}{const i=this.clone();for(i.writeBit(1);i.cursor%4!=0;)i.writeBit(0);return i.toHex().toUpperCase()+"_"}}setTopUppedArray(i,u=!0){if(this.length=8*i.length,this.array=i,this.cursor=this.length,!u&&this.length){let h=!1;for(let c=0;c<7;c++)if(this.cursor-=1,this.get(this.cursor)){h=!0,this.off(this.cursor);break}if(!h)throw console.log(i,u),new Error("Incorrect TopUppedArray")}}}_.exports={BitString:d}},(_,E,s)=>{const{BitString:y}=s(20),{bytesToBase64:v,compareBytes:d,concatBytes:g,crc32c:i,hexToBytes:u,readNBytesUIntFromArray:h,sha256:c,bytesToHex:p}=s(1),f=u("B5EE9C72"),m=u("68ff65f3"),w=u("acc3a728");class A{constructor(){this.bits=new y(1023),this.refs=[],this.isExotic=!1}static fromBoc(U){return q(U)}static oneFromBoc(U){const H=q(U);if(H.length!==1)throw new Error("expected 1 root cell but have "+H.length);return H[0]}writeCell(U){this.bits.writeBitString(U.bits),this.refs=this.refs.concat(U.refs)}getMaxLevel(){let U=0;for(let H in this.refs){const Q=this.refs[H];Q.getMaxLevel()>U&&(U=Q.getMaxLevel())}return U}isExplicitlyStoredHashes(){return 0}getMaxDepth(){let U=0;if(this.refs.length>0){for(let H in this.refs){const Q=this.refs[H];Q.getMaxDepth()>U&&(U=Q.getMaxDepth())}U+=1}return U}getMaxDepthAsArray(){const U=this.getMaxDepth(),H=Uint8Array.from({length:2},()=>0);return H[1]=U%256,H[0]=Math.floor(U/256),H}getRefsDescriptor(){const U=Uint8Array.from({length:1},()=>0);return U[0]=this.refs.length+8*this.isExotic+32*this.getMaxLevel(),U}getBitsDescriptor(){const U=Uint8Array.from({length:1},()=>0);return U[0]=Math.ceil(this.bits.cursor/8)+Math.floor(this.bits.cursor/8),U}getDataWithDescriptors(){const U=this.getRefsDescriptor(),H=this.getBitsDescriptor(),Q=this.bits.getTopUppedArray();return g(g(U,H),Q)}async getRepr(){const U=[];U.push(this.getDataWithDescriptors());for(let Q in this.refs){const et=this.refs[Q];U.push(et.getMaxDepthAsArray())}for(let Q in this.refs){const et=this.refs[Q];U.push(await et.hash())}let H=new Uint8Array;for(let Q in U){const et=U[Q];H=g(H,et)}return H}async hash(){return new Uint8Array(await c(await this.getRepr()))}print(U){let H=(U=U||"")+"x{"+this.bits.toHex()+`}
`;for(let Q in this.refs)H+=this.refs[Q].print(U+" ");return H}async toBoc(U=!0,H=!0,Q=!1,et=0){const it=await this.treeWalk(),n=it[0],l=it[1],r=n.length,e=r.toString(2).length,t=Math.min(Math.ceil(e/8),1);let o=0,a=[];for(let k of n)a.push(o),o+=await k[1].bocSerializationSize(l,t);const b=o.toString(2).length,I=Math.max(Math.ceil(b/8),1),x=new y(1247*n.length);x.writeBytes(f),x.writeBitArray([U,H,Q]),x.writeUint(et,2),x.writeUint(t,3),x.writeUint8(I),x.writeUint(r,8*t),x.writeUint(1,8*t),x.writeUint(0,8*t),x.writeUint(o,8*I),x.writeUint(0,8*t),U&&n.forEach((k,Z)=>x.writeUint(a[Z],8*I));for(let k of n){const Z=await k[1].serializeForBoc(l,t);x.writeBytes(Z)}let P=x.getTopUppedArray();return H&&(P=g(P,i(P))),P}async serializeForBoc(U,H){const Q=[];if(Q.push(this.getDataWithDescriptors()),this.isExplicitlyStoredHashes())throw new Error("Cell hashes explicit storing is not implemented");for(let it in this.refs){const n=this.refs[it];let l=U[await n.hash()].toString(16);l.length%2&&(l="0"+l);const r=u(l);Q.push(r)}let et=new Uint8Array;for(let it in Q){const n=Q[it];et=g(et,n)}return et}async bocSerializationSize(U,H){return(await this.serializeForBoc(U,H)).length}async treeWalk(){return M(this,[],{})}}async function C(G,U,H){const Q=G[H];for(let it in G)G[it]>Q&&(G[it]=G[it]-1);G[H]=U.length-1;const et=U.splice(Q,1)[0];U.push(et);for(let it of et[1].refs)await C(G,U,await it.hash())}async function M(G,U,H,Q=null){const et=await G.hash();if(et in H)return Q&&H[Q]>H[et]&&await C(H,U,et),[U,H];H[et]=U.length,U.push([et,G]);for(let it of G.refs){const n=await M(it,U,H,et);U=n[0],H=n[1]}return[U,H]}function S(G,U){if(G.length<2)throw"Not enough bytes to encode cell descriptors";const H=G[0],Q=G[1];G=G.slice(2);const et=8&H,it=H%8,n=Math.ceil(Q/2),l=!(Q%2);let r=new A;if(r.isExotic=et,G.length<n+U*it)throw"Not enough bytes to encode cell data";r.bits.setTopUppedArray(G.slice(0,n),l),G=G.slice(n);for(let e=0;e<it;e++)r.refs.push(h(U,G)),G=G.slice(U);return{cell:r,residue:G}}function q(G){typeof G=="string"&&(G=u(G));const U=function(it){if(it.length<5)throw"Not enough bytes for magic prefix";const n=it,l=it.slice(0,4);let r,e,t,o,a;if(it=it.slice(4),d(l,f)){const st=it[0];r=128&st,e=64&st,t=32&st,o=2*(16&st)+(8&st),a=st%8}if(d(l,m)&&(r=1,e=0,t=0,o=0,a=it[0]),d(l,w)&&(r=1,e=1,t=0,o=0,a=it[0]),(it=it.slice(1)).length<1+5*a)throw"Not enough bytes for encoding cells counters";const b=it[0];it=it.slice(1);const I=h(a,it);it=it.slice(a);const x=h(a,it);it=it.slice(a);const P=h(a,it);it=it.slice(a);const k=h(b,it);if((it=it.slice(b)).length<x*a)throw"Not enough bytes for encoding root cells hashes";let Z=[];for(let st=0;st<x;st++)Z.push(h(a,it)),it=it.slice(a);let $=!1;if(r){if($=[],it.length<b*I)throw"Not enough bytes for index encoding";for(let st=0;st<I;st++)$.push(h(b,it)),it=it.slice(b)}if(it.length<k)throw"Not enough bytes for cells data";const at=it.slice(0,k);if(it=it.slice(k),e){if(it.length<4)throw"Not enough bytes for crc32c hashsum";const st=n.length;if(!d(i(n.slice(0,st-4)),it.slice(0,4)))throw"Crc32c hashsum mismatch";it=it.slice(4)}if(it.length)throw"Too much bytes in BoC serialization";return{has_idx:r,hash_crc32:e,has_cache_bits:t,flags:o,size_bytes:a,off_bytes:b,cells_num:I,roots_num:x,absent_num:P,tot_cells_size:k,root_list:Z,index:$,cells_data:at}}(G);let H=U.cells_data,Q=[];for(let it=0;it<U.cells_num;it++){let n=S(H,U.size_bytes);H=n.residue,Q.push(n.cell)}for(let it=U.cells_num-1;it>=0;it--){let n=Q[it];for(let l=0;l<n.refs.length;l++){const r=n.refs[l];if(r<it)throw"Topological order is broken";n.refs[l]=Q[r]}}let et=[];for(let it of U.root_list)et.push(Q[it]);return et}_.exports={Cell:A}},(_,E,s)=>{var y=s(9).Buffer;const{Cell:v}=s(19),{Address:d,BN:g,bytesToHex:i}=s(1),{Contract:u}=s(23);_.exports=class{constructor(h,c){this.transport=h,this.ton=c,this.ADDRESS_FORMAT_HEX=0,this.ADDRESS_FORMAT_USER_FRIENDLY=1,this.ADDRESS_FORMAT_URL_SAFE=2,this.ADDRESS_FORMAT_BOUNCEABLE=4,this.ADDRESS_FORMAT_TEST_ONLY=8}async getAppConfiguration(){const h=await this.transport.send(224,1,0,0);return{version:h[0]+"."+h[1]+"."+h[2]}}async getPublicKey(h,c){const p=y.alloc(4);p.writeInt32BE(h);const f=await this.transport.send(224,2,c?1:0,0,p),m=f[0];return{publicKey:new Uint8Array(f.slice(1,1+m))}}async getAddress(h,c,p){const f=y.alloc(4);f.writeInt32BE(h);const m=await this.transport.send(224,5,c?1:0,p,f),w=m[0],A=new Uint8Array(m.slice(1,1+w));return{address:new d("0:"+i(A))}}async sign(h,c){const p=y.alloc(4);p.writeInt32BE(h);const f=y.concat([p,y.from(c)]),m=await this.transport.send(224,3,0,0,f),w=m[0];return{signature:m.slice(1,1+w)}}async transfer(h,c,p,f,m,w){const A=await c.createTransferMessage(null,p,f,m,null,3,!0),C=y.alloc(4);C.writeInt32BE(h);const M=y.concat([C,y.from(await A.signingMessage.toBoc())]),S=await this.transport.send(224,4,w,0,M),q=S[0],G=S.slice(1,1+q),U=new Uint8Array(G),H=new v;H.bits.writeBytes(U),H.writeCell(A.signingMessage);let Q=null,et=null,it=null;if(m===0){const t=await c.createStateInit();Q=t.stateInit,et=t.code,it=t.data}const n=await c.getAddress(),l=u.createExternalMessageHeader(n),r=u.createCommonMsgInfo(l,Q,H),e=new Promise(t=>{t({address:n,message:r,body:H,signature:U,signingMessage:A.signingMessage,stateInit:Q,code:et,data:it})});return u.createMethod(this.ton.provider,e)}}},(_,E,s)=>{const{Cell:y}=s(19),{Address:v,bytesToBase64:d,bytesToHex:g}=s(1);class i{constructor(h,c){this.provider=h,this.options=c,this.address=c.address?new v(c.address):null,c.wc||(c.wc=this.address?this.address.wc:0),this.methods={}}async getAddress(){return this.address||(this.address=(await this.createStateInit()).address),this.address}createCodeCell(){if(!this.options.code)throw new Error("Contract: options.code is not defined");return this.options.code}createDataCell(){return new y}async createStateInit(){const h=this.createCodeCell(),c=this.createDataCell(),p=i.createStateInit(h,c),f=await p.hash();return{stateInit:p,address:new v(this.options.wc+":"+g(f)),code:h,data:c}}static createStateInit(h,c,p=null,f=null,m=null){if(p)throw"Library in state init is not implemented";if(f)throw"Split depth in state init is not implemented";if(m)throw"Ticktock in state init is not implemented";const w=new y;return w.bits.writeBitArray([Boolean(f),Boolean(m),Boolean(h),Boolean(c),Boolean(p)]),h&&w.refs.push(h),c&&w.refs.push(c),p&&w.refs.push(p),w}static createInternalMessageHeader(h,c=0,p=!0,f=null,m=!1,w=null,A=null,C=0,M=0,S=0,q=0){const G=new y;if(G.bits.writeBit(!1),G.bits.writeBit(p),f!==null?G.bits.writeBit(f):G.bits.writeBit(new v(h).isBounceable),G.bits.writeBit(m),G.bits.writeAddress(w?new v(w):null),G.bits.writeAddress(new v(h)),G.bits.writeGrams(c),A)throw"Currency collections are not implemented yet";return G.bits.writeBit(Boolean(A)),G.bits.writeGrams(C),G.bits.writeGrams(M),G.bits.writeUint(S,64),G.bits.writeUint(q,32),G}static createExternalMessageHeader(h,c=null,p=0){const f=new y;return f.bits.writeUint(2,2),f.bits.writeAddress(c?new v(c):null),f.bits.writeAddress(new v(h)),f.bits.writeGrams(p),f}static createCommonMsgInfo(h,c=null,p=null){const f=new y;return f.writeCell(h),c?(f.bits.writeBit(!0),f.bits.getFreeBits()-1>=c.bits.getUsedBits()?(f.bits.writeBit(!1),f.writeCell(c)):(f.bits.writeBit(!0),f.refs.push(c))):f.bits.writeBit(!1),p?f.bits.getFreeBits()>=p.bits.getUsedBits()?(f.bits.writeBit(!1),f.writeCell(p)):(f.bits.writeBit(!0),f.refs.push(p)):f.bits.writeBit(!1),f}static createMethod(h,c){return{getQuery:async()=>(await c).message,send:async()=>{const p=await c,f=d(await p.message.toBoc(!1));return h.sendBoc(f)},estimateFee:async()=>{const p=await c,f=p.code?{address:p.address.toString(!0,!0,!1),body:d(await p.body.toBoc(!1)),init_code:d(await p.code.toBoc(!1)),init_data:d(await p.data.toBoc(!1))}:{address:p.address.toString(!0,!0,!0),body:d(await p.body.toBoc(!1))};return h.getEstimateFee(f)}}}}_.exports={Contract:i}},(_,E,s)=>{const y=s(25).default;typeof fetch>"u"&&(fetch=s(26));const v="-9223372036854775808";class d{constructor(i,u){this.host=i||"https://toncenter.com/api/v2/jsonRPC",this.options=u||{}}sendImpl(i,u){const h={"Content-Type":"application/json"};return this.options.apiKey&&(h["X-API-Key"]=this.options.apiKey),fetch(i,{method:"POST",headers:h,body:JSON.stringify(u)}).then(c=>c.json()).then(({result:c,error:p})=>c||Promise.reject(p))}send(i,u){return this.sendImpl(this.host,{id:1,jsonrpc:"2.0",method:i,params:u})}async getAddressInfo(i){return this.send("getAddressInformation",{address:i})}async getExtendedAddressInfo(i){return this.send("getExtendedAddressInformation",{address:i})}async getWalletInfo(i){return this.send("getWalletInformation",{address:i})}async getTransactions(i,u=20,h,c,p,f){return this.send("getTransactions",{address:i,limit:u,lt:h,hash:c,to_lt:p,archival:f})}async getBalance(i){return this.send("getAddressBalance",{address:i})}async sendBoc(i){return this.send("sendBoc",{boc:i})}async sendQuery(i){return this.send("sendQuerySimple",i)}async getEstimateFee(i){return this.send("estimateFee",i)}async call(i,u,h=[]){return this.send("runGetMethod",{address:i,method:u,stack:h})}async call2(i,u,h=[]){const c=await this.send("runGetMethod",{address:i,method:u,stack:h});return y.parseResponse(c)}async getMasterchainInfo(){return this.send("getMasterchainInfo",{})}async getBlockShards(i){return this.send("shards",{seqno:i})}async getBlockTransactions(i,u,h){return this.send("getBlockTransactions",{workchain:i,shard:u,seqno:h})}async getMasterchainBlockTransactions(i){return this.getBlockTransactions(-1,v,i)}async getBlockHeader(i,u,h){return this.send("getBlockHeader",{workchain:i,shard:u,seqno:h})}async getMasterchainBlockHeader(i){return this.getBlockHeader(-1,v,i)}}d.SHARD_ID_ALL=v,_.exports.default=d},(_,E,s)=>{const{BN:y,base64ToBytes:v}=s(1),{Cell:d}=s(19);class g{static parseObject(u){const h=u["@type"];switch(h){case"tvm.list":case"tvm.tuple":return u.elements.map(g.parseObject);case"tvm.cell":return d.oneFromBoc(v(u.bytes));case"tvm.stackEntryCell":return g.parseObject(u.cell);case"tvm.stackEntryTuple":return g.parseObject(u.tuple);case"tvm.stackEntryNumber":return g.parseObject(u.number);case"tvm.numberDecimal":return new y(u.number,10);default:throw new Error("unknown type "+h)}}static parseResponseStack(u){const h=u[0],c=u[1];switch(h){case"num":return new y(c.replace(/0x/,""),16);case"list":case"tuple":return g.parseObject(c);case"cell":const p=v(c.bytes);return d.oneFromBoc(p);default:throw new Error("unknown type "+h)}}static parseResponse(u){if(u.exit_code!==0){const c=new Error("http provider parse response error");throw c.result=u,c}const h=u.stack.map(g.parseResponseStack);return h.length===1?h[0]:h}static makeArg(u){if(u instanceof y||u instanceof Number)return["num",u];throw new Error("unknown arg type "+u)}static makeArgs(u){return u.map(this.makeArg)}}_.exports.default=g},()=>{},(_,E,s)=>{s(19),s(1),s(23);const{SimpleWalletContractR1:y,SimpleWalletContractR2:v,SimpleWalletContractR3:d}=s(28),{WalletV2ContractR1:g,WalletV2ContractR2:i}=s(30),{WalletV3ContractR1:u,WalletV3ContractR2:h}=s(31),{WalletV4ContractR1:c}=s(32),{WalletV4ContractR2:p}=s(33),f={simpleR1:y,simpleR2:v,simpleR3:d,v2R1:g,v2R2:i,v3R1:u,v3R2:h,v4R1:c,v4R2:p},m=[y,v,d,g,i,u,h,c,p];class w{constructor(C){this.provider=C,this.all=f,this.list=m,this.defaultVersion="v3R1",this.default=this.all[this.defaultVersion]}create(C){return new this.default(this.provider,C)}}w.all=f,w.list=m,_.exports.default=w},(_,E,s)=>{const{Cell:y}=s(19),{WalletContract:v}=s(29);_.exports={SimpleWalletContractR1:class extends v{constructor(d,g){g.code=y.oneFromBoc("B5EE9C72410101010044000084FF0020DDA4F260810200D71820D70B1FED44D0D31FD3FFD15112BAF2A122F901541044F910F2A2F80001D31F3120D74A96D307D402FB00DED1A4C8CB1FCBFFC9ED5441FDF089"),super(d,g)}getName(){return"simpleR1"}},SimpleWalletContractR2:class extends v{constructor(d,g){g.code=y.oneFromBoc("B5EE9C724101010100530000A2FF0020DD2082014C97BA9730ED44D0D70B1FE0A4F260810200D71820D70B1FED44D0D31FD3FFD15112BAF2A122F901541044F910F2A2F80001D31F3120D74A96D307D402FB00DED1A4C8CB1FCBFFC9ED54D0E2786F"),super(d,g)}getName(){return"simpleR2"}},SimpleWalletContractR3:class extends v{constructor(d,g){g.code=y.oneFromBoc("B5EE9C7241010101005F0000BAFF0020DD2082014C97BA218201339CBAB19C71B0ED44D0D31FD70BFFE304E0A4F260810200D71820D70B1FED44D0D31FD3FFD15112BAF2A122F901541044F910F2A2F80001D31F3120D74A96D307D402FB00DED1A4C8CB1FCBFFC9ED54B5B86E42"),super(d,g)}getName(){return"simpleR3"}}}},(_,E,s)=>{const{Contract:y}=s(23),{Cell:v}=s(19),{nacl:d,stringToBytes:g,Address:i,BN:u}=s(1);_.exports={WalletContract:class extends y{constructor(h,c){if(!c.publicKey&&!c.address)throw new Error("WalletContract required publicKey or address in options");super(h,c),this.methods={transfer:p=>y.createMethod(h,this.createTransferMessage(p.secretKey,p.toAddress,p.amount,p.seqno,p.payload,p.sendMode,!Boolean(p.secretKey),p.stateInit)),seqno:()=>({call:async()=>{const p=await this.getAddress();let f=null;try{f=(await h.call2(p.toString(),"seqno")).toNumber()}catch{}return f}})},this.deploy=p=>y.createMethod(h,this.createInitExternalMessage(p))}getName(){throw new Error("override me")}createDataCell(){const h=new v;return h.bits.writeUint(0,32),h.bits.writeBytes(this.options.publicKey),h}createSigningMessage(h){h=h||0;const c=new v;return c.bits.writeUint(h,32),c}async createInitExternalMessage(h){if(!this.options.publicKey){const S=d.sign.keyPair.fromSecretKey(h);this.options.publicKey=S.publicKey}const{stateInit:c,address:p,code:f,data:m}=await this.createStateInit(),w=this.createSigningMessage(),A=d.sign.detached(await w.hash(),h),C=new v;C.bits.writeBytes(A),C.writeCell(w);const M=y.createExternalMessageHeader(p);return{address:p,message:y.createCommonMsgInfo(M,c,C),body:C,signingMessage:w,stateInit:c,code:f,data:m}}async createExternalMessage(h,c,p,f=!1){const m=f?new Uint8Array(64):d.sign.detached(await h.hash(),c),w=new v;w.bits.writeBytes(m),w.writeCell(h);let A=null,C=null,M=null;if(p===0){if(!this.options.publicKey){const U=d.sign.keyPair.fromSecretKey(c);this.options.publicKey=U.publicKey}const G=await this.createStateInit();A=G.stateInit,C=G.code,M=G.data}const S=await this.getAddress(),q=y.createExternalMessageHeader(S);return{address:S,message:y.createCommonMsgInfo(q,A,w),body:w,signature:m,signingMessage:h,stateInit:A,code:C,data:M}}async createTransferMessage(h,c,p,f,m="",w=3,A=!1,C=null){let M=new v;m&&(m.refs?M=m:typeof m=="string"?m.length>0&&(M.bits.writeUint(0,32),M.bits.writeString(m)):M.bits.writeBytes(m));const S=y.createInternalMessageHeader(new i(c),new u(p)),q=y.createCommonMsgInfo(S,C,M),G=this.createSigningMessage(f);return G.bits.writeUint8(w),G.refs.push(q),this.createExternalMessage(G,h,f,A)}}}},(_,E,s)=>{const{Cell:y}=s(19),{WalletContract:v}=s(29);class d extends v{createSigningMessage(i){i=i||0;const u=new y;if(u.bits.writeUint(i,32),i===0)for(let h=0;h<32;h++)u.bits.writeBit(1);else{const h=new Date,c=Math.floor(h.getTime()/1e3);u.bits.writeUint(c+60,32)}return u}}_.exports={WalletV2ContractR1:class extends d{constructor(g,i){i.code=y.oneFromBoc("B5EE9C724101010100570000AAFF0020DD2082014C97BA9730ED44D0D70B1FE0A4F2608308D71820D31FD31F01F823BBF263ED44D0D31FD3FFD15131BAF2A103F901541042F910F2A2F800029320D74A96D307D402FB00E8D1A4C8CB1FCBFFC9ED54A1370BB6"),super(g,i)}getName(){return"v2R1"}},WalletV2ContractR2:class extends d{constructor(g,i){i.code=y.oneFromBoc("B5EE9C724101010100630000C2FF0020DD2082014C97BA218201339CBAB19C71B0ED44D0D31FD70BFFE304E0A4F2608308D71820D31FD31F01F823BBF263ED44D0D31FD3FFD15131BAF2A103F901541042F910F2A2F800029320D74A96D307D402FB00E8D1A4C8CB1FCBFFC9ED54044CD7A1"),super(g,i)}getName(){return"v2R2"}}}},(_,E,s)=>{const{Cell:y}=s(19),{WalletContract:v}=s(29);class d extends v{createSigningMessage(i){i=i||0;const u=new y;if(u.bits.writeUint(this.options.walletId,32),i===0)for(let h=0;h<32;h++)u.bits.writeBit(1);else{const h=new Date,c=Math.floor(h.getTime()/1e3);u.bits.writeUint(c+60,32)}return u.bits.writeUint(i,32),u}createDataCell(){const i=new y;return i.bits.writeUint(0,32),i.bits.writeUint(this.options.walletId,32),i.bits.writeBytes(this.options.publicKey),i}}_.exports={WalletV3ContractR1:class extends d{constructor(g,i){i.code=y.oneFromBoc("B5EE9C724101010100620000C0FF0020DD2082014C97BA9730ED44D0D70B1FE0A4F2608308D71820D31FD31FD31FF82313BBF263ED44D0D31FD31FD3FFD15132BAF2A15144BAF2A204F901541055F910F2A3F8009320D74A96D307D402FB00E8D101A4C8CB1FCB1FCBFFC9ED543FBE6EE0"),super(g,i),this.options.walletId||(this.options.walletId=698983191+this.options.wc)}getName(){return"v3R1"}},WalletV3ContractR2:class extends d{constructor(g,i){i.code=y.oneFromBoc("B5EE9C724101010100710000DEFF0020DD2082014C97BA218201339CBAB19F71B0ED44D0D31FD31F31D70BFFE304E0A4F2608308D71820D31FD31FD31FF82313BBF263ED44D0D31FD31FD3FFD15132BAF2A15144BAF2A204F901541055F910F2A3F8009320D74A96D307D402FB00E8D101A4C8CB1FCB1FCBFFC9ED5410BD6DAD"),super(g,i),this.options.walletId||(this.options.walletId=698983191+this.options.wc)}getName(){return"v3R2"}}}},(_,E,s)=>{const{Cell:y}=s(19);s(23),s(1);const{WalletContract:v}=s(29);_.exports={WalletV4ContractR1:class extends v{constructor(d,g){g.code=y.oneFromBoc("B5EE9C72410215010002F5000114FF00F4A413F4BCF2C80B010201200203020148040504F8F28308D71820D31FD31FD31F02F823BBF263ED44D0D31FD31FD3FFF404D15143BAF2A15151BAF2A205F901541064F910F2A3F80024A4C8CB1F5240CB1F5230CBFF5210F400C9ED54F80F01D30721C0009F6C519320D74A96D307D402FB00E830E021C001E30021C002E30001C0039130E30D03A4C8CB1F12CB1FCBFF1112131403EED001D0D3030171B0915BE021D749C120915BE001D31F218210706C7567BD228210626C6E63BDB022821064737472BDB0925F03E002FA403020FA4401C8CA07CBFFC9D0ED44D0810140D721F404305C810108F40A6FA131B3925F05E004D33FC8258210706C7567BA9131E30D248210626C6E63BAE30004060708020120090A005001FA00F404308210706C7567831EB17080185005CB0527CF165003FA02F40012CB69CB1F5210CB3F0052F8276F228210626C6E63831EB17080185005CB0527CF1624FA0214CB6A13CB1F5230CB3F01FA02F4000092821064737472BA8E3504810108F45930ED44D0810140D720C801CF16F400C9ED54821064737472831EB17080185004CB0558CF1622FA0212CB6ACB1FCB3F9410345F04E2C98040FB000201200B0C0059BD242B6F6A2684080A06B90FA0218470D4080847A4937D29910CE6903E9FF9837812801B7810148987159F31840201580D0E0011B8C97ED44D0D70B1F8003DB29DFB513420405035C87D010C00B23281F2FFF274006040423D029BE84C600201200F100019ADCE76A26840206B90EB85FFC00019AF1DF6A26840106B90EB858FC0006ED207FA00D4D422F90005C8CA0715CBFFC9D077748018C8CB05CB0222CF165005FA0214CB6B12CCCCC971FB00C84014810108F451F2A702006C810108D718C8542025810108F451F2A782106E6F746570748018C8CB05CB025004CF16821005F5E100FA0213CB6A12CB1FC971FB00020072810108D718305202810108F459F2A7F82582106473747270748018C8CB05CB025005CF16821005F5E100FA0214CB6A13CB1F12CB3FC973FB00000AF400C9ED5446A9F34F"),super(d,g),this.options.walletId||(this.options.walletId=698983191+this.options.wc),this.methods.getPublicKey=this.getPublicKey.bind(this)}getName(){return"v4R1"}createSigningMessage(d,g){d=d||0;const i=new y;if(i.bits.writeUint(this.options.walletId,32),d===0)for(let u=0;u<32;u++)i.bits.writeBit(1);else{const u=new Date,h=Math.floor(u.getTime()/1e3);i.bits.writeUint(h+60,32)}return i.bits.writeUint(d,32),g||i.bits.writeUint(0,8),i}createDataCell(){const d=new y;return d.bits.writeUint(0,32),d.bits.writeUint(this.options.walletId,32),d.bits.writeBytes(this.options.publicKey),d.bits.writeUint(0,1),d}async getPublicKey(){const d=await this.getAddress();return this.provider.call2(d.toString(),"get_public_key")}}}},(_,E,s)=>{const{Cell:y}=s(19),{Contract:v}=s(23),{Address:d,bytesToHex:g,BN:i,toNano:u}=s(1),{WalletContract:h}=s(29);_.exports={WalletV4ContractR2:class extends h{constructor(c,p){p.code=y.oneFromBoc("B5EE9C72410214010002D4000114FF00F4A413F4BCF2C80B010201200203020148040504F8F28308D71820D31FD31FD31F02F823BBF264ED44D0D31FD31FD3FFF404D15143BAF2A15151BAF2A205F901541064F910F2A3F80024A4C8CB1F5240CB1F5230CBFF5210F400C9ED54F80F01D30721C0009F6C519320D74A96D307D402FB00E830E021C001E30021C002E30001C0039130E30D03A4C8CB1F12CB1FCBFF1011121302E6D001D0D3032171B0925F04E022D749C120925F04E002D31F218210706C7567BD22821064737472BDB0925F05E003FA403020FA4401C8CA07CBFFC9D0ED44D0810140D721F404305C810108F40A6FA131B3925F07E005D33FC8258210706C7567BA923830E30D03821064737472BA925F06E30D06070201200809007801FA00F40430F8276F2230500AA121BEF2E0508210706C7567831EB17080185004CB0526CF1658FA0219F400CB6917CB1F5260CB3F20C98040FB0006008A5004810108F45930ED44D0810140D720C801CF16F400C9ED540172B08E23821064737472831EB17080185005CB055003CF1623FA0213CB6ACB1FCB3FC98040FB00925F03E20201200A0B0059BD242B6F6A2684080A06B90FA0218470D4080847A4937D29910CE6903E9FF9837812801B7810148987159F31840201580C0D0011B8C97ED44D0D70B1F8003DB29DFB513420405035C87D010C00B23281F2FFF274006040423D029BE84C600201200E0F0019ADCE76A26840206B90EB85FFC00019AF1DF6A26840106B90EB858FC0006ED207FA00D4D422F90005C8CA0715CBFFC9D077748018C8CB05CB0222CF165005FA0214CB6B12CCCCC973FB00C84014810108F451F2A7020070810108D718FA00D33FC8542047810108F451F2A782106E6F746570748018C8CB05CB025006CF165004FA0214CB6A12CB1FCB3FC973FB0002006C810108D718FA00D33F305224810108F459F2A782106473747270748018C8CB05CB025005CF165003FA0213CB6ACB1F12CB3FC973FB00000AF400C9ED54696225E5"),super(c,p),this.options.walletId||(this.options.walletId=698983191+this.options.wc),this.methods.deployAndInstallPlugin=f=>v.createMethod(c,this.deployAndInstallPlugin(f)),this.methods.installPlugin=f=>v.createMethod(c,this.installPlugin(f)),this.methods.removePlugin=f=>v.createMethod(c,this.removePlugin(f)),this.methods.getPublicKey=this.getPublicKey.bind(this),this.methods.getWalletId=this.getWalletId.bind(this),this.methods.isPluginInstalled=this.isPluginInstalled.bind(this),this.methods.getPluginsList=this.getPluginsList.bind(this)}getName(){return"v4R2"}createSigningMessage(c,p){c=c||0;const f=new y;if(f.bits.writeUint(this.options.walletId,32),c===0)for(let m=0;m<32;m++)f.bits.writeBit(1);else{const m=new Date,w=Math.floor(m.getTime()/1e3);f.bits.writeUint(w+60,32)}return f.bits.writeUint(c,32),p||f.bits.writeUint(0,8),f}createDataCell(){const c=new y;return c.bits.writeUint(0,32),c.bits.writeUint(this.options.walletId,32),c.bits.writeBytes(this.options.publicKey),c.bits.writeUint(0,1),c}async deployAndInstallPlugin(c){const{secretKey:p,seqno:f,pluginWc:m,amount:w,stateInit:A,body:C}=c,M=this.createSigningMessage(f,!0);return M.bits.writeUint(1,8),M.bits.writeInt(m,8),M.bits.writeGrams(w),M.refs.push(A),M.refs.push(C),this.createExternalMessage(M,p,f,!1)}async _setPlugin(c,p){const{secretKey:f,seqno:m,amount:w,queryId:A}=c,C=new d(c.pluginAddress),M=this.createSigningMessage(m,!0);return M.bits.writeUint(p?2:3,8),M.bits.writeInt(C.wc,8),M.bits.writeBytes(C.hashPart),M.bits.writeGrams(w||u("0.1")),M.bits.writeUint(A||0,64),this.createExternalMessage(M,f,m,!1)}async installPlugin(c){return this._setPlugin(c,!0)}async removePlugin(c){return this._setPlugin(c,!1)}async getWalletId(){const c=await this.getAddress();return(await this.provider.call2(c.toString(),"get_subwallet_id")).toNumber()}async getPublicKey(){const c=await this.getAddress();return this.provider.call2(c.toString(),"get_public_key")}async isPluginInstalled(c){c=new d(c);const p="0x"+g(c.hashPart),f=await this.getAddress();return!(await this.provider.call2(f.toString(),"is_plugin_installed",[["num",c.wc],["num",p]])).isZero()}async getPluginsList(){const c=await this.getAddress();return(await this.provider.call2(c.toString(),"get_plugin_list")).map(p=>p[0].toNumber()+":"+p[1].toString(16))}}}},(_,E,s)=>{const{Cell:y}=s(19),{Address:v,BN:d,toNano:g,bytesToHex:i,hexToBytes:u,nacl:h,stringToBytes:c,bytesToBase64:p,base64ToBytes:f}=s(1);s(23);const{WalletContract:m}=s(29);class w extends m{constructor(C,M){M.code=y.oneFromBoc("B5EE9C7241021E01000261000114FF00F4A413F4BCF2C80B010201200203020148040501F2F28308D71820D31FD31FD31F802403F823BB13F2F2F003802251A9BA1AF2F4802351B7BA1BF2F4801F0BF9015410C5F9101AF2F4F8005057F823F0065098F823F0062071289320D74A8E8BD30731D4511BDB3C12B001E8309229A0DF72FB02069320D74A96D307D402FB00E8D103A4476814154330F004ED541D0202CD0607020120131402012008090201200F100201200A0B002D5ED44D0D31FD31FD3FFD3FFF404FA00F404FA00F404D1803F7007434C0C05C6C2497C0F83E900C0871C02497C0F80074C7C87040A497C1383C00D46D3C00608420BABE7114AC2F6C2497C338200A208420BABE7106EE86BCBD20084AE0840EE6B2802FBCBD01E0C235C62008087E4055040DBE4404BCBD34C7E00A60840DCEAA7D04EE84BCBD34C034C7CC0078C3C412040DD78CA00C0D0E00130875D27D2A1BE95B0C60000C1039480AF00500161037410AF0050810575056001010244300F004ED540201201112004548E1E228020F4966FA520933023BB9131E2209835FA00D113A14013926C21E2B3E6308003502323287C5F287C572FFC4F2FFFD00007E80BD00007E80BD00326000431448A814C4E0083D039BE865BE803444E800A44C38B21400FE809004E0083D10C06002012015160015BDE9F780188242F847800C02012017180201481B1C002DB5187E006D88868A82609E00C6207E00C63F04EDE20B30020158191A0017ADCE76A268699F98EB85FFC00017AC78F6A268698F98EB858FC00011B325FB513435C2C7E00017B1D1BE08E0804230FB50F620002801D0D3030178B0925B7FE0FA4031FA403001F001A80EDAA4"),super(C,M),this.options.walletId||(this.options.walletId=698983191+this.options.wc),this.methods.getPublicKey=this.getPublicKey.bind(this),this.methods.getWalletId=this.getWalletId.bind(this),this.methods.getLiquidBalance=this.getLiquidBalance.bind(this),this.methods.getNominalRestrictedBalance=this.getNominalRestrictedBalance.bind(this),this.methods.getNominalLockedBalance=this.getNominalLockedBalance.bind(this)}getName(){return"lockup-0.1"}createSigningMessage(C,M){C=C||0;const S=new y;if(S.bits.writeUint(this.options.walletId,32),C===0)for(let q=0;q<32;q++)S.bits.writeBit(1);else{const q=new Date,G=Math.floor(q.getTime()/1e3);S.bits.writeUint(G+60,32)}return S.bits.writeUint(C,32),S}createDataCell(){const C=new y;return C.bits.writeUint(0,32),C.bits.writeUint(this.options.walletId,32),C.bits.writeBytes(this.options.publicKey),C.bits.writeBytes(f(this.options.config.config_public_key)),this.options.config.allowed_destinations?(C.bits.writeUint(1,1),C.refs.push(y.oneFromBoc(f(this.options.config.allowed_destinations)))):C.bits.writeUint(0,1),C.bits.writeGrams(0),C.bits.writeUint(0,1),C.bits.writeGrams(0),C.bits.writeUint(0,1),C}async getWalletId(){const C=await this.getAddress();return(await this.provider.call2(C.toString(),"get_subwallet_id")).toNumber()}async getPublicKey(){const C=await this.getAddress();return this.provider.call2(C.toString(),"get_public_key")}async getLiquidBalance(){const C=await this.getBalances();return C[0]-C[1]-C[2]}async getNominalRestrictedBalance(){return await this.getBalances()[1]}async getNominalLockedBalance(){return await this.getBalances()[2]}async getBalances(){const C=await this.getAddress();return this.provider.call2(C.toString(),"get_balances")}}_.exports.default={LockupWalletV1:w,all:{"lockup-0.1":w},list:[w]}},(_,E,s)=>{const{NftCollection:y}=s(36),{NftItem:v}=s(38),{NftMarketplace:d}=s(39),{NftSale:g}=s(40);_.exports.default={NftCollection:y,NftItem:v,NftMarketplace:d,NftSale:g}},(_,E,s)=>{const{Contract:y}=s(23),{Cell:v}=s(19),{Address:d,bytesToBase64:g}=s(1),{parseAddress:i}=s(37),{createOffchainUriCell:u,serializeUri:h,parseOffchainUriCell:c,getRoyaltyParams:p}=s(37);_.exports={NftCollection:class extends y{constructor(f,m){if(m.wc=0,m.code=m.code||v.oneFromBoc("B5EE9C724102140100021F000114FF00F4A413F4BCF2C80B0102016202030202CD04050201200E0F04E7D10638048ADF000E8698180B8D848ADF07D201800E98FE99FF6A2687D20699FEA6A6A184108349E9CA829405D47141BAF8280E8410854658056B84008646582A802E78B127D010A65B509E58FE59F80E78B64C0207D80701B28B9E382F970C892E000F18112E001718112E001F181181981E0024060708090201200A0B00603502D33F5313BBF2E1925313BA01FA00D43028103459F0068E1201A44343C85005CF1613CB3FCCCCCCC9ED54925F05E200A6357003D4308E378040F4966FA5208E2906A4208100FABE93F2C18FDE81019321A05325BBF2F402FA00D43022544B30F00623BA9302A402DE04926C21E2B3E6303250444313C85005CF1613CB3FCCCCCCC9ED54002C323401FA40304144C85005CF1613CB3FCCCCCCC9ED54003C8E15D4D43010344130C85005CF1613CB3FCCCCCCC9ED54E05F04840FF2F00201200C0D003D45AF0047021F005778018C8CB0558CF165004FA0213CB6B12CCCCC971FB008002D007232CFFE0A33C5B25C083232C044FD003D0032C03260001B3E401D3232C084B281F2FFF2742002012010110025BC82DF6A2687D20699FEA6A6A182DE86A182C40043B8B5D31ED44D0FA40D33FD4D4D43010245F04D0D431D430D071C8CB0701CF16CCC980201201213002FB5DAFDA89A1F481A67FA9A9A860D883A1A61FA61FF480610002DB4F47DA89A1F481A67FA9A9A86028BE09E008E003E00B01A500C6E"),m.royalty>1)throw new Error("royalty > 1");m.royaltyBase=1e3,m.royaltyFactor=Math.floor(m.royalty*m.royaltyBase),super(f,m),this.methods.getCollectionData=this.getCollectionData.bind(this),this.methods.getNftItemAddressByIndex=this.getNftItemAddressByIndex.bind(this),this.methods.getNftItemContent=this.getNftItemContent.bind(this),this.methods.getRoyaltyParams=this.getRoyaltyParams.bind(this)}createContentCell(f){const m=u(f.collectionContentUri),w=new v;w.bits.writeBytes(h(f.nftItemContentBaseUri));const A=new v;return A.refs[0]=m,A.refs[1]=w,A}createRoyaltyCell(f){const m=new v;return m.bits.writeUint(f.royaltyFactor,16),m.bits.writeUint(f.royaltyBase,16),m.bits.writeAddress(f.royaltyAddress),m}createDataCell(){const f=new v;return f.bits.writeAddress(this.options.ownerAddress),f.bits.writeUint(0,64),f.refs[0]=this.createContentCell(this.options),f.refs[1]=v.oneFromBoc(this.options.nftItemCodeHex),f.refs[2]=this.createRoyaltyCell(this.options),f}createMintBody(f){const m=new v;m.bits.writeUint(1,32),m.bits.writeUint(f.queryId||0,64),m.bits.writeUint(f.itemIndex,64),m.bits.writeCoins(f.amount);const w=new v;w.bits.writeAddress(f.itemOwnerAddress);const A=new v;return A.bits.writeBytes(h(f.itemContentUri)),w.refs[0]=A,m.refs[0]=w,m}createGetRoyaltyParamsBody(f){const m=new v;return m.bits.writeUint(1765620048,32),m.bits.writeUint(f.queryId||0,64),m}createChangeOwnerBody(f){if(f.newOwnerAddress===void 0)throw new Error("Specify newOwnerAddress");const m=new v;return m.bits.writeUint(3,32),m.bits.writeUint(f.queryId||0,64),m.bits.writeAddress(f.newOwnerAddress),m}createEditContentBody(f){if(f.royalty>1)throw new Error("royalty > 1");f.royaltyBase=1e3,f.royaltyFactor=Math.floor(f.royalty*f.royaltyBase);const m=new v;return m.bits.writeUint(4,32),m.bits.writeUint(f.queryId||0,64),m.refs[0]=this.createContentCell(f),m.refs[1]=this.createRoyaltyCell(f),m}async getCollectionData(){const f=await this.getAddress(),m=await this.provider.call2(f.toString(),"get_collection_data"),w=m[0].toNumber(),A=c(m[1]);return{nextItemIndex:w,ownerAddress:i(m[2]),collectionContentUri:A}}async getNftItemContent(f){const m=await this.getAddress(),w=await f.getData();if(w.isInitialized){const A=await this.provider.call2(m.toString(),"get_nft_content",[["num",w.index],["tvm.Cell",g(await w.contentCell.toBoc(!1))]]);w.contentUri=c(A),delete w.contentCell}return w}async getNftItemAddressByIndex(f){const m=await this.getAddress(),w=await this.provider.call2(m.toString(),"get_nft_address_by_index",[["num",f]]);return i(w)}async getRoyaltyParams(){const f=await this.getAddress();return p(this.provider,f.toString())}}}},(_,E,s)=>{const{base64ToBytes:y,Address:v}=s(1),{Cell:d}=s(19),g=c=>new TextEncoder().encode(encodeURI(c)),i=c=>new TextDecoder().decode(c),u=(c,p,f)=>{let m=BigInt(0);for(let w=0;w<f;w++)m*=BigInt(2),m+=BigInt(c.get(p+w));return m},h=c=>{let p=u(c.bits,3,8);p>BigInt(127)&&(p-=BigInt(256));const f=u(c.bits,11,256);if(p.toString(10)+":"+f.toString(16)=="0:0")return null;const m=p.toString(10)+":"+f.toString(16).padStart(64,"0");return new v(m)};_.exports={SNAKE_DATA_PREFIX:0,CHUNK_DATA_PREFIX:1,ONCHAIN_CONTENT_PREFIX:0,OFFCHAIN_CONTENT_PREFIX:1,parseAddress:h,serializeUri:g,parseUri:i,createOffchainUriCell:c=>{const p=new d;return p.bits.writeUint(1,8),p.bits.writeBytes(g(c)),p},parseOffchainUriCell:c=>{let p=0,f=c;for(;f;)p+=f.bits.array.length,f=f.refs[0];const m=new Uint8Array(p);for(p=0,f=c;f;)m.set(f.bits.array,p),p+=f.bits.array.length,f=f.refs[0];return i(m.slice(1))},getRoyaltyParams:async(c,p)=>{const f=await c.call2(p,"royalty_params"),m=f[0].toNumber(),w=f[1].toNumber();return{royalty:m/w,royaltyBase:w,royaltyFactor:m,royaltyAddress:h(f[2])}}}},(_,E,s)=>{const{Contract:y}=s(23),{Cell:v}=s(19),{Address:d,BN:g}=s(1),{parseAddress:i,getRoyaltyParams:u}=s(37),{parseOffchainUriCell:h}=s(37),c="B5EE9C7241020D010001D0000114FF00F4A413F4BCF2C80B0102016202030202CE04050009A11F9FE00502012006070201200B0C02D70C8871C02497C0F83434C0C05C6C2497C0F83E903E900C7E800C5C75C87E800C7E800C3C00812CE3850C1B088D148CB1C17CB865407E90350C0408FC00F801B4C7F4CFE08417F30F45148C2EA3A1CC840DD78C9004F80C0D0D0D4D60840BF2C9A884AEB8C097C12103FCBC20080900113E910C1C2EBCB8536001F65135C705F2E191FA4021F001FA40D20031FA00820AFAF0801BA121945315A0A1DE22D70B01C300209206A19136E220C2FFF2E192218E3E821005138D91C85009CF16500BCF16712449145446A0708010C8CB055007CF165005FA0215CB6A12CB1FCB3F226EB39458CF17019132E201C901FB00104794102A375BE20A00727082108B77173505C8CBFF5004CF1610248040708010C8CB055007CF165005FA0215CB6A12CB1FCB3F226EB39458CF17019132E201C901FB000082028E3526F0018210D53276DB103744006D71708010C8CB055007CF165005FA0215CB6A12CB1FCB3F226EB39458CF17019132E201C901FB0093303234E25502F003003B3B513434CFFE900835D27080269FC07E90350C04090408F80C1C165B5B60001D00F232CFD633C58073C5B3327B5520BF75041B";class p extends y{constructor(m,w){w.wc=0,w.code=w.code||v.oneFromBoc(c),super(m,w),this.methods.getData=this.getData.bind(this)}createDataCell(){const m=new v;return m.bits.writeUint(this.options.index,64),m.bits.writeAddress(this.options.collectionAddress),m}async getData(){const m=await this.getAddress(),w=await this.provider.call2(m.toString(),"get_nft_data"),A=w[0].toNumber()===-1,C=w[1].toNumber(),M=i(w[2]),S=A?i(w[3]):null,q=w[4];return{isInitialized:A,index:C,collectionAddress:M,ownerAddress:S,contentCell:q,contentUri:A&&M===null?h(q):null}}async createTransferBody(m){const w=new v;return w.bits.writeUint(1607220500,32),w.bits.writeUint(m.queryId||0,64),w.bits.writeAddress(m.newOwnerAddress),w.bits.writeAddress(m.responseAddress),w.bits.writeBit(!1),w.bits.writeCoins(m.forwardAmount||new g(0)),w.bits.writeBit(!1),m.forwardPayload&&w.bits.writeBytes(m.forwardPayload),w}createGetStaticDataBody(m){const w=new v;return w.bits.writeUint(801842850,32),w.bits.writeUint(m.queryId||0,64),w}async getRoyaltyParams(){const m=await this.getAddress();return u(this.provider,m.toString())}}p.codeHex=c,_.exports={NftItem:p}},(_,E,s)=>{const{Contract:y}=s(23),{Cell:v}=s(19);s(1),s(37),_.exports={NftMarketplace:class extends y{constructor(d,g){g.wc=0,g.code=g.code||v.oneFromBoc("B5EE9C7241010401006D000114FF00F4A413F4BCF2C80B01020120020300AAD23221C700915BE0D0D3030171B0915BE0FA40ED44D0FA403012C705F2E19101D31F01C0018E2BFA003001D4D43021F90070C8CA07CBFFC9D077748018C8CB05CB0258CF165004FA0213CB6BCCCCC971FB00915BE20004F2308EF7CCE7"),super(d,g)}createDataCell(){const d=new v;return d.bits.writeAddress(this.options.ownerAddress),d}}}},(_,E,s)=>{const{Contract:y}=s(23),{Cell:v}=s(19),{parseAddress:d}=s(37);s(1);const g="B5EE9C7241020A010001B4000114FF00F4A413F4BCF2C80B01020120020302014804050004F2300202CD0607002FA03859DA89A1F481F481F481F401A861A1F401F481F4006101F7D00E8698180B8D8492F82707D201876A2687D207D207D207D006A18116BA4E10159C71D991B1B2990E382C92F837028916382F970FA01698FC1080289C6C8895D7970FAE99F98FD2018201A642802E78B2801E78B00E78B00FD016664F6AA701363804C9B081B2299823878027003698FE99F9810E000C92F857010C0801F5D41081DCD650029285029185F7970E101E87D007D207D0018384008646582A804E78B28B9D090D0A85AD08A500AFD010AE5B564B8FD80384008646582AC678B2803FD010B65B564B8FD80384008646582A802E78B00FD0109E5B564B8FD80381041082FE61E8A10C00C646582A802E78B117D010A65B509E58F8A40900C8C0029A3110471036454012F004E032363704C0038E4782103B9ACA0015BEF2E1C95312C70559C705B1F2E1CA702082105FCC3D14218010C8CB055006CF1622FA0215CB6A14CB1F14CB3F21CF1601CF16CA0021FA02CA00C98100A0FB00E05F06840FF2F0002ACB3F22CF1658CF16CA0021FA02CA00C98100A0FB00AECABAD1";class i extends y{constructor(h,c){c.wc=0,c.code=c.code||v.oneFromBoc(g),super(h,c),this.methods.getData=this.getData.bind(this)}createDataCell(){const h=new v;h.bits.writeAddress(this.options.marketplaceAddress),h.bits.writeAddress(this.options.nftAddress),h.bits.writeAddress(null),h.bits.writeCoins(this.options.fullPrice);const c=new v;return c.bits.writeCoins(this.options.marketplaceFee),c.bits.writeAddress(this.options.royaltyAddress),c.bits.writeCoins(this.options.royaltyAmount),h.refs[0]=c,h}async getData(){const h=await this.getAddress(),c=await this.provider.call2(h.toString(),"get_sale_data");return{marketplaceAddress:d(c[0]),nftAddress:d(c[1]),nftOwnerAddress:d(c[2]),fullPrice:c[3],marketplaceFee:c[4],royaltyAddress:d(c[5]),royaltyAmount:c[6]}}async createCancelBody(h){const c=new v;return c.bits.writeUint(3,32),c.bits.writeUint(h.queryId||0,64),c}}i.codeHex=g,_.exports={NftSale:i}},(_,E,s)=>{const{JettonMinter:y}=s(42),{JettonWallet:v}=s(43);_.exports.default={JettonMinter:y,JettonWallet:v}},(_,E,s)=>{const{Contract:y}=s(23),{Cell:v}=s(19),{createOffchainUriCell:d,parseOffchainUriCell:g,parseAddress:i}=s(37),{Address:u,BN:h,bytesToBase64:c}=s(1);_.exports={JettonMinter:class extends y{constructor(p,f){f.wc=0,f.code=f.code||v.oneFromBoc("B5EE9C7241020B010001ED000114FF00F4A413F4BCF2C80B0102016202030202CC040502037A60090A03EFD9910E38048ADF068698180B8D848ADF07D201800E98FE99FF6A2687D007D206A6A18400AA9385D47181A9AA8AAE382F9702480FD207D006A18106840306B90FD001812881A28217804502A906428027D012C678B666664F6AA7041083DEECBEF29385D71811A92E001F1811802600271812F82C207F97840607080093DFC142201B82A1009AA0A01E428027D012C678B00E78B666491646580897A007A00658064907C80383A6465816503E5FFE4E83BC00C646582AC678B28027D0109E5B589666664B8FD80400FE3603FA00FA40F82854120870542013541403C85004FA0258CF1601CF16CCC922C8CB0112F400F400CB00C9F9007074C8CB02CA07CBFFC9D05008C705F2E04A12A1035024C85004FA0258CF16CCCCC9ED5401FA403020D70B01C3008E1F8210D53276DB708010C8CB055003CF1622FA0212CB6ACB1FCB3FC98042FB00915BE200303515C705F2E049FA403059C85004FA0258CF16CCCCC9ED54002E5143C705F2E049D43001C85004FA0258CF16CCCCC9ED54007DADBCF6A2687D007D206A6A183618FC1400B82A1009AA0A01E428027D012C678B00E78B666491646580897A007A00658064FC80383A6465816503E5FFE4E840001FAF16F6A2687D007D206A6A183FAA904051007F09"),super(p,f)}createDataCell(){const p=new v;return p.bits.writeCoins(0),p.bits.writeAddress(this.options.adminAddress),p.refs[0]=d(this.options.jettonContentUri),p.refs[1]=v.oneFromBoc(this.options.jettonWalletCodeHex),p}createMintBody(p){const f=new v;f.bits.writeUint(21,32),f.bits.writeUint(p.queryId||0,64),f.bits.writeAddress(p.destination),f.bits.writeCoins(p.amount);const m=new v;return m.bits.writeUint(395134233,32),m.bits.writeUint(p.queryId||0,64),m.bits.writeCoins(p.jettonAmount),m.bits.writeAddress(null),m.bits.writeAddress(null),m.bits.writeCoins(new h(0)),m.bits.writeBit(!1),f.refs[0]=m,f}createChangeAdminBody(p){if(p.newAdminAddress===void 0)throw new Error("Specify newAdminAddress");const f=new v;return f.bits.writeUint(3,32),f.bits.writeUint(p.queryId||0,64),f.bits.writeAddress(p.newAdminAddress),f}createEditContentBody(p){const f=new v;return f.bits.writeUint(4,32),f.bits.writeUint(p.queryId||0,64),f.refs[0]=d(p.jettonContentUri),f}async getJettonData(){const p=await this.getAddress(),f=await this.provider.call2(p.toString(),"get_jetton_data");return{totalSupply:f[0],isMutable:f[1].toNumber()===-1,adminAddress:i(f[2]),jettonContentUri:g(f[3]),jettonWalletCode:f[4]}}async getJettonWalletAddress(p){const f=await this.getAddress(),m=new v;m.bits.writeAddress(p);const w=await this.provider.call2(f.toString(),"get_wallet_address",[["tvm.Slice",c(await m.toBoc(!1))]]);return i(w)}}}},(_,E,s)=>{const{Contract:y}=s(23),{Cell:v}=s(19),{parseAddress:d}=s(37),{BN:g}=s(1),i="B5EE9C7241021201000328000114FF00F4A413F4BCF2C80B0102016202030202CC0405001BA0F605DA89A1F401F481F481A8610201D40607020148080900BB0831C02497C138007434C0C05C6C2544D7C0FC02F83E903E900C7E800C5C75C87E800C7E800C00B4C7E08403E29FA954882EA54C4D167C0238208405E3514654882EA58C511100FC02780D60841657C1EF2EA4D67C02B817C12103FCBC2000113E910C1C2EBCB853600201200A0B020120101101F500F4CFFE803E90087C007B51343E803E903E90350C144DA8548AB1C17CB8B04A30BFFCB8B0950D109C150804D50500F214013E809633C58073C5B33248B232C044BD003D0032C032483E401C1D3232C0B281F2FFF274013E903D010C7E801DE0063232C1540233C59C3E8085F2DAC4F3208405E351467232C7C6600C03F73B51343E803E903E90350C0234CFFE80145468017E903E9014D6F1C1551CDB5C150804D50500F214013E809633C58073C5B33248B232C044BD003D0032C0327E401C1D3232C0B281F2FFF274140371C1472C7CB8B0C2BE80146A2860822625A020822625A004AD822860822625A028062849F8C3C975C2C070C008E00D0E0F009ACB3F5007FA0222CF165006CF1625FA025003CF16C95005CC2391729171E25008A813A08208989680AA008208989680A0A014BCF2E2C504C98040FB001023C85004FA0258CF1601CF16CCC9ED5400705279A018A182107362D09CC8CB1F5230CB3F58FA025007CF165007CF16C9718018C8CB0524CF165006FA0215CB6A14CCC971FB0010241023000E10491038375F040076C200B08E218210D53276DB708010C8CB055008CF165004FA0216CB6A12CB1F12CB3FC972FB0093356C21E203C85004FA0258CF1601CF16CCC9ED5400DB3B51343E803E903E90350C01F4CFFE803E900C145468549271C17CB8B049F0BFFCB8B0A0822625A02A8005A805AF3CB8B0E0841EF765F7B232C7C572CFD400FE8088B3C58073C5B25C60063232C14933C59C3E80B2DAB33260103EC01004F214013E809633C58073C5B3327B55200083200835C87B51343E803E903E90350C0134C7E08405E3514654882EA0841EF765F784EE84AC7CB8B174CFCC7E800C04E81408F214013E809633C58073C5B3327B55205ECCF23D";class u extends y{constructor(c,p){p.wc=0,p.code=p.code||v.oneFromBoc(i),super(c,p)}async createTransferBody(c){const p=new v;return p.bits.writeUint(260734629,32),p.bits.writeUint(c.queryId||0,64),p.bits.writeCoins(c.jettonAmount),p.bits.writeAddress(c.toAddress),p.bits.writeAddress(c.responseAddress),p.bits.writeBit(!1),p.bits.writeCoins(c.forwardAmount||new g(0)),p.bits.writeBit(!1),c.forwardPayload&&p.bits.writeBytes(c.forwardPayload),p}async createBurnBody(c){const p=new v;return p.bits.writeUint(1499400124,32),p.bits.writeUint(c.queryId||0,64),p.bits.writeCoins(c.jettonAmount),p.bits.writeAddress(c.responseAddress),p}async getData(){const c=await this.getAddress(),p=await this.provider.call2(c.toString(),"get_wallet_data");return{balance:p[0],ownerAddress:d(p[1]),jettonMinterAddress:d(p[2]),jettonWalletCode:p[3]}}}u.codeHex=i,_.exports={JettonWallet:u}},(_,E,s)=>{const{BlockSubscription:y}=s(45),{InMemoryBlockStorage:v}=s(46);_.exports={BlockSubscription:y,InMemoryBlockStorage:v}},_=>{const E=s=>({workchain:s.workchain,shardId:s.shard,shardBlockNumber:s.seqno});_.exports={BlockSubscription:class{constructor(s,y,v,d){this.provider=s,this.storage=y,this.onBlock=v,this.startMcBlockNumber=d?d.startMcBlockNumber:void 0,this.mcInterval=(d?d.mcInterval:void 0)||1e4,this.shardsInterval=(d?d.shardsInterval:void 0)||1e3}async start(){if(this.stop(),!this.startMcBlockNumber&&(this.startMcBlockNumber=(await this.provider.getMasterchainInfo()).last.seqno,!this.startMcBlockNumber))throw new Error("Cannot get start mc block number from provider");const s=await this.provider.getMasterchainBlockHeader(this.startMcBlockNumber);if(this.startLT=s.end_lt,!this.startLT)throw new Error("Cannot get startLT from provider");let y=!1;const v=async()=>{if(!y){y=!0;try{const i=await this.storage.getLastMasterchainBlockNumber()||this.startMcBlockNumber;if(!i)throw new Error("no init masterchain block in storage");const u=(await this.provider.getMasterchainInfo()).last.seqno;if(!u)throw new Error("invalid last masterchain block from provider");for(let h=i+1;h<u;h++){const c=await this.provider.getBlockShards(h),p=await this.provider.getMasterchainBlockHeader(h);await this.onBlock(p,c),await this.storage.insertBlocks(h,c.shards.map(E))}}catch(i){console.error(i)}y=!1}};this.mcIntervalId=setInterval(()=>v(),this.mcInterval),v();let d=!1;const g=async()=>{if(!d){d=!0;try{const i=await this.storage.getUnprocessedShardBlock();if(i){const{workchain:u,shardId:h,shardBlockNumber:c}=i,p=await this.provider.getBlockHeader(u,h,c);if(p.end_lt<this.startLT)await this.storage.setBlockProcessed(u,h,c,[]);else{await this.onBlock(p);const f=p.prev_blocks.map(E);await this.storage.setBlockProcessed(u,h,c,f)}}}catch(i){console.log(i)}d=!1}};this.shardsIntervalId=setInterval(()=>g(),this.shardsInterval)}stop(){clearInterval(this.mcIntervalId),clearInterval(this.shardsIntervalId)}}}},_=>{_.exports={InMemoryBlockStorage:class{constructor(E){this.masterchainBlocks={},this.shardchainBlocks={},this.logFunction=E}async insertShardBlocks(E){for(const{workchain:s,shardId:y,shardBlockNumber:v}of E)this.shardchainBlocks[s+"_"+y+"_"+v]===void 0&&(this.logFunction&&this.logFunction("insert shard "+s+" "+y+" "+v),this.shardchainBlocks[s+"_"+y+"_"+v]=!1)}async insertBlocks(E,s){if(this.logFunction&&this.logFunction("mc processed "+E),this.masterchainBlocks[E]!==void 0)throw new Error("mc already exists "+E);this.masterchainBlocks[E]=!0,await this.insertShardBlocks(s)}async getLastMasterchainBlockNumber(){return Object.keys(this.masterchainBlocks).map(E=>Number(E)).sort((E,s)=>s-E)[0]}async setBlockProcessed(E,s,y,v){if(this.logFunction&&this.logFunction("shard processed "+E+" "+s+" "+y),this.shardchainBlocks[E+"_"+s+"_"+y]===void 0)throw new Error("shard not exists "+E+"_"+s+"_"+y);this.shardchainBlocks[E+"_"+s+"_"+y]=!0,await this.insertShardBlocks(v)}async getUnprocessedShardBlock(){for(let E in this.shardchainBlocks)if(this.shardchainBlocks[E]===!1){const s=E.split("_");return{workchain:Number(s[0]),shardId:s[1],shardBlockNumber:Number(s[2])}}}}}},(_,E,s)=>{const{Contract:y}=s(23),{Cell:v}=s(19),{hexToBytes:d,BN:g,nacl:i,bytesToBase64:u}=s(1);_.exports={SubscriptionContract:class extends y{constructor(h,c){c.code=v.oneFromBoc("B5EE9C7241020F01000262000114FF00F4A413F4BCF2C80B0102012002030201480405036AF230DB3C5335A127A904F82327A128A90401BC5135A0F823B913B0F29EF800725210BE945387F0078E855386DB3CA4E2F82302DB3C0B0C0D0202CD06070121A0D0C9B67813F488DE0411F488DE0410130B048FD6D9E05E8698198FD201829846382C74E2F841999E98F9841083239BA395D497803F018B841083AB735BBED9E702984E382D9C74688462F863841083AB735BBED9E70156BA4E09040B0A0A080269F10FD22184093886D9E7C12C1083239BA39384008646582A803678B2801FD010A65B5658F89659FE4B9FD803FC1083239BA396D9E40E0A04F08E8D108C5F0C708210756E6B77DB3CE00AD31F308210706C7567831EB15210BA8F48305324A126A904F82326A127A904BEF27109FA4430A619F833D078D721D70B3F5260A11BBE8E923036F82370708210737562732759DB3C5077DE106910581047103645135042DB3CE0395F076C2232821064737472BA0A0A0D09011A8E897F821064737472DB3CE0300A006821B39982100400000072FB02DE70F8276F118010C8CB055005CF1621FA0214F40013CB6912CB1F830602948100A032DEC901FB000030ED44D0FA40FA40FA00D31FD31FD31FD31FD31FD307D31F30018021FA443020813A98DB3C01A619F833D078D721D70B3FA070F8258210706C7567228018C8CB055007CF165004FA0215CB6A12CB1F13CB3F01FA02CB00C973FB000E0040C8500ACF165008CF165006FA0214CB1F12CB1FCB1FCB1FCB1FCB07CB1FC9ED54005801A615F833D020D70B078100D1BA95810088D721DED307218100DDBA028100DEBA12B1F2E047D33F30A8AB0FE5855AB4"),super(h,c),this.methods.pay=()=>y.createMethod(h,this.createPayExternalMessage()),this.methods.getSubscriptionData=this.getSubscriptionData.bind(this)}createDataCell(){const h=new v;return h.bits.writeAddress(this.options.wallet),h.bits.writeAddress(this.options.beneficiary),h.bits.writeGrams(this.options.amount),h.bits.writeUint(this.options.period,32),h.bits.writeUint(this.options.startAt,32),h.bits.writeUint(this.options.timeout,32),h.bits.writeUint(0,32),h.bits.writeUint(0,32),h.bits.writeUint(0,8),h.bits.writeUint(this.options.subscriptionId,32),h}createBody(){const h=new v;return h.bits.writeUint(new g(1886156135).add(new g(2147483648)),32),h}createSelfDestructBody(){const h=new v;return h.bits.writeUint(1685288050,32),h}async getSubscriptionData(){const h=f=>f[0].toNumber()+":"+f[1].toString(16),c=await this.getAddress(),p=await this.provider.call2(c.toString(),"get_subscription_data");return{wallet:h(p[0]),beneficiary:h(p[1]),amount:p[2],period:p[3].toNumber(),startAt:p[4].toNumber(),timeout:p[5].toNumber(),lastPayment:p[6].toNumber(),lastRequest:p[7].toNumber(),failedAttempts:p[8].toNumber(),subscriptionId:p[9].toNumber()}}async createPayExternalMessage(){const h=await this.getAddress(),c=y.createExternalMessageHeader(h),p=y.createCommonMsgInfo(c,null,null),f=new v;return f.bits.writeUint(Math.floor(Date.now()/1e3),64),{address:h,message:p,body:f}}}}},(_,E,s)=>{const{PaymentChannel:y}=s(49);_.exports={Payments:class{constructor(v){this.provider=v}createChannel(v){return new y(this.provider,v)}},PaymentChannel:y}},(_,E,s)=>{const{Contract:y}=s(23),{Cell:v}=s(19),{nacl:d,hexToBytes:g,BN:i}=s(1),{parseAddress:u}=s(37),{writePublicKey:h,writeSignature:c,createSignatureCell:p,tag_init:f,tag_cooperative_close:m,tag_cooperative_commit:w,tag_start_uncooperative_close:A,tag_challenge_state:C,tag_settle_conditionals:M,tag_state:S,op_top_up_balance:q,op_init_channel:G,op_cooperative_close:U,op_cooperative_commit:H,op_start_uncooperative_close:Q,op_challenge_quarantined_state:et,op_settle_conditionals:it,op_finish_uncooperative_close:n,op_channel_closed:l,createTopUpBalance:r,createInitChannelBody:e,createCooperativeCloseChannelBody:t,createCooperativeCommitBody:o,createConditionalPayment:a,createSemiChannelBody:b,createSemiChannelState:I,createSignedSemiChannelState:x,createStartUncooperativeCloseBody:P,createChallengeQuarantinedStateBody:k,createSettleConditionalsBody:Z,createFinishUncooperativeClose:$,createOneSignature:at,createTwoSignature:st}=s(50),yt="B5EE9C72410230010007FB000114FF00F4A413F4BCF2C80B0102012002030201480405000AF26C21F0190202CB06070201202E2F020120080902012016170201200A0B0201200C0D0009D3610F80CC001D6B5007434C7FE8034C7CC1BC0FE19E0201580E0F0201201011002D3E11DBC4BE11DBC43232C7FE11DBC47E80B2C7F2407320008B083E1B7B51343480007E187E80007E18BE80007E18F4FFC07E1934FFC07E1974DFC07E19BC01887080A7F4C7C07E1A34C7C07E1A7D01007E1AB7807080E535007E1AF7BE1B2002012012130201201415008D3E13723E11BE117E113E10540132803E10BE80BE10FE8084F2FFC4B2FFF2DFFC02887080A7FE12BE127E121400F2C7C4B2C7FD0037807080E53E12C073253E1333C5B8B27B5520004D1C3C02FE106CFCB8193E803E800C3E1096283E18BE10C0683E18FE10BE10E8006EFCB819BC032000CF1D3C02FE106CFCB819348020C235C6083E4040E4BE1124BE117890CC3E443CB81974C7C060841A5B9A5D2EBCB81A3E118074DFD66EBCB81CBE803E800C3E1094882FBE10D4882FAC3CB819807E18BE18FE12F43E800C3E10BE10E80068006E7CB8199FFE187C0320004120843777222E9C20043232C15401B3C594013E808532DA84B2C7F2DFF2407EC02002012018190201D42B2C0201201A1B0201201E1F0201201C1D00E5473F00BD401D001D401D021F90102D31F01821043436D74BAF2E068F84601D37F59BAF2E072F844544355F910F8454330F910B0F2E065D33FD33F30F84822B9F84922B9B0F2E06C21F86820F869F84A6E915B8E19F84AD0D33FFA003171D721D33F305033BC02BCB1936DF86ADEE2F800F00C8006F3E12F43E800C7E903E900C3E09DBC41CBE10D62F24CC20C1B7BE10FE11963C03FE10BE11A04020BC03DC3E185C3E189C3E18DB7E1ABC032000B51D3C02F5007400750074087E4040B4C7C0608410DB1BDCEEBCB81A3E118074DFD66EBCB81CBE111510D57E443E1150CC3E442C3CB8197E80007E18BE80007E18F4CFF4CFCC3E1208AE7E1248AE6C3CB81B007E1A3E1A7E003C042001C1573F00BF84A6EF2E06AD2008308D71820F9012392F84492F845E24130F910F2E065D31F018210556E436CBAF2E068F84601D37F59BAF2E072D401D08308D71820F901F8444130F910F2E06501D430D08308D71820F901F8454130F910F2E06501820020120222301FED31F01821043685374BAF2E068F84601D37F59BAF2E072D33FFA00F404552003D200019AD401D0D33FFA00F40430937F206DE2303205D31F01821043685374BAF2E068F84601D37F59BAF2E072D33FFA00F404552003D200019AD401D0D33FFA00F40430937F206DE23032F8485280BEF8495250BEB0524BBE1AB0527ABE19210064B05215BE14B05248BE17B0F2E06970F82305C8CB3F5004FA0215F40015CB3F5004FA0212F400CB1F12CA00CA00C9F86AF00C01C31CFC02FE129BACFCB81AF48020C235C6083E4048E4BE1124BE1178904C3E443CB81974C7C0608410DA19D46EBCB81A3E118074DFD66EBCB81CB5007420C235C6083E407E11104C3E443CB81940750C3420C235C6083E407E11504C3E443CB81940602403F71CFC02FE129BACFCB81AF48020C235C6083E4048E4BE1124BE1178904C3E443CB81974C7C0608410DB10DBAEBCB81A3E118074DFD66EBCB81CBD010C3E12B434CFFE803D0134CFFE803D0134C7FE11DBC4148828083E08EE7CB81BBE11DBC4A83E08EF3CB81C34800C151D5A64D6D4C8F7A2B98E82A49B08B8C3816028292A01FCD31F01821043685374BAF2E068F84601D37F59BAF2E072D33FFA00F404552003D200019AD401D0D33FFA00F40430937F206DE2303205D31F01821043685374BAF2E068F84601D37F59BAF2E072D33FFA00F404552003D200019AD401D0D33FFA00F40430937F206DE230325339BE5381BEB0F8495250BEB0F8485290BEB02502FE5237BE16B05262BEB0F2E06927C20097F84918BEF2E0699137E222C20097F84813BEF2E0699132E2F84AD0D33FFA00F404D33FFA00F404D31FF8476F105220A0F823BCF2E06FD200D20030B3F2E073209C3537373A5274BC5263BC12B18E11323939395250BC5299BC18B14650134440E25319BAB3F2E06D9130E30D7F05C82627002496F8476F1114A098F8476F1117A00603E203003ECB3F5004FA0215F40012CB3F5004FA0213F400CB1F12CA00CA00C9F86AF00C00620A8020F4966FA5208E213050038020F4666FA1208E1001FA00ED1E15DA119450C3A00B9133E2923430E202926C21E2B31B000C3535075063140038C8CB3F5004FA0212F400CB3F5003FA0213F400CB1FCA00C9F86AF00C00D51D3C02FE129BACFCB81AFE12B434CFFE803D010C74CFFE803D010C74C7CC3E11DBC4283E11DBC4A83E08EE7CB81C7E003E10886808E87E18BE10D400E816287E18FE10F04026BE10BE10E83E189C3E18F7BE10B04026BE10FE10A83E18DC3E18F780693E1A293E1A7C042001F53B7EF4C7C8608419F1F4A06EA4CC7C037808608403818830AEA54C7C03B6CC780C882084155DD61FAEA54C3C0476CC780820841E6849BBEEA54C3C04B6CC7808208407C546B3EEA54C3C0576CC780820840223AA8CAEA54C3C05B6CC7808208419BDBC1A6EA54C3C05F6CC780C60840950CAA46EA53C0636CC78202D0008840FF2F00075BC7FE3A7805FC25E87D007D207D20184100D0CAF6A1EC7C217C21B7817C227C22B7817C237C23FC247C24B7817C2524C3B7818823881B22A021984008DBD0CABA7805FC20C8B870FC253748B8F07C256840206B90FD0018C020EB90FD0018B8EB90E98F987C23B7882908507C11DE491839707C23B788507C23B789507C11DE48B9F03A4331C4966";class Bt extends y{constructor(wt,gt){gt.publicKeyA=gt.isA?gt.myKeyPair.publicKey:gt.hisPublicKey,gt.publicKeyB=gt.isA?gt.hisPublicKey:gt.myKeyPair.publicKey,gt.wc=gt.wc||0,gt.code=gt.code||v.oneFromBoc(yt),super(wt,gt)}createDataCell(){var Yt,bt,Ht;const wt=new v;wt.bits.writeBit(0),wt.bits.writeCoins(0),wt.bits.writeCoins(0),h(wt,this.options.publicKeyA),h(wt,this.options.publicKeyB),wt.bits.writeUint(this.options.channelId,128);const gt=new v;gt.bits.writeUint(((Yt=this.options.closingConfig)==null?void 0:Yt.quarantineDuration)||0,32),gt.bits.writeCoins(((bt=this.options.closingConfig)==null?void 0:bt.misbehaviorFine)||new i(0)),gt.bits.writeUint(((Ht=this.options.closingConfig)==null?void 0:Ht.conditionalCloseDuration)||0,32),wt.refs[0]=gt,wt.bits.writeUint(0,32),wt.bits.writeUint(0,32),wt.bits.writeBit(!1);const Nt=new v;return Nt.bits.writeCoins(this.options.excessFee||new i(0)),Nt.bits.writeAddress(this.options.addressA),Nt.bits.writeAddress(this.options.addressB),wt.refs[1]=Nt,wt}async createOneSignature(wt,gt){const Nt=d.sign.detached(await gt.hash(),this.options.myKeyPair.secretKey);return{cell:at({op:wt,isA:this.options.isA,signature:Nt,cell:gt}),signature:Nt}}async createTwoSignature(wt,gt,Nt){const Yt=d.sign.detached(await Nt.hash(),this.options.myKeyPair.secretKey),bt=this.options.isA?Yt:gt,Ht=this.options.isA?gt:Yt;return{cell:st({op:wt,signatureA:bt,signatureB:Ht,cell:Nt}),signature:Yt}}async createTopUpBalance(wt){return r(wt)}async createInitChannel(wt){return this.createOneSignature(G,e({...wt,channelId:this.options.channelId}))}async createCooperativeCloseChannel(wt){return wt.hisSignature||(wt.hisSignature=new Uint8Array(64)),this.createTwoSignature(U,wt.hisSignature,t({...wt,channelId:this.options.channelId}))}async createCooperativeCommit(wt){return wt.hisSignature||(wt.hisSignature=new Uint8Array(64)),this.createTwoSignature(H,wt.hisSignature,o({...wt,channelId:this.options.channelId}))}async createSignedSemiChannelState(wt){const gt=I({channelId:this.options.channelId,semiChannelBody:b({seqno:wt.mySeqno,sentCoins:wt.mySentCoins,conditionals:null}),counterpartySemiChannelBody:wt.hisSeqno===void 0?null:b({seqno:wt.hisSeqno,sentCoins:wt.hisSentCoins,conditionals:null})}),Nt=d.sign.detached(await gt.hash(),this.options.myKeyPair.secretKey);return{cell:x({signature:Nt,state:gt}),signature:Nt}}async signState(wt){const gt=this.options.isA?wt.seqnoA:wt.seqnoB,Nt=this.options.isA?wt.seqnoB:wt.seqnoA,Yt=this.options.initBalanceA.gt(wt.balanceA)?this.options.initBalanceA.sub(wt.balanceA):new i(0),bt=this.options.initBalanceB.gt(wt.balanceB)?this.options.initBalanceB.sub(wt.balanceB):new i(0),Ht=this.options.isA?Yt:bt,ce=this.options.isA?bt:Yt,{cell:Ut,signature:$t}=await this.createSignedSemiChannelState({mySeqno:gt,mySentCoins:Ht,hisSeqno:Nt,hisSentCoins:ce});return $t}async verifyState(wt,gt){const Nt=this.options.isA?wt.seqnoB:wt.seqnoA,Yt=this.options.isA?wt.seqnoA:wt.seqnoB,bt=this.options.initBalanceA.gt(wt.balanceA)?this.options.initBalanceA.sub(wt.balanceA):new i(0),Ht=this.options.initBalanceB.gt(wt.balanceB)?this.options.initBalanceB.sub(wt.balanceB):new i(0),ce=this.options.isA?Ht:bt,Ut=this.options.isA?bt:Ht,$t=I({channelId:this.options.channelId,semiChannelBody:b({seqno:Nt,sentCoins:ce,conditionals:null}),counterpartySemiChannelBody:Yt===void 0?null:b({seqno:Yt,sentCoins:Ut,conditionals:null})}),B=await $t.hash();return d.sign.detached.verify(B,gt,this.options.isA?this.options.publicKeyB:this.options.publicKeyA)}async signClose(wt){const{cell:gt,signature:Nt}=await this.createCooperativeCloseChannel(wt);return Nt}async verifyClose(wt,gt){const Nt=await t({...wt,channelId:this.options.channelId}),Yt=await Nt.hash();return d.sign.detached.verify(Yt,gt,this.options.isA?this.options.publicKeyB:this.options.publicKeyA)}async createStartUncooperativeClose(wt){return this.createOneSignature(Q,P({...wt,channelId:this.options.channelId}))}async createChallengeQuarantinedState(wt){return this.createOneSignature(et,k({...wt,channelId:this.options.channelId}))}async createSettleConditionals(wt){return this.createOneSignature(it,Z({...wt,channelId:this.options.channelId}))}async createFinishUncooperativeClose(){return $()}async getChannelState(){const wt=await this.getAddress();return(await this.provider.call2(wt.toString(),"get_channel_state",[])).toNumber()}async getData(){const wt=Yt=>{let bt=Yt.toString(16);return bt.length%2!=0&&(bt="0"+bt),g(bt)},gt=await this.getAddress(),Nt=await this.provider.call2(gt.toString(),"get_channel_data",[]);return{state:Nt[0].toNumber(),balanceA:Nt[1][0],balanceB:Nt[1][1],publicKeyA:wt(Nt[2][0]),publicKeyB:wt(Nt[2][1]),channelId:Nt[3],quarantineDuration:Nt[4][0].toNumber(),misbehaviorFine:Nt[4][1],conditionalCloseDuration:Nt[4][2].toNumber(),seqnoA:Nt[5][0],seqnoB:Nt[5][1],quarantine:Nt[6],excessFee:Nt[7][0],addressA:u(Nt[7][1]),addressB:u(Nt[7][2])}}fromWallet(wt){const{wallet:gt,secretKey:Nt}=wt,Yt=(bt,Ht)=>{const ce=async Ut=>{const $t=Ht?(await this.createStateInit()).stateInit:null,B=await this.getAddress(),D=await gt.methods.seqno().call()||0,N=await bt;return gt.methods.transfer({secretKey:Nt,toAddress:B.toString(!0,!0,!0),amount:Ut,seqno:D,payload:N,stateInit:$t,sendMode:3})};return{send:Ut=>ce(Ut).then($t=>$t.send()),estimateFee:Ut=>ce(Ut).then($t=>$t.estimateFee())}};return{deploy:()=>Yt(null,!0),init:bt=>Yt(this.createInitChannel(bt).then(Ht=>Ht.cell)),topUp:bt=>Yt(this.createTopUpBalance(bt)),close:bt=>Yt(this.createCooperativeCloseChannel(bt).then(Ht=>Ht.cell)),commit:bt=>Yt(this.createCooperativeCommit(bt).then(Ht=>Ht.cell)),startUncooperativeClose:bt=>Yt(this.createStartUncooperativeClose(bt).then(Ht=>Ht.cell)),challengeQuarantinedState:bt=>Yt(this.createChallengeQuarantinedState(bt).then(Ht=>Ht.cell)),settleConditionals:bt=>Yt(this.createSettleConditionals(bt).then(Ht=>Ht.cell)),finishUncooperativeClose:()=>Yt(this.createFinishUncooperativeClose())}}}We(Bt,"STATE_UNINITED",0),We(Bt,"STATE_OPEN",1),We(Bt,"STATE_CLOSURE_STARTED",2),We(Bt,"STATE_SETTLING_CONDITIONALS",3),We(Bt,"STATE_AWAITING_FINALIZATION",4),Bt.codeHex=yt,_.exports={PaymentChannel:Bt}},(_,E,s)=>{const{Cell:y}=s(19),v=(M,S)=>{if(S.length!==64)throw new Error("invalid signature length");M.bits.writeBytes(S)},d=M=>{const S=new y;return v(S,M),S},g=(M,S)=>{if(S){if(M.bits.writeBit(1),M.refs.length>=4)throw new Error("refs overflow");M.refs.push(S)}else M.bits.writeBit(0)},i=g,u=1768843636,h=1131179891,c=1128492404,p=1433289580,f=1130915665,m=1131168622,w=1130910580,A=1741148801,C=625158801;_.exports={writePublicKey:(M,S)=>{if(S.length!==32)throw new Error("invalid publicKey length");M.bits.writeBytes(S)},writeSignature:v,createSignatureCell:d,tag_init:u,tag_cooperative_close:h,tag_cooperative_commit:c,tag_start_uncooperative_close:p,tag_challenge_state:f,tag_settle_conditionals:m,tag_state:w,op_top_up_balance:A,op_init_channel:235282626,op_cooperative_close:1433884798,op_cooperative_commit:2040604399,op_start_uncooperative_close:521476815,op_challenge_quarantined_state:143567410,op_settle_conditionals:1727459433,op_finish_uncooperative_close:C,op_channel_closed:-572749638,createTopUpBalance:M=>{const S=new y;return S.bits.writeUint(A,32),S.bits.writeCoins(M.coinsA),S.bits.writeCoins(M.coinsB),S},createInitChannelBody:M=>{const S=new y;return S.bits.writeUint(u,32),S.bits.writeUint(M.channelId,128),S.bits.writeCoins(M.balanceA),S.bits.writeCoins(M.balanceB),S},createCooperativeCloseChannelBody:M=>{const S=new y;return S.bits.writeUint(h,32),S.bits.writeUint(M.channelId,128),S.bits.writeCoins(M.balanceA),S.bits.writeCoins(M.balanceB),S.bits.writeUint(M.seqnoA,64),S.bits.writeUint(M.seqnoB,64),S},createCooperativeCommitBody:M=>{const S=new y;return S.bits.writeUint(c,32),S.bits.writeUint(M.channelId,128),S.bits.writeUint(M.seqnoA,64),S.bits.writeUint(M.seqnoB,64),S},createConditionalPayment:M=>{const S=new y;return S.bits.writeCoins(M.amount),S.writeCell(M.condition),S},createSemiChannelBody:M=>{const S=new y;return S.bits.writeUint(M.seqno,64),S.bits.writeCoins(M.sentCoins),i(S,M.conditionals),S},createSemiChannelState:M=>{const S=new y;return S.bits.writeUint(w,32),S.bits.writeUint(M.channelId,128),S.writeCell(M.semiChannelBody),g(S,M.counterpartySemiChannelBody),S},createSignedSemiChannelState:M=>{const S=new y;return v(S,M.signature),S.writeCell(M.state),S},createStartUncooperativeCloseBody:M=>{const S=new y;return S.bits.writeUint(p,32),S.bits.writeUint(M.channelId,128),S.refs[0]=M.signedSemiChannelStateA,S.refs[1]=M.signedSemiChannelStateB,S},createChallengeQuarantinedStateBody:M=>{const S=new y;return S.bits.writeUint(f,32),S.bits.writeUint(M.channelId,128),S.refs[0]=M.signedSemiChannelStateA,S.refs[1]=M.signedSemiChannelStateB,S},createSettleConditionalsBody:M=>{const S=new y;return S.bits.writeUint(m,32),S.bits.writeUint(M.channelId,128),i(S,M.conditionalsToSettle),S},createFinishUncooperativeClose:()=>{const M=new y;return M.bits.writeUint(C,32),M},createOneSignature:M=>{const S=new y;return S.bits.writeUint(M.op,32),S.bits.writeBit(M.isA),v(S,M.signature),S.writeCell(M.cell),S},createTwoSignature:M=>{const S=new y;return S.bits.writeUint(M.op,32),S.refs[0]=d(M.signatureA),S.refs[1]=d(M.signatureB),S.writeCell(M.cell),S}}},(_,E,s)=>{s.r(E),s.d(E,{default:()=>c});var y=s(52),v=s(55),d=s(56),g=s(104),i=s(54),u=s(105),h=s(9).Buffer;class c extends y.default{constructor(m,w){super(),this.device=void 0,this.deviceModel=void 0,this.channel=Math.floor(65535*Math.random()),this.packetSize=64,this.interfaceNumber=void 0,this._disconnectEmitted=!1,this._emitDisconnect=A=>{this._disconnectEmitted||(this._disconnectEmitted=!0,this.emit("disconnect",A))},this.exchange=A=>this.exchangeAtomicImpl(async()=>{const{channel:C,packetSize:M}=this;(0,g.log)("apdu","=> "+A.toString("hex"));const S=(0,v.default)(C,M),q=S.makeBlocks(A);for(let H=0;H<q.length;H++)await this.device.transferOut(3,q[H]);let G,U;for(;!(G=S.getReducedResult(U));){const H=await this.device.transferIn(3,M),Q=h.from(H.data.buffer);U=S.reduceResponse(U,Q)}return(0,g.log)("apdu","<= "+G.toString("hex")),G}).catch(C=>{throw C&&C.message&&C.message.includes("disconnected")?(this._emitDisconnect(C),new i.DisconnectedDeviceDuringOperation(C.message)):C}),this.device=m,this.interfaceNumber=w,this.deviceModel=(0,d.identifyUSBProductId)(m.productId)}static async request(){const m=await(0,u.requestLedgerDevice)();return c.open(m)}static async openConnected(){const m=await(0,u.getLedgerDevices)();return m.length===0?null:c.open(m[0])}static async open(m){await m.open(),m.configuration===null&&await m.selectConfiguration(1),await p(m);const w=m.configurations[0].interfaces.find(({alternates:S})=>S.some(q=>q.interfaceClass===255));if(!w)throw new i.TransportInterfaceNotAvailable("No WebUSB interface found for your Ledger device. Please upgrade firmware or contact techsupport.");const A=w.interfaceNumber;try{await m.claimInterface(A)}catch(S){throw await m.close(),new i.TransportInterfaceNotAvailable(S.message)}const C=new c(m,A),M=S=>{m===S.device&&(navigator.usb.removeEventListener("disconnect",M),C._emitDisconnect(new i.DisconnectedDevice))};return navigator.usb.addEventListener("disconnect",M),C}async close(){await this.exchangeBusyPromise,await this.device.releaseInterface(this.interfaceNumber),await p(this.device),await this.device.close()}setScrambleKey(){}}async function p(f){try{await f.reset()}catch(m){console.warn(m)}}c.isSupported=u.isSupported,c.list=u.getLedgerDevices,c.listen=f=>{let m=!1;return(0,u.getFirstLedgerDevice)().then(w=>{if(!m){const A=(0,d.identifyUSBProductId)(w.productId);f.next({type:"add",descriptor:w,deviceModel:A}),f.complete()}},w=>{window.DOMException&&w instanceof window.DOMException&&w.code===18?f.error(new i.TransportWebUSBGestureRequired(w.message)):f.error(new i.TransportOpenUserCancelled(w.message))}),{unsubscribe:function(){m=!0}}}},(_,E,s)=>{s.r(E),s.d(E,{StatusCodes:()=>d.StatusCodes,TransportError:()=>d.TransportError,TransportStatusError:()=>d.TransportStatusError,default:()=>i,getAltStatusMessage:()=>d.getAltStatusMessage});var y=s(53),v=s.n(y),d=s(54),g=s(9).Buffer;class i{constructor(){this.exchangeTimeout=3e4,this.unresponsiveTimeout=15e3,this.deviceModel=null,this._events=new(v()),this.send=async(h,c,p,f,m=g.alloc(0),w=[d.StatusCodes.OK])=>{if(m.length>=256)throw new d.TransportError("data.length exceed 256 bytes limit. Got: "+m.length,"DataLengthTooBig");const A=await this.exchange(g.concat([g.from([h,c,p,f]),g.from([m.length]),m])),C=A.readUInt16BE(A.length-2);if(!w.some(M=>M===C))throw new d.TransportStatusError(C);return A},this.exchangeBusyPromise=void 0,this.exchangeAtomicImpl=async h=>{if(this.exchangeBusyPromise)throw new d.TransportRaceCondition("An action was already pending on the Ledger device. Please deny or reconnect.");let c;const p=new Promise(w=>{c=w});this.exchangeBusyPromise=p;let f=!1;const m=setTimeout(()=>{f=!0,this.emit("unresponsive")},this.unresponsiveTimeout);try{const w=await h();return f&&this.emit("responsive"),w}finally{clearTimeout(m),c&&c(),this.exchangeBusyPromise=null}},this._appAPIlock=null}exchange(h){throw new Error("exchange not implemented")}setScrambleKey(h){}close(){return Promise.resolve()}on(h,c){this._events.on(h,c)}off(h,c){this._events.removeListener(h,c)}emit(h,...c){this._events.emit(h,...c)}setDebugMode(){console.warn("setDebugMode is deprecated. use @ledgerhq/logs instead. No logs are emitted in this anymore.")}setExchangeTimeout(h){this.exchangeTimeout=h}setExchangeUnresponsiveTimeout(h){this.unresponsiveTimeout=h}static create(h=3e3,c){return new Promise((p,f)=>{let m=!1;const w=this.listen({next:C=>{m=!0,w&&w.unsubscribe(),A&&clearTimeout(A),this.open(C.descriptor,h).then(p,f)},error:C=>{A&&clearTimeout(A),f(C)},complete:()=>{A&&clearTimeout(A),m||f(new d.TransportError(this.ErrorMessage_NoDeviceFound,"NoDeviceFound"))}}),A=c?setTimeout(()=>{w.unsubscribe(),f(new d.TransportError(this.ErrorMessage_ListenTimeout,"ListenTimeout"))},c):null})}decorateAppAPIMethods(h,c,p){for(let f of c)h[f]=this.decorateAppAPIMethod(f,h[f],h,p)}decorateAppAPIMethod(h,c,p,f){return async(...m)=>{const{_appAPIlock:w}=this;if(w)return Promise.reject(new d.TransportError("Ledger Device is busy (lock "+w+")","TransportLocked"));try{return this._appAPIlock=h,this.setScrambleKey(f),await c.apply(p,m)}finally{this._appAPIlock=null}}}}i.isSupported=void 0,i.list=void 0,i.listen=void 0,i.open=void 0,i.ErrorMessage_ListenTimeout="No Ledger device found (timeout)",i.ErrorMessage_NoDeviceFound="No Ledger device found"},_=>{var E,s=typeof Reflect=="object"?Reflect:null,y=s&&typeof s.apply=="function"?s.apply:function(C,M,S){return Function.prototype.apply.call(C,M,S)};E=s&&typeof s.ownKeys=="function"?s.ownKeys:Object.getOwnPropertySymbols?function(C){return Object.getOwnPropertyNames(C).concat(Object.getOwnPropertySymbols(C))}:function(C){return Object.getOwnPropertyNames(C)};var v=Number.isNaN||function(C){return C!=C};function d(){d.init.call(this)}_.exports=d,_.exports.once=function(C,M){return new Promise(function(S,q){function G(H){C.removeListener(M,U),q(H)}function U(){typeof C.removeListener=="function"&&C.removeListener("error",G),S([].slice.call(arguments))}A(C,M,U,{once:!0}),M!=="error"&&function(H,Q,et){typeof H.on=="function"&&A(H,"error",Q,{once:!0})}(C,G)})},d.EventEmitter=d,d.prototype._events=void 0,d.prototype._eventsCount=0,d.prototype._maxListeners=void 0;var g=10;function i(C){if(typeof C!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof C)}function u(C){return C._maxListeners===void 0?d.defaultMaxListeners:C._maxListeners}function h(C,M,S,q){var G,U,H,Q;if(i(S),(U=C._events)===void 0?(U=C._events=Object.create(null),C._eventsCount=0):(U.newListener!==void 0&&(C.emit("newListener",M,S.listener?S.listener:S),U=C._events),H=U[M]),H===void 0)H=U[M]=S,++C._eventsCount;else if(typeof H=="function"?H=U[M]=q?[S,H]:[H,S]:q?H.unshift(S):H.push(S),(G=u(C))>0&&H.length>G&&!H.warned){H.warned=!0;var et=new Error("Possible EventEmitter memory leak detected. "+H.length+" "+String(M)+" listeners added. Use emitter.setMaxListeners() to increase limit");et.name="MaxListenersExceededWarning",et.emitter=C,et.type=M,et.count=H.length,Q=et,console&&console.warn&&console.warn(Q)}return C}function c(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function p(C,M,S){var q={fired:!1,wrapFn:void 0,target:C,type:M,listener:S},G=c.bind(q);return G.listener=S,q.wrapFn=G,G}function f(C,M,S){var q=C._events;if(q===void 0)return[];var G=q[M];return G===void 0?[]:typeof G=="function"?S?[G.listener||G]:[G]:S?function(U){for(var H=new Array(U.length),Q=0;Q<H.length;++Q)H[Q]=U[Q].listener||U[Q];return H}(G):w(G,G.length)}function m(C){var M=this._events;if(M!==void 0){var S=M[C];if(typeof S=="function")return 1;if(S!==void 0)return S.length}return 0}function w(C,M){for(var S=new Array(M),q=0;q<M;++q)S[q]=C[q];return S}function A(C,M,S,q){if(typeof C.on=="function")q.once?C.once(M,S):C.on(M,S);else{if(typeof C.addEventListener!="function")throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof C);C.addEventListener(M,function G(U){q.once&&C.removeEventListener(M,G),S(U)})}}Object.defineProperty(d,"defaultMaxListeners",{enumerable:!0,get:function(){return g},set:function(C){if(typeof C!="number"||C<0||v(C))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+C+".");g=C}}),d.init=function(){this._events!==void 0&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},d.prototype.setMaxListeners=function(C){if(typeof C!="number"||C<0||v(C))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+C+".");return this._maxListeners=C,this},d.prototype.getMaxListeners=function(){return u(this)},d.prototype.emit=function(C){for(var M=[],S=1;S<arguments.length;S++)M.push(arguments[S]);var q=C==="error",G=this._events;if(G!==void 0)q=q&&G.error===void 0;else if(!q)return!1;if(q){var U;if(M.length>0&&(U=M[0]),U instanceof Error)throw U;var H=new Error("Unhandled error."+(U?" ("+U.message+")":""));throw H.context=U,H}var Q=G[C];if(Q===void 0)return!1;if(typeof Q=="function")y(Q,this,M);else{var et=Q.length,it=w(Q,et);for(S=0;S<et;++S)y(it[S],this,M)}return!0},d.prototype.addListener=function(C,M){return h(this,C,M,!1)},d.prototype.on=d.prototype.addListener,d.prototype.prependListener=function(C,M){return h(this,C,M,!0)},d.prototype.once=function(C,M){return i(M),this.on(C,p(this,C,M)),this},d.prototype.prependOnceListener=function(C,M){return i(M),this.prependListener(C,p(this,C,M)),this},d.prototype.removeListener=function(C,M){var S,q,G,U,H;if(i(M),(q=this._events)===void 0)return this;if((S=q[C])===void 0)return this;if(S===M||S.listener===M)--this._eventsCount==0?this._events=Object.create(null):(delete q[C],q.removeListener&&this.emit("removeListener",C,S.listener||M));else if(typeof S!="function"){for(G=-1,U=S.length-1;U>=0;U--)if(S[U]===M||S[U].listener===M){H=S[U].listener,G=U;break}if(G<0)return this;G===0?S.shift():function(Q,et){for(;et+1<Q.length;et++)Q[et]=Q[et+1];Q.pop()}(S,G),S.length===1&&(q[C]=S[0]),q.removeListener!==void 0&&this.emit("removeListener",C,H||M)}return this},d.prototype.off=d.prototype.removeListener,d.prototype.removeAllListeners=function(C){var M,S,q;if((S=this._events)===void 0)return this;if(S.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):S[C]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete S[C]),this;if(arguments.length===0){var G,U=Object.keys(S);for(q=0;q<U.length;++q)(G=U[q])!=="removeListener"&&this.removeAllListeners(G);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(typeof(M=S[C])=="function")this.removeListener(C,M);else if(M!==void 0)for(q=M.length-1;q>=0;q--)this.removeListener(C,M[q]);return this},d.prototype.listeners=function(C){return f(this,C,!0)},d.prototype.rawListeners=function(C){return f(this,C,!1)},d.listenerCount=function(C,M){return typeof C.listenerCount=="function"?C.listenerCount(M):m.call(C,M)},d.prototype.listenerCount=m,d.prototype.eventNames=function(){return this._eventsCount>0?E(this._events):[]}},(_,E,s)=>{s.r(E),s.d(E,{AccountNameRequiredError:()=>c,AccountNotSupported:()=>p,AmountRequired:()=>f,BluetoothRequired:()=>m,BtcUnmatchedApp:()=>w,CantOpenDevice:()=>A,CantScanQRCode:()=>pt,CashAddrNotSupported:()=>C,CurrencyNotSupported:()=>M,DBNotReset:()=>ee,DBWrongPassword:()=>se,DeviceAppVerifyNotSupported:()=>S,DeviceGenuineSocketEarlyClose:()=>q,DeviceHalted:()=>et,DeviceInOSUExpected:()=>Q,DeviceNameInvalid:()=>it,DeviceNotGenuineError:()=>G,DeviceOnDashboardExpected:()=>U,DeviceOnDashboardUnexpected:()=>H,DeviceShouldStayInApp:()=>dt,DeviceSocketFail:()=>n,DeviceSocketNoBulkStatus:()=>l,DisconnectedDevice:()=>r,DisconnectedDeviceDuringOperation:()=>e,ETHAddressNonEIP:()=>jt,EnpointConfigError:()=>t,EthAppPleaseEnableContractData:()=>o,FeeEstimationFailed:()=>a,FeeNotLoaded:()=>It,FeeRequired:()=>Zt,FeeTooHigh:()=>mt,FirmwareNotRecognized:()=>b,FirmwareOrAppUpdateRequired:()=>xt,GasLessThanEstimate:()=>Et,GenuineCheckFailed:()=>At,HardResetFail:()=>I,InvalidAddress:()=>P,InvalidAddressBecauseDestinationIsAlsoSource:()=>k,InvalidXRPTag:()=>x,LatestMCUInstalledError:()=>Z,LedgerAPI4xx:()=>Ft,LedgerAPI5xx:()=>Mt,LedgerAPIError:()=>at,LedgerAPIErrorWithMessage:()=>st,LedgerAPINotAvailable:()=>yt,MCUNotGenuineToDashboard:()=>ae,ManagerAppAlreadyInstalledError:()=>Bt,ManagerAppDepInstallRequired:()=>wt,ManagerAppDepUninstallRequired:()=>gt,ManagerAppRelyOnBTCError:()=>Lt,ManagerDeviceLockedError:()=>Nt,ManagerFirmwareNotEnoughSpaceError:()=>Yt,ManagerNotEnoughSpaceError:()=>bt,ManagerUninstallBTCDep:()=>Ht,NetworkDown:()=>ce,NoAccessToCamera:()=>X,NoAddressesFound:()=>Ut,NoDBPathGiven:()=>ne,NotEnoughBalance:()=>$t,NotEnoughBalanceBecauseDestinationNotCreated:()=>rt,NotEnoughBalanceInParentAccount:()=>D,NotEnoughBalanceToDelegate:()=>B,NotEnoughGas:()=>nt,NotEnoughSpendableBalance:()=>N,NotSupportedLegacyAddress:()=>lt,PairingFailed:()=>ft,PasswordIncorrectError:()=>ie,PasswordsDontMatchError:()=>Ot,RecipientRequired:()=>fe,RecommendSubAccountsToEmpty:()=>Dt,RecommendUndelegation:()=>Gt,StatusCodes:()=>ue,SyncError:()=>ot,TimeoutTagged:()=>ye,TransportError:()=>he,TransportInterfaceNotAvailable:()=>ut,TransportOpenUserCancelled:()=>kt,TransportRaceCondition:()=>_t,TransportStatusError:()=>Jt,TransportWebUSBGestureRequired:()=>Pt,UnavailableTezosOriginatedAccountReceive:()=>Xt,UnavailableTezosOriginatedAccountSend:()=>R,UnexpectedBootloader:()=>Vt,UnknownMCU:()=>$,UpdateFetchFileFail:()=>j,UpdateIncorrectHash:()=>L,UpdateIncorrectSig:()=>F,UpdateYourApp:()=>T,UserRefusedAddress:()=>J,UserRefusedAllowManager:()=>W,UserRefusedDeviceNameChange:()=>V,UserRefusedFirmwareUpdate:()=>ht,UserRefusedOnDevice:()=>ct,WebsocketConnectionError:()=>St,WebsocketConnectionFailed:()=>qt,WrongAppForCurrency:()=>Tt,WrongDeviceForAccount:()=>vt,addCustomErrorDeserializer:()=>d,createCustomErrorClass:()=>g,deserializeError:()=>i,getAltStatusMessage:()=>le,serializeError:()=>u});var y={},v={},d=function(Ct,Wt){v[Ct]=Wt},g=function(Ct){var Wt=function(zt,Kt){Object.assign(this,Kt),this.name=Ct,this.message=zt||Ct,this.stack=new Error().stack};return Wt.prototype=new Error,y[Ct]=Wt,Wt},i=function(Ct){if(typeof Ct=="object"&&Ct){try{var Wt=JSON.parse(Ct.message);Wt.message&&Wt.name&&(Ct=Wt)}catch{}var zt=void 0;if(typeof Ct.name=="string"){var Kt=Ct.name,Qt=v[Kt];if(Qt)zt=Qt(Ct);else{var te=Kt==="Error"?Error:y[Kt];te||(console.warn("deserializing an unknown class '"+Kt+"'"),te=g(Kt)),zt=Object.create(te.prototype);try{for(var de in Ct)Ct.hasOwnProperty(de)&&(zt[de]=Ct[de])}catch{}}}else zt=new Error(Ct.message);return!zt.stack&&Error.captureStackTrace&&Error.captureStackTrace(zt,i),zt}return new Error(String(Ct))},u=function(Ct){return Ct&&(typeof Ct=="object"?h(Ct,[]):typeof Ct=="function"?"[Function: "+(Ct.name||"anonymous")+"]":Ct)};function h(Ct,Wt){var zt={};Wt.push(Ct);for(var Kt=0,Qt=Object.keys(Ct);Kt<Qt.length;Kt++){var te=Qt[Kt],de=Ct[te];typeof de!="function"&&(de&&typeof de=="object"?Wt.indexOf(Ct[te])!==-1?zt[te]="[Circular]":zt[te]=h(Ct[te],Wt.slice(0)):zt[te]=de)}return typeof Ct.name=="string"&&(zt.name=Ct.name),typeof Ct.message=="string"&&(zt.message=Ct.message),typeof Ct.stack=="string"&&(zt.stack=Ct.stack),zt}var c=g("AccountNameRequired"),p=g("AccountNotSupported"),f=g("AmountRequired"),m=g("BluetoothRequired"),w=g("BtcUnmatchedApp"),A=g("CantOpenDevice"),C=g("CashAddrNotSupported"),M=g("CurrencyNotSupported"),S=g("DeviceAppVerifyNotSupported"),q=g("DeviceGenuineSocketEarlyClose"),G=g("DeviceNotGenuine"),U=g("DeviceOnDashboardExpected"),H=g("DeviceOnDashboardUnexpected"),Q=g("DeviceInOSUExpected"),et=g("DeviceHalted"),it=g("DeviceNameInvalid"),n=g("DeviceSocketFail"),l=g("DeviceSocketNoBulkStatus"),r=g("DisconnectedDevice"),e=g("DisconnectedDeviceDuringOperation"),t=g("EnpointConfig"),o=g("EthAppPleaseEnableContractData"),a=g("FeeEstimationFailed"),b=g("FirmwareNotRecognized"),I=g("HardResetFail"),x=g("InvalidXRPTag"),P=g("InvalidAddress"),k=g("InvalidAddressBecauseDestinationIsAlsoSource"),Z=g("LatestMCUInstalledError"),$=g("UnknownMCU"),at=g("LedgerAPIError"),st=g("LedgerAPIErrorWithMessage"),yt=g("LedgerAPINotAvailable"),Bt=g("ManagerAppAlreadyInstalled"),Lt=g("ManagerAppRelyOnBTC"),wt=g("ManagerAppDepInstallRequired"),gt=g("ManagerAppDepUninstallRequired"),Nt=g("ManagerDeviceLocked"),Yt=g("ManagerFirmwareNotEnoughSpace"),bt=g("ManagerNotEnoughSpace"),Ht=g("ManagerUninstallBTCDep"),ce=g("NetworkDown"),Ut=g("NoAddressesFound"),$t=g("NotEnoughBalance"),B=g("NotEnoughBalanceToDelegate"),D=g("NotEnoughBalanceInParentAccount"),N=g("NotEnoughSpendableBalance"),rt=g("NotEnoughBalanceBecauseDestinationNotCreated"),X=g("NoAccessToCamera"),nt=g("NotEnoughGas"),lt=g("NotSupportedLegacyAddress"),Et=g("GasLessThanEstimate"),Ot=g("PasswordsDontMatch"),ie=g("PasswordIncorrect"),Dt=g("RecommendSubAccountsToEmpty"),Gt=g("RecommendUndelegation"),ye=g("TimeoutTagged"),Vt=g("UnexpectedBootloader"),ae=g("MCUNotGenuineToDashboard"),fe=g("RecipientRequired"),Xt=g("UnavailableTezosOriginatedAccountReceive"),R=g("UnavailableTezosOriginatedAccountSend"),j=g("UpdateFetchFileFail"),L=g("UpdateIncorrectHash"),F=g("UpdateIncorrectSig"),T=g("UpdateYourApp"),V=g("UserRefusedDeviceNameChange"),J=g("UserRefusedAddress"),ht=g("UserRefusedFirmwareUpdate"),W=g("UserRefusedAllowManager"),ct=g("UserRefusedOnDevice"),kt=g("TransportOpenUserCancelled"),ut=g("TransportInterfaceNotAvailable"),_t=g("TransportRaceCondition"),Pt=g("TransportWebUSBGestureRequired"),dt=g("DeviceShouldStayInApp"),St=g("WebsocketConnectionError"),qt=g("WebsocketConnectionFailed"),vt=g("WrongDeviceForAccount"),Tt=g("WrongAppForCurrency"),jt=g("ETHAddressNonEIP"),pt=g("CantScanQRCode"),It=g("FeeNotLoaded"),Zt=g("FeeRequired"),mt=g("FeeTooHigh"),ot=g("SyncError"),ft=g("PairingFailed"),At=g("GenuineCheckFailed"),Ft=g("LedgerAPI4xx"),Mt=g("LedgerAPI5xx"),xt=g("FirmwareOrAppUpdateRequired"),ne=g("NoDBPathGiven"),se=g("DBWrongPassword"),ee=g("DBNotReset");function he(Ct,Wt){this.name="TransportError",this.message=Ct,this.stack=new Error().stack,this.id=Wt}he.prototype=new Error,d("TransportError",function(Ct){return new he(Ct.message,Ct.id)});var ue={PIN_REMAINING_ATTEMPTS:25536,INCORRECT_LENGTH:26368,MISSING_CRITICAL_PARAMETER:26624,COMMAND_INCOMPATIBLE_FILE_STRUCTURE:27009,SECURITY_STATUS_NOT_SATISFIED:27010,CONDITIONS_OF_USE_NOT_SATISFIED:27013,INCORRECT_DATA:27264,NOT_ENOUGH_MEMORY_SPACE:27268,REFERENCED_DATA_NOT_FOUND:27272,FILE_ALREADY_EXISTS:27273,INCORRECT_P1_P2:27392,INS_NOT_SUPPORTED:27904,CLA_NOT_SUPPORTED:28160,TECHNICAL_PROBLEM:28416,OK:36864,MEMORY_PROBLEM:37440,NO_EF_SELECTED:37888,INVALID_OFFSET:37890,FILE_NOT_FOUND:37892,INCONSISTENT_FILE:37896,ALGORITHM_NOT_SUPPORTED:38020,INVALID_KCV:38021,CODE_NOT_INITIALIZED:38914,ACCESS_CONDITION_NOT_FULFILLED:38916,CONTRADICTION_SECRET_CODE_STATUS:38920,CONTRADICTION_INVALIDATION:38928,CODE_BLOCKED:38976,MAX_VALUE_REACHED:38992,GP_AUTH_FAILED:25344,LICENSING:28482,HALTED:28586};function le(Ct){switch(Ct){case 26368:return"Incorrect length";case 26624:return"Missing critical parameter";case 27010:return"Security not satisfied (dongle locked or have invalid access rights)";case 27013:return"Condition of use not satisfied (denied by the user?)";case 27264:return"Invalid data received";case 27392:return"Invalid parameter received"}if(28416<=Ct&&Ct<=28671)return"Internal error, please report"}function Jt(Ct){this.name="TransportStatusError";var Wt=Object.keys(ue).find(function(Qt){return ue[Qt]===Ct})||"UNKNOWN_ERROR",zt=le(Ct)||Wt,Kt=Ct.toString(16);this.message="Ledger device: "+zt+" (0x"+Kt+")",this.stack=new Error().stack,this.statusCode=Ct,this.statusText=Wt}Jt.prototype=new Error,d("TransportStatusError",function(Ct){return new Jt(Ct.statusCode)})},(_,E,s)=>{var y=s(9).Buffer;Object.defineProperty(E,"__esModule",{value:!0}),E.default=void 0;var v=s(54);function d(i){const u=y.alloc(2);return u.writeUInt16BE(i,0),u}const g={data:y.alloc(0),dataLength:0,sequence:0};E.default=(i,u)=>({makeBlocks(h){let c=y.concat([d(h.length),h]);const p=u-5,f=Math.ceil(c.length/p);c=y.concat([c,y.alloc(f*p-c.length+1).fill(0)]);const m=[];for(let w=0;w<f;w++){const A=y.alloc(5);A.writeUInt16BE(i,0),A.writeUInt8(5,2),A.writeUInt16BE(w,3);const C=c.slice(w*p,(w+1)*p);m.push(y.concat([A,C]))}return m},reduceResponse(h,c){let{data:p,dataLength:f,sequence:m}=h||g;if(c.readUInt16BE(0)!==i)throw new v.TransportError("Invalid channel","InvalidChannel");if(c.readUInt8(2)!==5)throw new v.TransportError("Invalid tag","InvalidTag");if(c.readUInt16BE(3)!==m)throw new v.TransportError("Invalid sequence","InvalidSequence");h||(f=c.readUInt16BE(5)),m++;const w=c.slice(h?5:7);return p=y.concat([p,w]),p.length>f&&(p=p.slice(0,f)),{data:p,dataLength:f,sequence:m}},getReducedResult(h){if(h&&h.dataLength===h.data.length)return h.data}})},(_,E,s)=>{s.r(E),s.d(E,{IICCID:()=>u,IIGenericHID:()=>d,IIKeyboardHID:()=>g,IIU2F:()=>i,IIWebUSB:()=>h,getBluetoothServiceUuids:()=>q,getDeviceModel:()=>w,getInfosForServiceUuid:()=>G,identifyProductName:()=>C,identifyUSBProductId:()=>A,ledgerUSBVendorId:()=>m});var y=s(57),v=s.n(y);const d=1,g=2,i=4,u=8,h=16,c={blue:{id:"blue",productName:"Ledger\xA0Blue",productIdMM:0,legacyUsbProductId:0,usbOnly:!0,memorySize:491520,blockSize:4096,getBlockSize:U=>4096},nanoS:{id:"nanoS",productName:"Ledger\xA0Nano\xA0S",productIdMM:16,legacyUsbProductId:1,usbOnly:!0,memorySize:327680,blockSize:4096,getBlockSize:U=>v().lt(v().coerce(U),"2.0.0")?4096:2048},nanoX:{id:"nanoX",productName:"Ledger\xA0Nano\xA0X",productIdMM:64,legacyUsbProductId:4,usbOnly:!1,memorySize:2097152,blockSize:4096,getBlockSize:U=>4096,bluetoothSpec:[{serviceUuid:"d973f2e0-b19e-11e2-9e96-0800200c9a66",notifyUuid:"d973f2e1-b19e-11e2-9e96-0800200c9a66",writeUuid:"d973f2e2-b19e-11e2-9e96-0800200c9a66"},{serviceUuid:"13d63400-2c97-0004-0000-4c6564676572",notifyUuid:"13d63400-2c97-0004-0001-4c6564676572",writeUuid:"13d63400-2c97-0004-0002-4c6564676572"}]}},p={Blue:"blue","Nano S":"nanoS","Nano X":"nanoX"},f=Object.values(c),m=11415,w=U=>{const H=c[U];if(!H)throw new Error("device '"+U+"' does not exist");return H},A=U=>{const H=f.find(et=>et.legacyUsbProductId===U);if(H)return H;const Q=U>>8;return f.find(et=>et.productIdMM===Q)},C=U=>{const H=p[U];return f.find(Q=>Q.id===H)},M=[],S={};for(let U in c){const H=c[U],{bluetoothSpec:Q}=H;if(Q)for(let et=0;et<Q.length;et++){const it=Q[et];M.push(it.serviceUuid),S[it.serviceUuid]=S[it.serviceUuid.replace(/-/g,"")]={deviceModel:H,...it}}}const q=()=>M,G=U=>S[U.toLowerCase()]},(_,E,s)=>{const y=s(58);_.exports={re:y.re,src:y.src,tokens:y.t,SEMVER_SPEC_VERSION:s(59).SEMVER_SPEC_VERSION,SemVer:s(61),compareIdentifiers:s(63).compareIdentifiers,rcompareIdentifiers:s(63).rcompareIdentifiers,parse:s(64),valid:s(65),clean:s(66),inc:s(67),diff:s(68),major:s(71),minor:s(72),patch:s(73),prerelease:s(74),compare:s(70),rcompare:s(75),compareLoose:s(76),compareBuild:s(77),sort:s(78),rsort:s(79),gt:s(80),lt:s(81),eq:s(69),neq:s(82),gte:s(83),lte:s(84),cmp:s(85),coerce:s(86),Comparator:s(87),Range:s(88),satisfies:s(92),toComparators:s(93),maxSatisfying:s(94),minSatisfying:s(95),minVersion:s(96),validRange:s(97),outside:s(98),gtr:s(99),ltr:s(100),intersects:s(101),simplifyRange:s(102),subset:s(103)}},(_,E,s)=>{const{MAX_SAFE_COMPONENT_LENGTH:y}=s(59),v=s(60),d=(E=_.exports={}).re=[],g=E.src=[],i=E.t={};let u=0;const h=(c,p,f)=>{const m=u++;v(m,p),i[c]=m,g[m]=p,d[m]=new RegExp(p,f?"g":void 0)};h("NUMERICIDENTIFIER","0|[1-9]\\d*"),h("NUMERICIDENTIFIERLOOSE","[0-9]+"),h("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*"),h("MAINVERSION",`(${g[i.NUMERICIDENTIFIER]})\\.(${g[i.NUMERICIDENTIFIER]})\\.(${g[i.NUMERICIDENTIFIER]})`),h("MAINVERSIONLOOSE",`(${g[i.NUMERICIDENTIFIERLOOSE]})\\.(${g[i.NUMERICIDENTIFIERLOOSE]})\\.(${g[i.NUMERICIDENTIFIERLOOSE]})`),h("PRERELEASEIDENTIFIER",`(?:${g[i.NUMERICIDENTIFIER]}|${g[i.NONNUMERICIDENTIFIER]})`),h("PRERELEASEIDENTIFIERLOOSE",`(?:${g[i.NUMERICIDENTIFIERLOOSE]}|${g[i.NONNUMERICIDENTIFIER]})`),h("PRERELEASE",`(?:-(${g[i.PRERELEASEIDENTIFIER]}(?:\\.${g[i.PRERELEASEIDENTIFIER]})*))`),h("PRERELEASELOOSE",`(?:-?(${g[i.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${g[i.PRERELEASEIDENTIFIERLOOSE]})*))`),h("BUILDIDENTIFIER","[0-9A-Za-z-]+"),h("BUILD",`(?:\\+(${g[i.BUILDIDENTIFIER]}(?:\\.${g[i.BUILDIDENTIFIER]})*))`),h("FULLPLAIN",`v?${g[i.MAINVERSION]}${g[i.PRERELEASE]}?${g[i.BUILD]}?`),h("FULL",`^${g[i.FULLPLAIN]}$`),h("LOOSEPLAIN",`[v=\\s]*${g[i.MAINVERSIONLOOSE]}${g[i.PRERELEASELOOSE]}?${g[i.BUILD]}?`),h("LOOSE",`^${g[i.LOOSEPLAIN]}$`),h("GTLT","((?:<|>)?=?)"),h("XRANGEIDENTIFIERLOOSE",`${g[i.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),h("XRANGEIDENTIFIER",`${g[i.NUMERICIDENTIFIER]}|x|X|\\*`),h("XRANGEPLAIN",`[v=\\s]*(${g[i.XRANGEIDENTIFIER]})(?:\\.(${g[i.XRANGEIDENTIFIER]})(?:\\.(${g[i.XRANGEIDENTIFIER]})(?:${g[i.PRERELEASE]})?${g[i.BUILD]}?)?)?`),h("XRANGEPLAINLOOSE",`[v=\\s]*(${g[i.XRANGEIDENTIFIERLOOSE]})(?:\\.(${g[i.XRANGEIDENTIFIERLOOSE]})(?:\\.(${g[i.XRANGEIDENTIFIERLOOSE]})(?:${g[i.PRERELEASELOOSE]})?${g[i.BUILD]}?)?)?`),h("XRANGE",`^${g[i.GTLT]}\\s*${g[i.XRANGEPLAIN]}$`),h("XRANGELOOSE",`^${g[i.GTLT]}\\s*${g[i.XRANGEPLAINLOOSE]}$`),h("COERCE",`(^|[^\\d])(\\d{1,${y}})(?:\\.(\\d{1,${y}}))?(?:\\.(\\d{1,${y}}))?(?:$|[^\\d])`),h("COERCERTL",g[i.COERCE],!0),h("LONETILDE","(?:~>?)"),h("TILDETRIM",`(\\s*)${g[i.LONETILDE]}\\s+`,!0),E.tildeTrimReplace="$1~",h("TILDE",`^${g[i.LONETILDE]}${g[i.XRANGEPLAIN]}$`),h("TILDELOOSE",`^${g[i.LONETILDE]}${g[i.XRANGEPLAINLOOSE]}$`),h("LONECARET","(?:\\^)"),h("CARETTRIM",`(\\s*)${g[i.LONECARET]}\\s+`,!0),E.caretTrimReplace="$1^",h("CARET",`^${g[i.LONECARET]}${g[i.XRANGEPLAIN]}$`),h("CARETLOOSE",`^${g[i.LONECARET]}${g[i.XRANGEPLAINLOOSE]}$`),h("COMPARATORLOOSE",`^${g[i.GTLT]}\\s*(${g[i.LOOSEPLAIN]})$|^$`),h("COMPARATOR",`^${g[i.GTLT]}\\s*(${g[i.FULLPLAIN]})$|^$`),h("COMPARATORTRIM",`(\\s*)${g[i.GTLT]}\\s*(${g[i.LOOSEPLAIN]}|${g[i.XRANGEPLAIN]})`,!0),E.comparatorTrimReplace="$1$2$3",h("HYPHENRANGE",`^\\s*(${g[i.XRANGEPLAIN]})\\s+-\\s+(${g[i.XRANGEPLAIN]})\\s*$`),h("HYPHENRANGELOOSE",`^\\s*(${g[i.XRANGEPLAINLOOSE]})\\s+-\\s+(${g[i.XRANGEPLAINLOOSE]})\\s*$`),h("STAR","(<|>)?=?\\s*\\*"),h("GTE0","^\\s*>=\\s*0.0.0\\s*$"),h("GTE0PRE","^\\s*>=\\s*0.0.0-0\\s*$")},_=>{const E=Number.MAX_SAFE_INTEGER||9007199254740991;_.exports={SEMVER_SPEC_VERSION:"2.0.0",MAX_LENGTH:256,MAX_SAFE_INTEGER:E,MAX_SAFE_COMPONENT_LENGTH:16}},_=>{const E=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...s)=>console.error("SEMVER",...s):()=>{};_.exports=E},(_,E,s)=>{const y=s(60),{MAX_LENGTH:v,MAX_SAFE_INTEGER:d}=s(59),{re:g,t:i}=s(58),u=s(62),{compareIdentifiers:h}=s(63);class c{constructor(f,m){if(m=u(m),f instanceof c){if(f.loose===!!m.loose&&f.includePrerelease===!!m.includePrerelease)return f;f=f.version}else if(typeof f!="string")throw new TypeError(`Invalid Version: ${f}`);if(f.length>v)throw new TypeError(`version is longer than ${v} characters`);y("SemVer",f,m),this.options=m,this.loose=!!m.loose,this.includePrerelease=!!m.includePrerelease;const w=f.trim().match(m.loose?g[i.LOOSE]:g[i.FULL]);if(!w)throw new TypeError(`Invalid Version: ${f}`);if(this.raw=f,this.major=+w[1],this.minor=+w[2],this.patch=+w[3],this.major>d||this.major<0)throw new TypeError("Invalid major version");if(this.minor>d||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>d||this.patch<0)throw new TypeError("Invalid patch version");w[4]?this.prerelease=w[4].split(".").map(A=>{if(/^[0-9]+$/.test(A)){const C=+A;if(C>=0&&C<d)return C}return A}):this.prerelease=[],this.build=w[5]?w[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(f){if(y("SemVer.compare",this.version,this.options,f),!(f instanceof c)){if(typeof f=="string"&&f===this.version)return 0;f=new c(f,this.options)}return f.version===this.version?0:this.compareMain(f)||this.comparePre(f)}compareMain(f){return f instanceof c||(f=new c(f,this.options)),h(this.major,f.major)||h(this.minor,f.minor)||h(this.patch,f.patch)}comparePre(f){if(f instanceof c||(f=new c(f,this.options)),this.prerelease.length&&!f.prerelease.length)return-1;if(!this.prerelease.length&&f.prerelease.length)return 1;if(!this.prerelease.length&&!f.prerelease.length)return 0;let m=0;do{const w=this.prerelease[m],A=f.prerelease[m];if(y("prerelease compare",m,w,A),w===void 0&&A===void 0)return 0;if(A===void 0)return 1;if(w===void 0)return-1;if(w!==A)return h(w,A)}while(++m)}compareBuild(f){f instanceof c||(f=new c(f,this.options));let m=0;do{const w=this.build[m],A=f.build[m];if(y("prerelease compare",m,w,A),w===void 0&&A===void 0)return 0;if(A===void 0)return 1;if(w===void 0)return-1;if(w!==A)return h(w,A)}while(++m)}inc(f,m){switch(f){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",m);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",m);break;case"prepatch":this.prerelease.length=0,this.inc("patch",m),this.inc("pre",m);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",m),this.inc("pre",m);break;case"major":this.minor===0&&this.patch===0&&this.prerelease.length!==0||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":this.patch===0&&this.prerelease.length!==0||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{let w=this.prerelease.length;for(;--w>=0;)typeof this.prerelease[w]=="number"&&(this.prerelease[w]++,w=-2);w===-1&&this.prerelease.push(0)}m&&(this.prerelease[0]===m?isNaN(this.prerelease[1])&&(this.prerelease=[m,0]):this.prerelease=[m,0]);break;default:throw new Error(`invalid increment argument: ${f}`)}return this.format(),this.raw=this.version,this}}_.exports=c},_=>{const E=["includePrerelease","loose","rtl"];_.exports=s=>s?typeof s!="object"?{loose:!0}:E.filter(y=>s[y]).reduce((y,v)=>(y[v]=!0,y),{}):{}},_=>{const E=/^[0-9]+$/,s=(y,v)=>{const d=E.test(y),g=E.test(v);return d&&g&&(y=+y,v=+v),y===v?0:d&&!g?-1:g&&!d?1:y<v?-1:1};_.exports={compareIdentifiers:s,rcompareIdentifiers:(y,v)=>s(v,y)}},(_,E,s)=>{const{MAX_LENGTH:y}=s(59),{re:v,t:d}=s(58),g=s(61),i=s(62);_.exports=(u,h)=>{if(h=i(h),u instanceof g)return u;if(typeof u!="string"||u.length>y||!(h.loose?v[d.LOOSE]:v[d.FULL]).test(u))return null;try{return new g(u,h)}catch{return null}}},(_,E,s)=>{const y=s(64);_.exports=(v,d)=>{const g=y(v,d);return g?g.version:null}},(_,E,s)=>{const y=s(64);_.exports=(v,d)=>{const g=y(v.trim().replace(/^[=v]+/,""),d);return g?g.version:null}},(_,E,s)=>{const y=s(61);_.exports=(v,d,g,i)=>{typeof g=="string"&&(i=g,g=void 0);try{return new y(v,g).inc(d,i).version}catch{return null}}},(_,E,s)=>{const y=s(64),v=s(69);_.exports=(d,g)=>{if(v(d,g))return null;{const i=y(d),u=y(g),h=i.prerelease.length||u.prerelease.length,c=h?"pre":"",p=h?"prerelease":"";for(const f in i)if((f==="major"||f==="minor"||f==="patch")&&i[f]!==u[f])return c+f;return p}}},(_,E,s)=>{const y=s(70);_.exports=(v,d,g)=>y(v,d,g)===0},(_,E,s)=>{const y=s(61);_.exports=(v,d,g)=>new y(v,g).compare(new y(d,g))},(_,E,s)=>{const y=s(61);_.exports=(v,d)=>new y(v,d).major},(_,E,s)=>{const y=s(61);_.exports=(v,d)=>new y(v,d).minor},(_,E,s)=>{const y=s(61);_.exports=(v,d)=>new y(v,d).patch},(_,E,s)=>{const y=s(64);_.exports=(v,d)=>{const g=y(v,d);return g&&g.prerelease.length?g.prerelease:null}},(_,E,s)=>{const y=s(70);_.exports=(v,d,g)=>y(d,v,g)},(_,E,s)=>{const y=s(70);_.exports=(v,d)=>y(v,d,!0)},(_,E,s)=>{const y=s(61);_.exports=(v,d,g)=>{const i=new y(v,g),u=new y(d,g);return i.compare(u)||i.compareBuild(u)}},(_,E,s)=>{const y=s(77);_.exports=(v,d)=>v.sort((g,i)=>y(g,i,d))},(_,E,s)=>{const y=s(77);_.exports=(v,d)=>v.sort((g,i)=>y(i,g,d))},(_,E,s)=>{const y=s(70);_.exports=(v,d,g)=>y(v,d,g)>0},(_,E,s)=>{const y=s(70);_.exports=(v,d,g)=>y(v,d,g)<0},(_,E,s)=>{const y=s(70);_.exports=(v,d,g)=>y(v,d,g)!==0},(_,E,s)=>{const y=s(70);_.exports=(v,d,g)=>y(v,d,g)>=0},(_,E,s)=>{const y=s(70);_.exports=(v,d,g)=>y(v,d,g)<=0},(_,E,s)=>{const y=s(69),v=s(82),d=s(80),g=s(83),i=s(81),u=s(84);_.exports=(h,c,p,f)=>{switch(c){case"===":return typeof h=="object"&&(h=h.version),typeof p=="object"&&(p=p.version),h===p;case"!==":return typeof h=="object"&&(h=h.version),typeof p=="object"&&(p=p.version),h!==p;case"":case"=":case"==":return y(h,p,f);case"!=":return v(h,p,f);case">":return d(h,p,f);case">=":return g(h,p,f);case"<":return i(h,p,f);case"<=":return u(h,p,f);default:throw new TypeError(`Invalid operator: ${c}`)}}},(_,E,s)=>{const y=s(61),v=s(64),{re:d,t:g}=s(58);_.exports=(i,u)=>{if(i instanceof y)return i;if(typeof i=="number"&&(i=String(i)),typeof i!="string")return null;let h=null;if((u=u||{}).rtl){let c;for(;(c=d[g.COERCERTL].exec(i))&&(!h||h.index+h[0].length!==i.length);)h&&c.index+c[0].length===h.index+h[0].length||(h=c),d[g.COERCERTL].lastIndex=c.index+c[1].length+c[2].length;d[g.COERCERTL].lastIndex=-1}else h=i.match(d[g.COERCE]);return h===null?null:v(`${h[2]}.${h[3]||"0"}.${h[4]||"0"}`,u)}},(_,E,s)=>{const y=Symbol("SemVer ANY");class v{static get ANY(){return y}constructor(m,w){if(w=d(w),m instanceof v){if(m.loose===!!w.loose)return m;m=m.value}h("comparator",m,w),this.options=w,this.loose=!!w.loose,this.parse(m),this.semver===y?this.value="":this.value=this.operator+this.semver.version,h("comp",this)}parse(m){const w=this.options.loose?g[i.COMPARATORLOOSE]:g[i.COMPARATOR],A=m.match(w);if(!A)throw new TypeError(`Invalid comparator: ${m}`);this.operator=A[1]!==void 0?A[1]:"",this.operator==="="&&(this.operator=""),A[2]?this.semver=new c(A[2],this.options.loose):this.semver=y}toString(){return this.value}test(m){if(h("Comparator.test",m,this.options.loose),this.semver===y||m===y)return!0;if(typeof m=="string")try{m=new c(m,this.options)}catch{return!1}return u(m,this.operator,this.semver,this.options)}intersects(m,w){if(!(m instanceof v))throw new TypeError("a Comparator is required");if(w&&typeof w=="object"||(w={loose:!!w,includePrerelease:!1}),this.operator==="")return this.value===""||new p(m.value,w).test(this.value);if(m.operator==="")return m.value===""||new p(this.value,w).test(m.semver);const A=!(this.operator!==">="&&this.operator!==">"||m.operator!==">="&&m.operator!==">"),C=!(this.operator!=="<="&&this.operator!=="<"||m.operator!=="<="&&m.operator!=="<"),M=this.semver.version===m.semver.version,S=!(this.operator!==">="&&this.operator!=="<="||m.operator!==">="&&m.operator!=="<="),q=u(this.semver,"<",m.semver,w)&&(this.operator===">="||this.operator===">")&&(m.operator==="<="||m.operator==="<"),G=u(this.semver,">",m.semver,w)&&(this.operator==="<="||this.operator==="<")&&(m.operator===">="||m.operator===">");return A||C||M&&S||q||G}}_.exports=v;const d=s(62),{re:g,t:i}=s(58),u=s(85),h=s(60),c=s(61),p=s(88)},(_,E,s)=>{class y{constructor(t,o){if(o=d(o),t instanceof y)return t.loose===!!o.loose&&t.includePrerelease===!!o.includePrerelease?t:new y(t.raw,o);if(t instanceof g)return this.raw=t.value,this.set=[[t]],this.format(),this;if(this.options=o,this.loose=!!o.loose,this.includePrerelease=!!o.includePrerelease,this.raw=t,this.set=t.split(/\s*\|\|\s*/).map(a=>this.parseRange(a.trim())).filter(a=>a.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${t}`);if(this.set.length>1){const a=this.set[0];if(this.set=this.set.filter(b=>!w(b[0])),this.set.length===0)this.set=[a];else if(this.set.length>1){for(const b of this.set)if(b.length===1&&A(b[0])){this.set=[b];break}}}this.format()}format(){return this.range=this.set.map(t=>t.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(t){t=t.trim();const o=`parseRange:${Object.keys(this.options).join(",")}:${t}`,a=v.get(o);if(a)return a;const b=this.options.loose,I=b?h[c.HYPHENRANGELOOSE]:h[c.HYPHENRANGE];t=t.replace(I,l(this.options.includePrerelease)),i("hyphen replace",t),t=t.replace(h[c.COMPARATORTRIM],p),i("comparator trim",t,h[c.COMPARATORTRIM]),t=(t=(t=t.replace(h[c.TILDETRIM],f)).replace(h[c.CARETTRIM],m)).split(/\s+/).join(" ");const x=b?h[c.COMPARATORLOOSE]:h[c.COMPARATOR],P=t.split(" ").map($=>M($,this.options)).join(" ").split(/\s+/).map($=>n($,this.options)).filter(this.options.loose?$=>!!$.match(x):()=>!0).map($=>new g($,this.options)),k=(P.length,new Map);for(const $ of P){if(w($))return[$];k.set($.value,$)}k.size>1&&k.has("")&&k.delete("");const Z=[...k.values()];return v.set(o,Z),Z}intersects(t,o){if(!(t instanceof y))throw new TypeError("a Range is required");return this.set.some(a=>C(a,o)&&t.set.some(b=>C(b,o)&&a.every(I=>b.every(x=>I.intersects(x,o)))))}test(t){if(!t)return!1;if(typeof t=="string")try{t=new u(t,this.options)}catch{return!1}for(let o=0;o<this.set.length;o++)if(r(this.set[o],t,this.options))return!0;return!1}}_.exports=y;const v=new(s(89))({max:1e3}),d=s(62),g=s(87),i=s(60),u=s(61),{re:h,t:c,comparatorTrimReplace:p,tildeTrimReplace:f,caretTrimReplace:m}=s(58),w=e=>e.value==="<0.0.0-0",A=e=>e.value==="",C=(e,t)=>{let o=!0;const a=e.slice();let b=a.pop();for(;o&&a.length;)o=a.every(I=>b.intersects(I,t)),b=a.pop();return o},M=(e,t)=>(i("comp",e,t),e=U(e,t),i("caret",e),e=q(e,t),i("tildes",e),e=Q(e,t),i("xrange",e),e=it(e,t),i("stars",e),e),S=e=>!e||e.toLowerCase()==="x"||e==="*",q=(e,t)=>e.trim().split(/\s+/).map(o=>G(o,t)).join(" "),G=(e,t)=>{const o=t.loose?h[c.TILDELOOSE]:h[c.TILDE];return e.replace(o,(a,b,I,x,P)=>{let k;return i("tilde",e,a,b,I,x,P),S(b)?k="":S(I)?k=`>=${b}.0.0 <${+b+1}.0.0-0`:S(x)?k=`>=${b}.${I}.0 <${b}.${+I+1}.0-0`:P?(i("replaceTilde pr",P),k=`>=${b}.${I}.${x}-${P} <${b}.${+I+1}.0-0`):k=`>=${b}.${I}.${x} <${b}.${+I+1}.0-0`,i("tilde return",k),k})},U=(e,t)=>e.trim().split(/\s+/).map(o=>H(o,t)).join(" "),H=(e,t)=>{i("caret",e,t);const o=t.loose?h[c.CARETLOOSE]:h[c.CARET],a=t.includePrerelease?"-0":"";return e.replace(o,(b,I,x,P,k)=>{let Z;return i("caret",e,b,I,x,P,k),S(I)?Z="":S(x)?Z=`>=${I}.0.0${a} <${+I+1}.0.0-0`:S(P)?Z=I==="0"?`>=${I}.${x}.0${a} <${I}.${+x+1}.0-0`:`>=${I}.${x}.0${a} <${+I+1}.0.0-0`:k?(i("replaceCaret pr",k),Z=I==="0"?x==="0"?`>=${I}.${x}.${P}-${k} <${I}.${x}.${+P+1}-0`:`>=${I}.${x}.${P}-${k} <${I}.${+x+1}.0-0`:`>=${I}.${x}.${P}-${k} <${+I+1}.0.0-0`):(i("no pr"),Z=I==="0"?x==="0"?`>=${I}.${x}.${P}${a} <${I}.${x}.${+P+1}-0`:`>=${I}.${x}.${P}${a} <${I}.${+x+1}.0-0`:`>=${I}.${x}.${P} <${+I+1}.0.0-0`),i("caret return",Z),Z})},Q=(e,t)=>(i("replaceXRanges",e,t),e.split(/\s+/).map(o=>et(o,t)).join(" ")),et=(e,t)=>{e=e.trim();const o=t.loose?h[c.XRANGELOOSE]:h[c.XRANGE];return e.replace(o,(a,b,I,x,P,k)=>{i("xRange",e,a,b,I,x,P,k);const Z=S(I),$=Z||S(x),at=$||S(P),st=at;return b==="="&&st&&(b=""),k=t.includePrerelease?"-0":"",Z?a=b===">"||b==="<"?"<0.0.0-0":"*":b&&st?($&&(x=0),P=0,b===">"?(b=">=",$?(I=+I+1,x=0,P=0):(x=+x+1,P=0)):b==="<="&&(b="<",$?I=+I+1:x=+x+1),b==="<"&&(k="-0"),a=`${b+I}.${x}.${P}${k}`):$?a=`>=${I}.0.0${k} <${+I+1}.0.0-0`:at&&(a=`>=${I}.${x}.0${k} <${I}.${+x+1}.0-0`),i("xRange return",a),a})},it=(e,t)=>(i("replaceStars",e,t),e.trim().replace(h[c.STAR],"")),n=(e,t)=>(i("replaceGTE0",e,t),e.trim().replace(h[t.includePrerelease?c.GTE0PRE:c.GTE0],"")),l=e=>(t,o,a,b,I,x,P,k,Z,$,at,st,yt)=>`${o=S(a)?"":S(b)?`>=${a}.0.0${e?"-0":""}`:S(I)?`>=${a}.${b}.0${e?"-0":""}`:x?`>=${o}`:`>=${o}${e?"-0":""}`} ${k=S(Z)?"":S($)?`<${+Z+1}.0.0-0`:S(at)?`<${Z}.${+$+1}.0-0`:st?`<=${Z}.${$}.${at}-${st}`:e?`<${Z}.${$}.${+at+1}-0`:`<=${k}`}`.trim(),r=(e,t,o)=>{for(let a=0;a<e.length;a++)if(!e[a].test(t))return!1;if(t.prerelease.length&&!o.includePrerelease){for(let a=0;a<e.length;a++)if(i(e[a].semver),e[a].semver!==g.ANY&&e[a].semver.prerelease.length>0){const b=e[a].semver;if(b.major===t.major&&b.minor===t.minor&&b.patch===t.patch)return!0}return!1}return!0}},(_,E,s)=>{const y=s(90),v=Symbol("max"),d=Symbol("length"),g=Symbol("lengthCalculator"),i=Symbol("allowStale"),u=Symbol("maxAge"),h=Symbol("dispose"),c=Symbol("noDisposeOnSet"),p=Symbol("lruList"),f=Symbol("cache"),m=Symbol("updateAgeOnGet"),w=()=>1,A=(U,H,Q)=>{const et=U[f].get(H);if(et){const it=et.value;if(C(U,it)){if(S(U,et),!U[i])return}else Q&&(U[m]&&(et.value.now=Date.now()),U[p].unshiftNode(et));return it.value}},C=(U,H)=>{if(!H||!H.maxAge&&!U[u])return!1;const Q=Date.now()-H.now;return H.maxAge?Q>H.maxAge:U[u]&&Q>U[u]},M=U=>{if(U[d]>U[v])for(let H=U[p].tail;U[d]>U[v]&&H!==null;){const Q=H.prev;S(U,H),H=Q}},S=(U,H)=>{if(H){const Q=H.value;U[h]&&U[h](Q.key,Q.value),U[d]-=Q.length,U[f].delete(Q.key),U[p].removeNode(H)}};class q{constructor(H,Q,et,it,n){this.key=H,this.value=Q,this.length=et,this.now=it,this.maxAge=n||0}}const G=(U,H,Q,et)=>{let it=Q.value;C(U,it)&&(S(U,Q),U[i]||(it=void 0)),it&&H.call(et,it.value,it.key,U)};_.exports=class{constructor(U){if(typeof U=="number"&&(U={max:U}),U||(U={}),U.max&&(typeof U.max!="number"||U.max<0))throw new TypeError("max must be a non-negative number");this[v]=U.max||1/0;const H=U.length||w;if(this[g]=typeof H!="function"?w:H,this[i]=U.stale||!1,U.maxAge&&typeof U.maxAge!="number")throw new TypeError("maxAge must be a number");this[u]=U.maxAge||0,this[h]=U.dispose,this[c]=U.noDisposeOnSet||!1,this[m]=U.updateAgeOnGet||!1,this.reset()}set max(U){if(typeof U!="number"||U<0)throw new TypeError("max must be a non-negative number");this[v]=U||1/0,M(this)}get max(){return this[v]}set allowStale(U){this[i]=!!U}get allowStale(){return this[i]}set maxAge(U){if(typeof U!="number")throw new TypeError("maxAge must be a non-negative number");this[u]=U,M(this)}get maxAge(){return this[u]}set lengthCalculator(U){typeof U!="function"&&(U=w),U!==this[g]&&(this[g]=U,this[d]=0,this[p].forEach(H=>{H.length=this[g](H.value,H.key),this[d]+=H.length})),M(this)}get lengthCalculator(){return this[g]}get length(){return this[d]}get itemCount(){return this[p].length}rforEach(U,H){H=H||this;for(let Q=this[p].tail;Q!==null;){const et=Q.prev;G(this,U,Q,H),Q=et}}forEach(U,H){H=H||this;for(let Q=this[p].head;Q!==null;){const et=Q.next;G(this,U,Q,H),Q=et}}keys(){return this[p].toArray().map(U=>U.key)}values(){return this[p].toArray().map(U=>U.value)}reset(){this[h]&&this[p]&&this[p].length&&this[p].forEach(U=>this[h](U.key,U.value)),this[f]=new Map,this[p]=new y,this[d]=0}dump(){return this[p].map(U=>!C(this,U)&&{k:U.key,v:U.value,e:U.now+(U.maxAge||0)}).toArray().filter(U=>U)}dumpLru(){return this[p]}set(U,H,Q){if((Q=Q||this[u])&&typeof Q!="number")throw new TypeError("maxAge must be a number");const et=Q?Date.now():0,it=this[g](H,U);if(this[f].has(U)){if(it>this[v])return S(this,this[f].get(U)),!1;const l=this[f].get(U).value;return this[h]&&(this[c]||this[h](U,l.value)),l.now=et,l.maxAge=Q,l.value=H,this[d]+=it-l.length,l.length=it,this.get(U),M(this),!0}const n=new q(U,H,it,et,Q);return n.length>this[v]?(this[h]&&this[h](U,H),!1):(this[d]+=n.length,this[p].unshift(n),this[f].set(U,this[p].head),M(this),!0)}has(U){if(!this[f].has(U))return!1;const H=this[f].get(U).value;return!C(this,H)}get(U){return A(this,U,!0)}peek(U){return A(this,U,!1)}pop(){const U=this[p].tail;return U?(S(this,U),U.value):null}del(U){S(this,this[f].get(U))}load(U){this.reset();const H=Date.now();for(let Q=U.length-1;Q>=0;Q--){const et=U[Q],it=et.e||0;if(it===0)this.set(et.k,et.v);else{const n=it-H;n>0&&this.set(et.k,et.v,n)}}}prune(){this[f].forEach((U,H)=>A(this,H,!1))}}},(_,E,s)=>{function y(u){var h=this;if(h instanceof y||(h=new y),h.tail=null,h.head=null,h.length=0,u&&typeof u.forEach=="function")u.forEach(function(f){h.push(f)});else if(arguments.length>0)for(var c=0,p=arguments.length;c<p;c++)h.push(arguments[c]);return h}function v(u,h,c){var p=h===u.head?new i(c,null,h,u):new i(c,h,h.next,u);return p.next===null&&(u.tail=p),p.prev===null&&(u.head=p),u.length++,p}function d(u,h){u.tail=new i(h,u.tail,null,u),u.head||(u.head=u.tail),u.length++}function g(u,h){u.head=new i(h,null,u.head,u),u.tail||(u.tail=u.head),u.length++}function i(u,h,c,p){if(!(this instanceof i))return new i(u,h,c,p);this.list=p,this.value=u,h?(h.next=this,this.prev=h):this.prev=null,c?(c.prev=this,this.next=c):this.next=null}_.exports=y,y.Node=i,y.create=y,y.prototype.removeNode=function(u){if(u.list!==this)throw new Error("removing node which does not belong to this list");var h=u.next,c=u.prev;return h&&(h.prev=c),c&&(c.next=h),u===this.head&&(this.head=h),u===this.tail&&(this.tail=c),u.list.length--,u.next=null,u.prev=null,u.list=null,h},y.prototype.unshiftNode=function(u){if(u!==this.head){u.list&&u.list.removeNode(u);var h=this.head;u.list=this,u.next=h,h&&(h.prev=u),this.head=u,this.tail||(this.tail=u),this.length++}},y.prototype.pushNode=function(u){if(u!==this.tail){u.list&&u.list.removeNode(u);var h=this.tail;u.list=this,u.prev=h,h&&(h.next=u),this.tail=u,this.head||(this.head=u),this.length++}},y.prototype.push=function(){for(var u=0,h=arguments.length;u<h;u++)d(this,arguments[u]);return this.length},y.prototype.unshift=function(){for(var u=0,h=arguments.length;u<h;u++)g(this,arguments[u]);return this.length},y.prototype.pop=function(){if(this.tail){var u=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,u}},y.prototype.shift=function(){if(this.head){var u=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,u}},y.prototype.forEach=function(u,h){h=h||this;for(var c=this.head,p=0;c!==null;p++)u.call(h,c.value,p,this),c=c.next},y.prototype.forEachReverse=function(u,h){h=h||this;for(var c=this.tail,p=this.length-1;c!==null;p--)u.call(h,c.value,p,this),c=c.prev},y.prototype.get=function(u){for(var h=0,c=this.head;c!==null&&h<u;h++)c=c.next;if(h===u&&c!==null)return c.value},y.prototype.getReverse=function(u){for(var h=0,c=this.tail;c!==null&&h<u;h++)c=c.prev;if(h===u&&c!==null)return c.value},y.prototype.map=function(u,h){h=h||this;for(var c=new y,p=this.head;p!==null;)c.push(u.call(h,p.value,this)),p=p.next;return c},y.prototype.mapReverse=function(u,h){h=h||this;for(var c=new y,p=this.tail;p!==null;)c.push(u.call(h,p.value,this)),p=p.prev;return c},y.prototype.reduce=function(u,h){var c,p=this.head;if(arguments.length>1)c=h;else{if(!this.head)throw new TypeError("Reduce of empty list with no initial value");p=this.head.next,c=this.head.value}for(var f=0;p!==null;f++)c=u(c,p.value,f),p=p.next;return c},y.prototype.reduceReverse=function(u,h){var c,p=this.tail;if(arguments.length>1)c=h;else{if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");p=this.tail.prev,c=this.tail.value}for(var f=this.length-1;p!==null;f--)c=u(c,p.value,f),p=p.prev;return c},y.prototype.toArray=function(){for(var u=new Array(this.length),h=0,c=this.head;c!==null;h++)u[h]=c.value,c=c.next;return u},y.prototype.toArrayReverse=function(){for(var u=new Array(this.length),h=0,c=this.tail;c!==null;h++)u[h]=c.value,c=c.prev;return u},y.prototype.slice=function(u,h){(h=h||this.length)<0&&(h+=this.length),(u=u||0)<0&&(u+=this.length);var c=new y;if(h<u||h<0)return c;u<0&&(u=0),h>this.length&&(h=this.length);for(var p=0,f=this.head;f!==null&&p<u;p++)f=f.next;for(;f!==null&&p<h;p++,f=f.next)c.push(f.value);return c},y.prototype.sliceReverse=function(u,h){(h=h||this.length)<0&&(h+=this.length),(u=u||0)<0&&(u+=this.length);var c=new y;if(h<u||h<0)return c;u<0&&(u=0),h>this.length&&(h=this.length);for(var p=this.length,f=this.tail;f!==null&&p>h;p--)f=f.prev;for(;f!==null&&p>u;p--,f=f.prev)c.push(f.value);return c},y.prototype.splice=function(u,h,...c){u>this.length&&(u=this.length-1),u<0&&(u=this.length+u);for(var p=0,f=this.head;f!==null&&p<u;p++)f=f.next;var m=[];for(p=0;f&&p<h;p++)m.push(f.value),f=this.removeNode(f);for(f===null&&(f=this.tail),f!==this.head&&f!==this.tail&&(f=f.prev),p=0;p<c.length;p++)f=v(this,f,c[p]);return m},y.prototype.reverse=function(){for(var u=this.head,h=this.tail,c=u;c!==null;c=c.prev){var p=c.prev;c.prev=c.next,c.next=p}return this.head=h,this.tail=u,this};try{s(91)(y)}catch{}},_=>{_.exports=function(E){E.prototype[Symbol.iterator]=function*(){for(let s=this.head;s;s=s.next)yield s.value}}},(_,E,s)=>{const y=s(88);_.exports=(v,d,g)=>{try{d=new y(d,g)}catch{return!1}return d.test(v)}},(_,E,s)=>{const y=s(88);_.exports=(v,d)=>new y(v,d).set.map(g=>g.map(i=>i.value).join(" ").trim().split(" "))},(_,E,s)=>{const y=s(61),v=s(88);_.exports=(d,g,i)=>{let u=null,h=null,c=null;try{c=new v(g,i)}catch{return null}return d.forEach(p=>{c.test(p)&&(u&&h.compare(p)!==-1||(u=p,h=new y(u,i)))}),u}},(_,E,s)=>{const y=s(61),v=s(88);_.exports=(d,g,i)=>{let u=null,h=null,c=null;try{c=new v(g,i)}catch{return null}return d.forEach(p=>{c.test(p)&&(u&&h.compare(p)!==1||(u=p,h=new y(u,i)))}),u}},(_,E,s)=>{const y=s(61),v=s(88),d=s(80);_.exports=(g,i)=>{g=new v(g,i);let u=new y("0.0.0");if(g.test(u)||(u=new y("0.0.0-0"),g.test(u)))return u;u=null;for(let h=0;h<g.set.length;++h){const c=g.set[h];let p=null;c.forEach(f=>{const m=new y(f.semver.version);switch(f.operator){case">":m.prerelease.length===0?m.patch++:m.prerelease.push(0),m.raw=m.format();case"":case">=":p&&!d(m,p)||(p=m);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${f.operator}`)}}),!p||u&&!d(u,p)||(u=p)}return u&&g.test(u)?u:null}},(_,E,s)=>{const y=s(88);_.exports=(v,d)=>{try{return new y(v,d).range||"*"}catch{return null}}},(_,E,s)=>{const y=s(61),v=s(87),{ANY:d}=v,g=s(88),i=s(92),u=s(80),h=s(81),c=s(84),p=s(83);_.exports=(f,m,w,A)=>{let C,M,S,q,G;switch(f=new y(f,A),m=new g(m,A),w){case">":C=u,M=c,S=h,q=">",G=">=";break;case"<":C=h,M=p,S=u,q="<",G="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(i(f,m,A))return!1;for(let U=0;U<m.set.length;++U){const H=m.set[U];let Q=null,et=null;if(H.forEach(it=>{it.semver===d&&(it=new v(">=0.0.0")),Q=Q||it,et=et||it,C(it.semver,Q.semver,A)?Q=it:S(it.semver,et.semver,A)&&(et=it)}),Q.operator===q||Q.operator===G||(!et.operator||et.operator===q)&&M(f,et.semver)||et.operator===G&&S(f,et.semver))return!1}return!0}},(_,E,s)=>{const y=s(98);_.exports=(v,d,g)=>y(v,d,">",g)},(_,E,s)=>{const y=s(98);_.exports=(v,d,g)=>y(v,d,"<",g)},(_,E,s)=>{const y=s(88);_.exports=(v,d,g)=>(v=new y(v,g),d=new y(d,g),v.intersects(d))},(_,E,s)=>{const y=s(92),v=s(70);_.exports=(d,g,i)=>{const u=[];let h=null,c=null;const p=d.sort((A,C)=>v(A,C,i));for(const A of p)y(A,g,i)?(c=A,h||(h=A)):(c&&u.push([h,c]),c=null,h=null);h&&u.push([h,null]);const f=[];for(const[A,C]of u)A===C?f.push(A):C||A!==p[0]?C?A===p[0]?f.push(`<=${C}`):f.push(`${A} - ${C}`):f.push(`>=${A}`):f.push("*");const m=f.join(" || "),w=typeof g.raw=="string"?g.raw:String(g);return m.length<w.length?m:g}},(_,E,s)=>{const y=s(88),v=s(87),{ANY:d}=v,g=s(92),i=s(70),u=(p,f,m)=>{if(p===f)return!0;if(p.length===1&&p[0].semver===d){if(f.length===1&&f[0].semver===d)return!0;p=m.includePrerelease?[new v(">=0.0.0-0")]:[new v(">=0.0.0")]}if(f.length===1&&f[0].semver===d){if(m.includePrerelease)return!0;f=[new v(">=0.0.0")]}const w=new Set;let A,C,M,S,q,G,U;for(const et of p)et.operator===">"||et.operator===">="?A=h(A,et,m):et.operator==="<"||et.operator==="<="?C=c(C,et,m):w.add(et.semver);if(w.size>1||A&&C&&(M=i(A.semver,C.semver,m),M>0||M===0&&(A.operator!==">="||C.operator!=="<=")))return null;for(const et of w){if(A&&!g(et,String(A),m)||C&&!g(et,String(C),m))return null;for(const it of f)if(!g(et,String(it),m))return!1;return!0}let H=!(!C||m.includePrerelease||!C.semver.prerelease.length)&&C.semver,Q=!(!A||m.includePrerelease||!A.semver.prerelease.length)&&A.semver;H&&H.prerelease.length===1&&C.operator==="<"&&H.prerelease[0]===0&&(H=!1);for(const et of f){if(U=U||et.operator===">"||et.operator===">=",G=G||et.operator==="<"||et.operator==="<=",A){if(Q&&et.semver.prerelease&&et.semver.prerelease.length&&et.semver.major===Q.major&&et.semver.minor===Q.minor&&et.semver.patch===Q.patch&&(Q=!1),et.operator===">"||et.operator===">="){if(S=h(A,et,m),S===et&&S!==A)return!1}else if(A.operator===">="&&!g(A.semver,String(et),m))return!1}if(C){if(H&&et.semver.prerelease&&et.semver.prerelease.length&&et.semver.major===H.major&&et.semver.minor===H.minor&&et.semver.patch===H.patch&&(H=!1),et.operator==="<"||et.operator==="<="){if(q=c(C,et,m),q===et&&q!==C)return!1}else if(C.operator==="<="&&!g(C.semver,String(et),m))return!1}if(!et.operator&&(C||A)&&M!==0)return!1}return!(A&&G&&!C&&M!==0||C&&U&&!A&&M!==0||Q||H)},h=(p,f,m)=>{if(!p)return f;const w=i(p.semver,f.semver,m);return w>0?p:w<0||f.operator===">"&&p.operator===">="?f:p},c=(p,f,m)=>{if(!p)return f;const w=i(p.semver,f.semver,m);return w<0?p:w>0||f.operator==="<"&&p.operator==="<="?f:p};_.exports=(p,f,m={})=>{if(p===f)return!0;p=new y(p,m),f=new y(f,m);let w=!1;t:for(const A of p.set){for(const C of f.set){const M=u(A,C,m);if(w=w||M!==null,M)continue t}if(w)return!1}return!0}},(_,E,s)=>{s.r(E),s.d(E,{listen:()=>g,log:()=>d});let y=0;const v=[],d=(i,u,h)=>{const c={type:i,id:String(++y),date:new Date};u&&(c.message=u),h&&(c.data=h),function(p){for(let f=0;f<v.length;f++)try{v[f](p)}catch(m){console.error(m)}}(c)},g=i=>(v.push(i),()=>{const u=v.indexOf(i);u!==-1&&(v[u]=v[v.length-1],v.pop())});typeof window<"u"&&(window.__ledgerLogsListen=g)},(_,E,s)=>{s.r(E),s.d(E,{getFirstLedgerDevice:()=>i,getLedgerDevices:()=>g,isSupported:()=>u,requestLedgerDevice:()=>d});var y=s(56);const v=[{vendorId:y.ledgerUSBVendorId}];async function d(){return await navigator.usb.requestDevice({filters:v})}async function g(){return(await navigator.usb.getDevices()).filter(h=>h.vendorId===y.ledgerUSBVendorId)}async function i(){const h=await g();return h.length>0?h[0]:d()}const u=()=>Promise.resolve(!!navigator&&!!navigator.usb&&typeof navigator.usb.getDevices=="function")},(_,E,s)=>{s.r(E),s.d(E,{default:()=>m});var y=s(52),v=s(55),d=s(56),g=s(104),i=s(54),u=s(9).Buffer;const h=[{vendorId:d.ledgerUSBVendorId}],c=()=>{const{hid:w}=navigator;if(!w)throw new i.TransportError("navigator.hid is not supported","HIDNotSupported");return w};async function p(){const w=await c().requestDevice({filters:h});return Array.isArray(w)?w:[w]}async function f(){return(await c().getDevices()).filter(w=>w.vendorId===d.ledgerUSBVendorId)}class m extends y.default{constructor(A){super(),this.device=void 0,this.deviceModel=void 0,this.channel=Math.floor(65535*Math.random()),this.packetSize=64,this.inputs=[],this.inputCallback=void 0,this.read=()=>this.inputs.length?Promise.resolve(this.inputs.shift()):new Promise(C=>{this.inputCallback=C}),this.onInputReport=C=>{const M=u.from(C.data.buffer);this.inputCallback?(this.inputCallback(M),this.inputCallback=null):this.inputs.push(M)},this._disconnectEmitted=!1,this._emitDisconnect=C=>{this._disconnectEmitted||(this._disconnectEmitted=!0,this.emit("disconnect",C))},this.exchange=C=>this.exchangeAtomicImpl(async()=>{const{channel:M,packetSize:S}=this;(0,g.log)("apdu","=> "+C.toString("hex"));const q=(0,v.default)(M,S),G=q.makeBlocks(C);for(let Q=0;Q<G.length;Q++)await this.device.sendReport(0,G[Q]);let U,H;for(;!(U=q.getReducedResult(H));){const Q=await this.read();H=q.reduceResponse(H,Q)}return(0,g.log)("apdu","<= "+U.toString("hex")),U}).catch(M=>{throw M&&M.message&&M.message.includes("write")?(this._emitDisconnect(M),new i.DisconnectedDeviceDuringOperation(M.message)):M}),this.device=A,this.deviceModel=(0,d.identifyUSBProductId)(A.productId),A.addEventListener("inputreport",this.onInputReport)}static async request(){const[A]=await p();return m.open(A)}static async openConnected(){const A=await f();return A.length===0?null:m.open(A[0])}static async open(A){await A.open();const C=new m(A),M=S=>{A===S.device&&(c().removeEventListener("disconnect",M),C._emitDisconnect(new i.DisconnectedDevice))};return c().addEventListener("disconnect",M),C}async close(){await this.exchangeBusyPromise,this.device.removeEventListener("inputreport",this.onInputReport),await this.device.close()}setScrambleKey(){}}m.isSupported=()=>Promise.resolve(!(!s.g.navigator||!s.g.navigator.hid)),m.list=f,m.listen=w=>{let A=!1;return async function(){const C=await f();return C.length>0?C[0]:(await p())[0]}().then(C=>{if(C){if(!A){const M=(0,d.identifyUSBProductId)(C.productId);w.next({type:"add",descriptor:C,deviceModel:M}),w.complete()}}else w.error(new i.TransportOpenUserCancelled("Access denied to use Ledger device"))},C=>{w.error(new i.TransportOpenUserCancelled(C.message))}),{unsubscribe:function(){A=!0}}}},(_,E,s)=>{s.r(E),s.d(E,{default:()=>it});var y=s(52),v=s(54),d=s(56),g=s(108),i=s(212),u=s(104),h=s(110),c=s(200),p=s(192),f=s(184),m=s(214),w=s(215),A=s(217),C=s(167),M=s(221),S=s(213),q=s(9).Buffer;const G=()=>{const{bluetooth:n}=navigator;if(n===void 0)throw new Error("web bluetooth not supported");return n},U=()=>h.Observable.create(n=>{const l=G(),r=t=>{n.next(t.value)};l.addEventListener("availabilitychanged",r);let e=!1;return l.getAvailability().then(t=>{e||n.next(t)}),()=>{e=!0,l.removeEventListener("availabilitychanged",r)}}),H={},Q=()=>({filters:(0,d.getBluetoothServiceUuids)().map(n=>({services:[n]}))});async function et(n,l){let r;if(typeof n=="string"){if(H[n])return(0,u.log)("ble-verbose","Transport in cache, using that."),H[n];r=await G().requestDevice(Q())}else r=n;r.gatt.connected||((0,u.log)("ble-verbose","not connected. connecting..."),await r.gatt.connect());const[e,t]=await(async st=>{if(!st.gatt)throw new Error("bluetooth gatt not found");const[yt]=await st.gatt.getPrimaryServices();if(!yt)throw new Error("bluetooth service not found");const Bt=(0,d.getInfosForServiceUuid)(yt.uuid);if(!Bt)throw new Error("bluetooth service infos not found");return[yt,Bt]})(r),{deviceModel:o,writeUuid:a,notifyUuid:b}=t,[I,x]=await Promise.all([e.getCharacteristic(a),e.getCharacteristic(b)]),P=(0,S.monitorCharacteristic)(x).pipe((0,m.tap)(st=>{(0,u.log)("ble-frame","<= "+st.toString("hex"))}),(0,w.share)()),k=P.subscribe(),Z=new it(r,I,P,o);if(!r.gatt.connected)throw new v.DisconnectedDevice;H[Z.id]=Z;const $=st=>{console.log("onDisconnect!",st),delete H[Z.id],Z.notYetDisconnected=!1,k.unsubscribe(),r.removeEventListener("gattserverdisconnected",$),(0,u.log)("ble-verbose",`BleTransport(${Z.id}) disconnected`),Z.emit("disconnect",st)};r.addEventListener("gattserverdisconnected",$);let at=Date.now();try{await Z.inferMTU()}finally{Date.now()-at<1e3&&(l=!1),l&&(await r.gatt.disconnect(),await new Promise(st=>setTimeout(st,4e3)))}return l?et(r,!1):Z}class it extends y.default{static listen(l){let r;return(0,u.log)("ble-verbose","listen..."),G().requestDevice(Q()).then(async e=>{r||(l.next({type:"add",descriptor:e}),l.complete())},e=>{l.error(new v.TransportOpenUserCancelled(e.message))}),{unsubscribe:function(){r=!0}}}static async open(l){return et(l,!0)}constructor(l,r,e,t){super(),this.id=void 0,this.device=void 0,this.mtuSize=20,this.writeCharacteristic=void 0,this.notifyObservable=void 0,this.notYetDisconnected=!0,this.deviceModel=void 0,this.exchange=o=>this.exchangeAtomicImpl(async()=>{try{const a=o.toString("hex");(0,u.log)("apdu",`=> ${a}`);const b=await(0,c.merge)(this.notifyObservable.pipe(i.receiveAPDU),(0,g.sendAPDU)(this.write,o,this.mtuSize)).toPromise(),I=b.toString("hex");return(0,u.log)("apdu",`<= ${I}`),b}catch(a){throw(0,u.log)("ble-error","exchange got "+String(a)),this.notYetDisconnected&&this.device.gatt.disconnect(),a}}),this.write=async o=>{(0,u.log)("ble-frame","=> "+o.toString("hex")),await this.writeCharacteristic.writeValue(o)},this.id=l.id,this.device=l,this.writeCharacteristic=r,this.notifyObservable=e,this.deviceModel=t,(0,u.log)("ble-verbose",`BleTransport(${String(this.id)}) new instance`)}async inferMTU(){let l=23;if(await this.exchangeAtomicImpl(async()=>{try{l=await(0,c.merge)(this.notifyObservable.pipe((0,A.first)(r=>r.readUInt8(0)===8),(0,C.map)(r=>r.readUInt8(5))),(0,p.defer)(()=>(0,f.from)(this.write(q.from([8,0,0,0,0])))).pipe((0,M.ignoreElements)())).toPromise()+3}catch(r){throw(0,u.log)("ble-error","inferMTU got "+String(r)),this.device.gatt.disconnect(),r}}),l>23){const r=l-3;(0,u.log)("ble-verbose",`BleTransport(${String(this.id)}) mtu set to ${String(r)}`),this.mtuSize=r}return this.mtuSize}setScrambleKey(){}async close(){this.exchangeBusyPromise&&await this.exchangeBusyPromise}}it.isSupported=()=>Promise.resolve().then(G).then(()=>!0,()=>!1),it.observeAvailability=n=>U.subscribe(n),it.list=()=>Promise.resolve([]),it.disconnect=async n=>{(0,u.log)("ble-verbose",`user disconnect(${n})`);const l=H[n];l&&l.device.gatt.disconnect()}},(_,E,s)=>{var y=s(9).Buffer;Object.defineProperty(E,"__esModule",{value:!0}),E.sendAPDU=void 0;var v=s(109),d=s(104);E.sendAPDU=(g,i,u)=>{const h=function(c,p){const f=[];for(let m=0,w=p(0);m<c.length;m+=w,w=p(m))f.push(c.slice(m,m+w));return f}(i,c=>u-(c===0?5:3)).map((c,p)=>{const f=y.alloc(p===0?5:3);return f.writeUInt8(5,0),f.writeUInt16BE(p,1),p===0&&f.writeUInt16BE(i.length,3),y.concat([f,c])});return v.Observable.create(c=>{let p=!1;return async function(){for(const f of h){if(p)return;await g(f)}}().then(()=>{p=!0,c.complete()},f=>{p=!0,(0,d.log)("ble-error","sendAPDU failure "+String(f)),c.error(f)}),()=>{p||((0,d.log)("ble-verbose","sendAPDU interruption"),p=!0)}})}},(_,E,s)=>{s.r(E),s.d(E,{ArgumentOutOfRangeError:()=>et.ArgumentOutOfRangeError,AsyncSubject:()=>c.AsyncSubject,BehaviorSubject:()=>u.BehaviorSubject,ConnectableObservable:()=>v.ConnectableObservable,EMPTY:()=>I.EMPTY,EmptyError:()=>it.EmptyError,GroupedObservable:()=>d.GroupedObservable,NEVER:()=>Bt.NEVER,Notification:()=>q.Notification,NotificationKind:()=>q.NotificationKind,ObjectUnsubscribedError:()=>n.ObjectUnsubscribedError,Observable:()=>y.Observable,ReplaySubject:()=>h.ReplaySubject,Scheduler:()=>C.Scheduler,Subject:()=>i.Subject,Subscriber:()=>S.Subscriber,Subscription:()=>M.Subscription,TimeoutError:()=>r.TimeoutError,UnsubscriptionError:()=>l.UnsubscriptionError,VirtualAction:()=>A.VirtualAction,VirtualTimeScheduler:()=>A.VirtualTimeScheduler,animationFrame:()=>w.animationFrame,animationFrameScheduler:()=>w.animationFrameScheduler,asap:()=>p.asap,asapScheduler:()=>p.asapScheduler,async:()=>f.async,asyncScheduler:()=>f.asyncScheduler,bindCallback:()=>e.bindCallback,bindNodeCallback:()=>t.bindNodeCallback,combineLatest:()=>o.combineLatest,concat:()=>a.concat,config:()=>D.config,defer:()=>b.defer,empty:()=>I.empty,forkJoin:()=>x.forkJoin,from:()=>P.from,fromEvent:()=>k.fromEvent,fromEventPattern:()=>Z.fromEventPattern,generate:()=>$.generate,identity:()=>H.identity,iif:()=>at.iif,interval:()=>st.interval,isObservable:()=>Q.isObservable,merge:()=>yt.merge,never:()=>Bt.never,noop:()=>U.noop,observable:()=>g.observable,of:()=>Lt.of,onErrorResumeNext:()=>wt.onErrorResumeNext,pairs:()=>gt.pairs,partition:()=>Nt.partition,pipe:()=>G.pipe,queue:()=>m.queue,queueScheduler:()=>m.queueScheduler,race:()=>Yt.race,range:()=>bt.range,scheduled:()=>B.scheduled,throwError:()=>Ht.throwError,timer:()=>ce.timer,using:()=>Ut.using,zip:()=>$t.zip});var y=s(110),v=s(127),d=s(132),g=s(124),i=s(129),u=s(133),h=s(134),c=s(151),p=s(152),f=s(156),m=s(144),w=s(157),A=s(160),C=s(147),M=s(118),S=s(112),q=s(136),G=s(125),U=s(161),H=s(126),Q=s(162),et=s(163),it=s(164),n=s(130),l=s(120),r=s(165),e=s(166),t=s(168),o=s(169),a=s(180),b=s(192),I=s(143),x=s(193),P=s(184),k=s(194),Z=s(195),$=s(196),at=s(197),st=s(198),yt=s(200),Bt=s(201),Lt=s(137),wt=s(202),gt=s(203),Nt=s(204),Yt=s(207),bt=s(208),Ht=s(142),ce=s(209),Ut=s(210),$t=s(211),B=s(185),D=s(115)},(_,E,s)=>{s.r(E),s.d(E,{Observable:()=>u});var y=s(123),v=s(111),d=s(124),g=s(125),i=s(115),u=function(){function c(p){this._isScalar=!1,p&&(this._subscribe=p)}return c.prototype.lift=function(p){var f=new c;return f.source=this,f.operator=p,f},c.prototype.subscribe=function(p,f,m){var w=this.operator,A=(0,v.toSubscriber)(p,f,m);if(w?A.add(w.call(A,this.source)):A.add(this.source||i.config.useDeprecatedSynchronousErrorHandling&&!A.syncErrorThrowable?this._subscribe(A):this._trySubscribe(A)),i.config.useDeprecatedSynchronousErrorHandling&&A.syncErrorThrowable&&(A.syncErrorThrowable=!1,A.syncErrorThrown))throw A.syncErrorValue;return A},c.prototype._trySubscribe=function(p){try{return this._subscribe(p)}catch(f){i.config.useDeprecatedSynchronousErrorHandling&&(p.syncErrorThrown=!0,p.syncErrorValue=f),(0,y.canReportError)(p)?p.error(f):console.warn(f)}},c.prototype.forEach=function(p,f){var m=this;return new(f=h(f))(function(w,A){var C;C=m.subscribe(function(M){try{p(M)}catch(S){A(S),C&&C.unsubscribe()}},A,w)})},c.prototype._subscribe=function(p){var f=this.source;return f&&f.subscribe(p)},c.prototype[d.observable]=function(){return this},c.prototype.pipe=function(){for(var p=[],f=0;f<arguments.length;f++)p[f]=arguments[f];return p.length===0?this:(0,g.pipeFromArray)(p)(this)},c.prototype.toPromise=function(p){var f=this;return new(p=h(p))(function(m,w){var A;f.subscribe(function(C){return A=C},function(C){return w(C)},function(){return m(A)})})},c.create=function(p){return new c(p)},c}();function h(c){if(c||(c=i.config.Promise||Promise),!c)throw new Error("no Promise impl found");return c}},(_,E,s)=>{s.r(E),s.d(E,{toSubscriber:()=>g});var y=s(112),v=s(117),d=s(114);function g(i,u,h){if(i){if(i instanceof y.Subscriber)return i;if(i[v.rxSubscriber])return i[v.rxSubscriber]()}return i||u||h?new y.Subscriber(i,u,h):new y.Subscriber(d.empty)}},(_,E,s)=>{s.r(E),s.d(E,{SafeSubscriber:()=>p,Subscriber:()=>c});var y=s(113),v=s(119),d=s(114),g=s(118),i=s(117),u=s(115),h=s(116),c=function(f){function m(w,A,C){var M=f.call(this)||this;switch(M.syncErrorValue=null,M.syncErrorThrown=!1,M.syncErrorThrowable=!1,M.isStopped=!1,arguments.length){case 0:M.destination=d.empty;break;case 1:if(!w){M.destination=d.empty;break}if(typeof w=="object"){w instanceof m?(M.syncErrorThrowable=w.syncErrorThrowable,M.destination=w,w.add(M)):(M.syncErrorThrowable=!0,M.destination=new p(M,w));break}default:M.syncErrorThrowable=!0,M.destination=new p(M,w,A,C)}return M}return y.__extends(m,f),m.prototype[i.rxSubscriber]=function(){return this},m.create=function(w,A,C){var M=new m(w,A,C);return M.syncErrorThrowable=!1,M},m.prototype.next=function(w){this.isStopped||this._next(w)},m.prototype.error=function(w){this.isStopped||(this.isStopped=!0,this._error(w))},m.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},m.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,f.prototype.unsubscribe.call(this))},m.prototype._next=function(w){this.destination.next(w)},m.prototype._error=function(w){this.destination.error(w),this.unsubscribe()},m.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},m.prototype._unsubscribeAndRecycle=function(){var w=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=w,this},m}(g.Subscription),p=function(f){function m(w,A,C,M){var S,q=f.call(this)||this;q._parentSubscriber=w;var G=q;return(0,v.isFunction)(A)?S=A:A&&(S=A.next,C=A.error,M=A.complete,A!==d.empty&&(G=Object.create(A),(0,v.isFunction)(G.unsubscribe)&&q.add(G.unsubscribe.bind(G)),G.unsubscribe=q.unsubscribe.bind(q))),q._context=G,q._next=S,q._error=C,q._complete=M,q}return y.__extends(m,f),m.prototype.next=function(w){if(!this.isStopped&&this._next){var A=this._parentSubscriber;u.config.useDeprecatedSynchronousErrorHandling&&A.syncErrorThrowable?this.__tryOrSetError(A,this._next,w)&&this.unsubscribe():this.__tryOrUnsub(this._next,w)}},m.prototype.error=function(w){if(!this.isStopped){var A=this._parentSubscriber,C=u.config.useDeprecatedSynchronousErrorHandling;if(this._error)C&&A.syncErrorThrowable?(this.__tryOrSetError(A,this._error,w),this.unsubscribe()):(this.__tryOrUnsub(this._error,w),this.unsubscribe());else if(A.syncErrorThrowable)C?(A.syncErrorValue=w,A.syncErrorThrown=!0):(0,h.hostReportError)(w),this.unsubscribe();else{if(this.unsubscribe(),C)throw w;(0,h.hostReportError)(w)}}},m.prototype.complete=function(){var w=this;if(!this.isStopped){var A=this._parentSubscriber;if(this._complete){var C=function(){return w._complete.call(w._context)};u.config.useDeprecatedSynchronousErrorHandling&&A.syncErrorThrowable?(this.__tryOrSetError(A,C),this.unsubscribe()):(this.__tryOrUnsub(C),this.unsubscribe())}else this.unsubscribe()}},m.prototype.__tryOrUnsub=function(w,A){try{w.call(this._context,A)}catch(C){if(this.unsubscribe(),u.config.useDeprecatedSynchronousErrorHandling)throw C;(0,h.hostReportError)(C)}},m.prototype.__tryOrSetError=function(w,A,C){if(!u.config.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{A.call(this._context,C)}catch(M){return u.config.useDeprecatedSynchronousErrorHandling?(w.syncErrorValue=M,w.syncErrorThrown=!0,!0):((0,h.hostReportError)(M),!0)}return!1},m.prototype._unsubscribe=function(){var w=this._parentSubscriber;this._context=null,this._parentSubscriber=null,w.unsubscribe()},m}(c)},(_,E,s)=>{s.r(E),s.d(E,{__assign:()=>d,__asyncDelegator:()=>q,__asyncGenerator:()=>S,__asyncValues:()=>G,__await:()=>M,__awaiter:()=>c,__classPrivateFieldGet:()=>et,__classPrivateFieldSet:()=>it,__decorate:()=>i,__exportStar:()=>f,__extends:()=>v,__generator:()=>p,__importDefault:()=>Q,__importStar:()=>H,__makeTemplateObject:()=>U,__metadata:()=>h,__param:()=>u,__read:()=>w,__rest:()=>g,__spread:()=>A,__spreadArrays:()=>C,__values:()=>m});var y=function(n,l){return y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,e){r.__proto__=e}||function(r,e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t])},y(n,l)};function v(n,l){function r(){this.constructor=n}y(n,l),n.prototype=l===null?Object.create(l):(r.prototype=l.prototype,new r)}var d=function(){return d=Object.assign||function(n){for(var l,r=1,e=arguments.length;r<e;r++)for(var t in l=arguments[r])Object.prototype.hasOwnProperty.call(l,t)&&(n[t]=l[t]);return n},d.apply(this,arguments)};function g(n,l){var r={};for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&l.indexOf(e)<0&&(r[e]=n[e]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function"){var t=0;for(e=Object.getOwnPropertySymbols(n);t<e.length;t++)l.indexOf(e[t])<0&&Object.prototype.propertyIsEnumerable.call(n,e[t])&&(r[e[t]]=n[e[t]])}return r}function i(n,l,r,e){var t,o=arguments.length,a=o<3?l:e===null?e=Object.getOwnPropertyDescriptor(l,r):e;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,l,r,e);else for(var b=n.length-1;b>=0;b--)(t=n[b])&&(a=(o<3?t(a):o>3?t(l,r,a):t(l,r))||a);return o>3&&a&&Object.defineProperty(l,r,a),a}function u(n,l){return function(r,e){l(r,e,n)}}function h(n,l){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,l)}function c(n,l,r,e){return new(r||(r=Promise))(function(t,o){function a(x){try{I(e.next(x))}catch(P){o(P)}}function b(x){try{I(e.throw(x))}catch(P){o(P)}}function I(x){var P;x.done?t(x.value):(P=x.value,P instanceof r?P:new r(function(k){k(P)})).then(a,b)}I((e=e.apply(n,l||[])).next())})}function p(n,l){var r,e,t,o,a={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return o={next:b(0),throw:b(1),return:b(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function b(I){return function(x){return function(P){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,e&&(t=2&P[0]?e.return:P[0]?e.throw||((t=e.return)&&t.call(e),0):e.next)&&!(t=t.call(e,P[1])).done)return t;switch(e=0,t&&(P=[2&P[0],t.value]),P[0]){case 0:case 1:t=P;break;case 4:return a.label++,{value:P[1],done:!1};case 5:a.label++,e=P[1],P=[0];continue;case 7:P=a.ops.pop(),a.trys.pop();continue;default:if(!((t=(t=a.trys).length>0&&t[t.length-1])||P[0]!==6&&P[0]!==2)){a=0;continue}if(P[0]===3&&(!t||P[1]>t[0]&&P[1]<t[3])){a.label=P[1];break}if(P[0]===6&&a.label<t[1]){a.label=t[1],t=P;break}if(t&&a.label<t[2]){a.label=t[2],a.ops.push(P);break}t[2]&&a.ops.pop(),a.trys.pop();continue}P=l.call(n,a)}catch(k){P=[6,k],e=0}finally{r=t=0}if(5&P[0])throw P[1];return{value:P[0]?P[1]:void 0,done:!0}}([I,x])}}}function f(n,l){for(var r in n)l.hasOwnProperty(r)||(l[r]=n[r])}function m(n){var l=typeof Symbol=="function"&&Symbol.iterator,r=l&&n[l],e=0;if(r)return r.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&e>=n.length&&(n=void 0),{value:n&&n[e++],done:!n}}};throw new TypeError(l?"Object is not iterable.":"Symbol.iterator is not defined.")}function w(n,l){var r=typeof Symbol=="function"&&n[Symbol.iterator];if(!r)return n;var e,t,o=r.call(n),a=[];try{for(;(l===void 0||l-- >0)&&!(e=o.next()).done;)a.push(e.value)}catch(b){t={error:b}}finally{try{e&&!e.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}return a}function A(){for(var n=[],l=0;l<arguments.length;l++)n=n.concat(w(arguments[l]));return n}function C(){for(var n=0,l=0,r=arguments.length;l<r;l++)n+=arguments[l].length;var e=Array(n),t=0;for(l=0;l<r;l++)for(var o=arguments[l],a=0,b=o.length;a<b;a++,t++)e[t]=o[a];return e}function M(n){return this instanceof M?(this.v=n,this):new M(n)}function S(n,l,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,t=r.apply(n,l||[]),o=[];return e={},a("next"),a("throw"),a("return"),e[Symbol.asyncIterator]=function(){return this},e;function a(k){t[k]&&(e[k]=function(Z){return new Promise(function($,at){o.push([k,Z,$,at])>1||b(k,Z)})})}function b(k,Z){try{($=t[k](Z)).value instanceof M?Promise.resolve($.value.v).then(I,x):P(o[0][2],$)}catch(at){P(o[0][3],at)}var $}function I(k){b("next",k)}function x(k){b("throw",k)}function P(k,Z){k(Z),o.shift(),o.length&&b(o[0][0],o[0][1])}}function q(n){var l,r;return l={},e("next"),e("throw",function(t){throw t}),e("return"),l[Symbol.iterator]=function(){return this},l;function e(t,o){l[t]=n[t]?function(a){return(r=!r)?{value:M(n[t](a)),done:t==="return"}:o?o(a):a}:o}}function G(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var l,r=n[Symbol.asyncIterator];return r?r.call(n):(n=m(n),l={},e("next"),e("throw"),e("return"),l[Symbol.asyncIterator]=function(){return this},l);function e(t){l[t]=n[t]&&function(o){return new Promise(function(a,b){(function(I,x,P,k){Promise.resolve(k).then(function(Z){I({value:Z,done:P})},x)})(a,b,(o=n[t](o)).done,o.value)})}}}function U(n,l){return Object.defineProperty?Object.defineProperty(n,"raw",{value:l}):n.raw=l,n}function H(n){if(n&&n.__esModule)return n;var l={};if(n!=null)for(var r in n)Object.hasOwnProperty.call(n,r)&&(l[r]=n[r]);return l.default=n,l}function Q(n){return n&&n.__esModule?n:{default:n}}function et(n,l){if(!l.has(n))throw new TypeError("attempted to get private field on non-instance");return l.get(n)}function it(n,l,r){if(!l.has(n))throw new TypeError("attempted to set private field on non-instance");return l.set(n,r),r}},(_,E,s)=>{s.r(E),s.d(E,{empty:()=>d});var y=s(115),v=s(116),d={closed:!0,next:function(g){},error:function(g){if(y.config.useDeprecatedSynchronousErrorHandling)throw g;(0,v.hostReportError)(g)},complete:function(){}}},(_,E,s)=>{s.r(E),s.d(E,{config:()=>v});var y=!1,v={Promise:void 0,set useDeprecatedSynchronousErrorHandling(d){d&&new Error().stack,y=d},get useDeprecatedSynchronousErrorHandling(){return y}}},(_,E,s)=>{function y(v){setTimeout(function(){throw v},0)}s.r(E),s.d(E,{hostReportError:()=>y})},(_,E,s)=>{s.r(E),s.d(E,{$$rxSubscriber:()=>v,rxSubscriber:()=>y});var y=function(){return typeof Symbol=="function"?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()}(),v=y},(_,E,s)=>{s.r(E),s.d(E,{Subscription:()=>i});var y=s(121),v=s(122),d=s(119),g=s(120),i=function(){function h(p){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,p&&(this._ctorUnsubscribe=!0,this._unsubscribe=p)}var c;return h.prototype.unsubscribe=function(){var p;if(!this.closed){var f=this,m=f._parentOrParents,w=f._ctorUnsubscribe,A=f._unsubscribe,C=f._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,m instanceof h)m.remove(this);else if(m!==null)for(var M=0;M<m.length;++M)m[M].remove(this);if((0,d.isFunction)(A)){w&&(this._unsubscribe=void 0);try{A.call(this)}catch(G){p=G instanceof g.UnsubscriptionError?u(G.errors):[G]}}if((0,y.isArray)(C)){M=-1;for(var S=C.length;++M<S;){var q=C[M];if((0,v.isObject)(q))try{q.unsubscribe()}catch(G){p=p||[],G instanceof g.UnsubscriptionError?p=p.concat(u(G.errors)):p.push(G)}}}if(p)throw new g.UnsubscriptionError(p)}},h.prototype.add=function(p){var f=p;if(!p)return h.EMPTY;switch(typeof p){case"function":f=new h(p);case"object":if(f===this||f.closed||typeof f.unsubscribe!="function")return f;if(this.closed)return f.unsubscribe(),f;if(!(f instanceof h)){var m=f;(f=new h)._subscriptions=[m]}break;default:throw new Error("unrecognized teardown "+p+" added to Subscription.")}var w=f._parentOrParents;if(w===null)f._parentOrParents=this;else if(w instanceof h){if(w===this)return f;f._parentOrParents=[w,this]}else{if(w.indexOf(this)!==-1)return f;w.push(this)}var A=this._subscriptions;return A===null?this._subscriptions=[f]:A.push(f),f},h.prototype.remove=function(p){var f=this._subscriptions;if(f){var m=f.indexOf(p);m!==-1&&f.splice(m,1)}},h.EMPTY=((c=new h).closed=!0,c),h}();function u(h){return h.reduce(function(c,p){return c.concat(p instanceof g.UnsubscriptionError?p.errors:p)},[])}},(_,E,s)=>{function y(v){return typeof v=="function"}s.r(E),s.d(E,{isFunction:()=>y})},(_,E,s)=>{s.r(E),s.d(E,{UnsubscriptionError:()=>y});var y=function(){function v(d){return Error.call(this),this.message=d?d.length+` errors occurred during unsubscription:
`+d.map(function(g,i){return i+1+") "+g.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=d,this}return v.prototype=Object.create(Error.prototype),v}()},(_,E,s)=>{s.r(E),s.d(E,{isArray:()=>y});var y=function(){return Array.isArray||function(v){return v&&typeof v.length=="number"}}()},(_,E,s)=>{function y(v){return v!==null&&typeof v=="object"}s.r(E),s.d(E,{isObject:()=>y})},(_,E,s)=>{s.r(E),s.d(E,{canReportError:()=>v});var y=s(112);function v(d){for(;d;){var g=d,i=g.closed,u=g.destination,h=g.isStopped;if(i||h)return!1;d=u&&u instanceof y.Subscriber?u:null}return!0}},(_,E,s)=>{s.r(E),s.d(E,{observable:()=>y});var y=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}()},(_,E,s)=>{s.r(E),s.d(E,{pipe:()=>v,pipeFromArray:()=>d});var y=s(126);function v(){for(var g=[],i=0;i<arguments.length;i++)g[i]=arguments[i];return d(g)}function d(g){return g.length===0?y.identity:g.length===1?g[0]:function(i){return g.reduce(function(u,h){return h(u)},i)}}},(_,E,s)=>{function y(v){return v}s.r(E),s.d(E,{identity:()=>y})},(_,E,s)=>{s.r(E),s.d(E,{ConnectableObservable:()=>h,connectableObservableDescriptor:()=>c});var y=s(113),v=s(129),d=s(110),g=s(112),i=s(118),u=s(128),h=function(f){function m(w,A){var C=f.call(this)||this;return C.source=w,C.subjectFactory=A,C._refCount=0,C._isComplete=!1,C}return y.__extends(m,f),m.prototype._subscribe=function(w){return this.getSubject().subscribe(w)},m.prototype.getSubject=function(){var w=this._subject;return w&&!w.isStopped||(this._subject=this.subjectFactory()),this._subject},m.prototype.connect=function(){var w=this._connection;return w||(this._isComplete=!1,(w=this._connection=new i.Subscription).add(this.source.subscribe(new p(this.getSubject(),this))),w.closed&&(this._connection=null,w=i.Subscription.EMPTY)),w},m.prototype.refCount=function(){return(0,u.refCount)()(this)},m}(d.Observable),c=function(){var f=h.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:f._subscribe},_isComplete:{value:f._isComplete,writable:!0},getSubject:{value:f.getSubject},connect:{value:f.connect},refCount:{value:f.refCount}}}(),p=function(f){function m(w,A){var C=f.call(this,w)||this;return C.connectable=A,C}return y.__extends(m,f),m.prototype._error=function(w){this._unsubscribe(),f.prototype._error.call(this,w)},m.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),f.prototype._complete.call(this)},m.prototype._unsubscribe=function(){var w=this.connectable;if(w){this.connectable=null;var A=w._connection;w._refCount=0,w._subject=null,w._connection=null,A&&A.unsubscribe()}},m}(v.SubjectSubscriber);g.Subscriber},(_,E,s)=>{s.r(E),s.d(E,{refCount:()=>d});var y=s(113),v=s(112);function d(){return function(u){return u.lift(new g(u))}}var g=function(){function u(h){this.connectable=h}return u.prototype.call=function(h,c){var p=this.connectable;p._refCount++;var f=new i(h,p),m=c.subscribe(f);return f.closed||(f.connection=p.connect()),m},u}(),i=function(u){function h(c,p){var f=u.call(this,c)||this;return f.connectable=p,f}return y.__extends(h,u),h.prototype._unsubscribe=function(){var c=this.connectable;if(c){this.connectable=null;var p=c._refCount;if(p<=0)this.connection=null;else if(c._refCount=p-1,p>1)this.connection=null;else{var f=this.connection,m=c._connection;this.connection=null,!m||f&&m!==f||m.unsubscribe()}}else this.connection=null},h}(v.Subscriber)},(_,E,s)=>{s.r(E),s.d(E,{AnonymousSubject:()=>f,Subject:()=>p,SubjectSubscriber:()=>c});var y=s(113),v=s(110),d=s(112),g=s(118),i=s(130),u=s(131),h=s(117),c=function(m){function w(A){var C=m.call(this,A)||this;return C.destination=A,C}return y.__extends(w,m),w}(d.Subscriber),p=function(m){function w(){var A=m.call(this)||this;return A.observers=[],A.closed=!1,A.isStopped=!1,A.hasError=!1,A.thrownError=null,A}return y.__extends(w,m),w.prototype[h.rxSubscriber]=function(){return new c(this)},w.prototype.lift=function(A){var C=new f(this,this);return C.operator=A,C},w.prototype.next=function(A){if(this.closed)throw new i.ObjectUnsubscribedError;if(!this.isStopped)for(var C=this.observers,M=C.length,S=C.slice(),q=0;q<M;q++)S[q].next(A)},w.prototype.error=function(A){if(this.closed)throw new i.ObjectUnsubscribedError;this.hasError=!0,this.thrownError=A,this.isStopped=!0;for(var C=this.observers,M=C.length,S=C.slice(),q=0;q<M;q++)S[q].error(A);this.observers.length=0},w.prototype.complete=function(){if(this.closed)throw new i.ObjectUnsubscribedError;this.isStopped=!0;for(var A=this.observers,C=A.length,M=A.slice(),S=0;S<C;S++)M[S].complete();this.observers.length=0},w.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},w.prototype._trySubscribe=function(A){if(this.closed)throw new i.ObjectUnsubscribedError;return m.prototype._trySubscribe.call(this,A)},w.prototype._subscribe=function(A){if(this.closed)throw new i.ObjectUnsubscribedError;return this.hasError?(A.error(this.thrownError),g.Subscription.EMPTY):this.isStopped?(A.complete(),g.Subscription.EMPTY):(this.observers.push(A),new u.SubjectSubscription(this,A))},w.prototype.asObservable=function(){var A=new v.Observable;return A.source=this,A},w.create=function(A,C){return new f(A,C)},w}(v.Observable),f=function(m){function w(A,C){var M=m.call(this)||this;return M.destination=A,M.source=C,M}return y.__extends(w,m),w.prototype.next=function(A){var C=this.destination;C&&C.next&&C.next(A)},w.prototype.error=function(A){var C=this.destination;C&&C.error&&this.destination.error(A)},w.prototype.complete=function(){var A=this.destination;A&&A.complete&&this.destination.complete()},w.prototype._subscribe=function(A){return this.source?this.source.subscribe(A):g.Subscription.EMPTY},w}(p)},(_,E,s)=>{s.r(E),s.d(E,{ObjectUnsubscribedError:()=>y});var y=function(){function v(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return v.prototype=Object.create(Error.prototype),v}()},(_,E,s)=>{s.r(E),s.d(E,{SubjectSubscription:()=>v});var y=s(113),v=function(d){function g(i,u){var h=d.call(this)||this;return h.subject=i,h.subscriber=u,h.closed=!1,h}return y.__extends(g,d),g.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var i=this.subject,u=i.observers;if(this.subject=null,u&&u.length!==0&&!i.isStopped&&!i.closed){var h=u.indexOf(this.subscriber);h!==-1&&u.splice(h,1)}}},g}(s(118).Subscription)},(_,E,s)=>{s.r(E),s.d(E,{GroupedObservable:()=>f,groupBy:()=>u});var y=s(113),v=s(112),d=s(118),g=s(110),i=s(129);function u(w,A,C,M){return function(S){return S.lift(new h(w,A,C,M))}}var h=function(){function w(A,C,M,S){this.keySelector=A,this.elementSelector=C,this.durationSelector=M,this.subjectSelector=S}return w.prototype.call=function(A,C){return C.subscribe(new c(A,this.keySelector,this.elementSelector,this.durationSelector,this.subjectSelector))},w}(),c=function(w){function A(C,M,S,q,G){var U=w.call(this,C)||this;return U.keySelector=M,U.elementSelector=S,U.durationSelector=q,U.subjectSelector=G,U.groups=null,U.attemptedToUnsubscribe=!1,U.count=0,U}return y.__extends(A,w),A.prototype._next=function(C){var M;try{M=this.keySelector(C)}catch(S){return void this.error(S)}this._group(C,M)},A.prototype._group=function(C,M){var S=this.groups;S||(S=this.groups=new Map);var q,G=S.get(M);if(this.elementSelector)try{q=this.elementSelector(C)}catch(Q){this.error(Q)}else q=C;if(!G){G=this.subjectSelector?this.subjectSelector():new i.Subject,S.set(M,G);var U=new f(M,G,this);if(this.destination.next(U),this.durationSelector){var H=void 0;try{H=this.durationSelector(new f(M,G))}catch(Q){return void this.error(Q)}this.add(H.subscribe(new p(M,G,this)))}}G.closed||G.next(q)},A.prototype._error=function(C){var M=this.groups;M&&(M.forEach(function(S,q){S.error(C)}),M.clear()),this.destination.error(C)},A.prototype._complete=function(){var C=this.groups;C&&(C.forEach(function(M,S){M.complete()}),C.clear()),this.destination.complete()},A.prototype.removeGroup=function(C){this.groups.delete(C)},A.prototype.unsubscribe=function(){this.closed||(this.attemptedToUnsubscribe=!0,this.count===0&&w.prototype.unsubscribe.call(this))},A}(v.Subscriber),p=function(w){function A(C,M,S){var q=w.call(this,M)||this;return q.key=C,q.group=M,q.parent=S,q}return y.__extends(A,w),A.prototype._next=function(C){this.complete()},A.prototype._unsubscribe=function(){var C=this.parent,M=this.key;this.key=this.parent=null,C&&C.removeGroup(M)},A}(v.Subscriber),f=function(w){function A(C,M,S){var q=w.call(this)||this;return q.key=C,q.groupSubject=M,q.refCountSubscription=S,q}return y.__extends(A,w),A.prototype._subscribe=function(C){var M=new d.Subscription,S=this.refCountSubscription,q=this.groupSubject;return S&&!S.closed&&M.add(new m(S)),M.add(q.subscribe(C)),M},A}(g.Observable),m=function(w){function A(C){var M=w.call(this)||this;return M.parent=C,C.count++,M}return y.__extends(A,w),A.prototype.unsubscribe=function(){var C=this.parent;C.closed||this.closed||(w.prototype.unsubscribe.call(this),C.count-=1,C.count===0&&C.attemptedToUnsubscribe&&C.unsubscribe())},A}(d.Subscription)},(_,E,s)=>{s.r(E),s.d(E,{BehaviorSubject:()=>g});var y=s(113),v=s(129),d=s(130),g=function(i){function u(h){var c=i.call(this)||this;return c._value=h,c}return y.__extends(u,i),Object.defineProperty(u.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),u.prototype._subscribe=function(h){var c=i.prototype._subscribe.call(this,h);return c&&!c.closed&&h.next(this._value),c},u.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new d.ObjectUnsubscribedError;return this._value},u.prototype.next=function(h){i.prototype.next.call(this,this._value=h)},u}(v.Subject)},(_,E,s)=>{s.r(E),s.d(E,{ReplaySubject:()=>c});var y=s(113),v=s(129),d=s(144),g=s(118),i=s(135),u=s(130),h=s(131),c=function(f){function m(w,A,C){w===void 0&&(w=Number.POSITIVE_INFINITY),A===void 0&&(A=Number.POSITIVE_INFINITY);var M=f.call(this)||this;return M.scheduler=C,M._events=[],M._infiniteTimeWindow=!1,M._bufferSize=w<1?1:w,M._windowTime=A<1?1:A,A===Number.POSITIVE_INFINITY?(M._infiniteTimeWindow=!0,M.next=M.nextInfiniteTimeWindow):M.next=M.nextTimeWindow,M}return y.__extends(m,f),m.prototype.nextInfiniteTimeWindow=function(w){if(!this.isStopped){var A=this._events;A.push(w),A.length>this._bufferSize&&A.shift()}f.prototype.next.call(this,w)},m.prototype.nextTimeWindow=function(w){this.isStopped||(this._events.push(new p(this._getNow(),w)),this._trimBufferThenGetEvents()),f.prototype.next.call(this,w)},m.prototype._subscribe=function(w){var A,C=this._infiniteTimeWindow,M=C?this._events:this._trimBufferThenGetEvents(),S=this.scheduler,q=M.length;if(this.closed)throw new u.ObjectUnsubscribedError;if(this.isStopped||this.hasError?A=g.Subscription.EMPTY:(this.observers.push(w),A=new h.SubjectSubscription(this,w)),S&&w.add(w=new i.ObserveOnSubscriber(w,S)),C)for(var G=0;G<q&&!w.closed;G++)w.next(M[G]);else for(G=0;G<q&&!w.closed;G++)w.next(M[G].value);return this.hasError?w.error(this.thrownError):this.isStopped&&w.complete(),A},m.prototype._getNow=function(){return(this.scheduler||d.queue).now()},m.prototype._trimBufferThenGetEvents=function(){for(var w=this._getNow(),A=this._bufferSize,C=this._windowTime,M=this._events,S=M.length,q=0;q<S&&!(w-M[q].time<C);)q++;return S>A&&(q=Math.max(q,S-A)),q>0&&M.splice(0,q),M},m}(v.Subject),p=function(){return function(f,m){this.time=f,this.value=m}}()},(_,E,s)=>{s.r(E),s.d(E,{ObserveOnMessage:()=>h,ObserveOnOperator:()=>i,ObserveOnSubscriber:()=>u,observeOn:()=>g});var y=s(113),v=s(112),d=s(136);function g(c,p){return p===void 0&&(p=0),function(f){return f.lift(new i(c,p))}}var i=function(){function c(p,f){f===void 0&&(f=0),this.scheduler=p,this.delay=f}return c.prototype.call=function(p,f){return f.subscribe(new u(p,this.scheduler,this.delay))},c}(),u=function(c){function p(f,m,w){w===void 0&&(w=0);var A=c.call(this,f)||this;return A.scheduler=m,A.delay=w,A}return y.__extends(p,c),p.dispatch=function(f){var m=f.notification,w=f.destination;m.observe(w),this.unsubscribe()},p.prototype.scheduleMessage=function(f){this.destination.add(this.scheduler.schedule(p.dispatch,this.delay,new h(f,this.destination)))},p.prototype._next=function(f){this.scheduleMessage(d.Notification.createNext(f))},p.prototype._error=function(f){this.scheduleMessage(d.Notification.createError(f)),this.unsubscribe()},p.prototype._complete=function(){this.scheduleMessage(d.Notification.createComplete()),this.unsubscribe()},p}(v.Subscriber),h=function(){return function(c,p){this.notification=c,this.destination=p}}()},(_,E,s)=>{s.r(E),s.d(E,{Notification:()=>i,NotificationKind:()=>y});var y,v=s(143),d=s(137),g=s(142);y||(y={});var i=function(){function u(h,c,p){this.kind=h,this.value=c,this.error=p,this.hasValue=h==="N"}return u.prototype.observe=function(h){switch(this.kind){case"N":return h.next&&h.next(this.value);case"E":return h.error&&h.error(this.error);case"C":return h.complete&&h.complete()}},u.prototype.do=function(h,c,p){switch(this.kind){case"N":return h&&h(this.value);case"E":return c&&c(this.error);case"C":return p&&p()}},u.prototype.accept=function(h,c,p){return h&&typeof h.next=="function"?this.observe(h):this.do(h,c,p)},u.prototype.toObservable=function(){switch(this.kind){case"N":return(0,d.of)(this.value);case"E":return(0,g.throwError)(this.error);case"C":return(0,v.empty)()}throw new Error("unexpected notification kind value")},u.createNext=function(h){return h!==void 0?new u("N",h):u.undefinedValueNotification},u.createError=function(h){return new u("E",void 0,h)},u.createComplete=function(){return u.completeNotification},u.completeNotification=new u("C"),u.undefinedValueNotification=new u("N",void 0),u}()},(_,E,s)=>{s.r(E),s.d(E,{of:()=>g});var y=s(138),v=s(140),d=s(139);function g(){for(var i=[],u=0;u<arguments.length;u++)i[u]=arguments[u];var h=i[i.length-1];return(0,y.isScheduler)(h)?(i.pop(),(0,d.scheduleArray)(i,h)):(0,v.fromArray)(i)}},(_,E,s)=>{function y(v){return v&&typeof v.schedule=="function"}s.r(E),s.d(E,{isScheduler:()=>y})},(_,E,s)=>{s.r(E),s.d(E,{scheduleArray:()=>d});var y=s(110),v=s(118);function d(g,i){return new y.Observable(function(u){var h=new v.Subscription,c=0;return h.add(i.schedule(function(){c!==g.length?(u.next(g[c++]),u.closed||h.add(this.schedule())):u.complete()})),h})}},(_,E,s)=>{s.r(E),s.d(E,{fromArray:()=>g});var y=s(110),v=s(141),d=s(139);function g(i,u){return u?(0,d.scheduleArray)(i,u):new y.Observable((0,v.subscribeToArray)(i))}},(_,E,s)=>{s.r(E),s.d(E,{subscribeToArray:()=>y});var y=function(v){return function(d){for(var g=0,i=v.length;g<i&&!d.closed;g++)d.next(v[g]);d.complete()}}},(_,E,s)=>{s.r(E),s.d(E,{throwError:()=>v});var y=s(110);function v(g,i){return i?new y.Observable(function(u){return i.schedule(d,0,{error:g,subscriber:u})}):new y.Observable(function(u){return u.error(g)})}function d(g){var i=g.error;g.subscriber.error(i)}},(_,E,s)=>{s.r(E),s.d(E,{EMPTY:()=>v,empty:()=>d});var y=s(110),v=new y.Observable(function(g){return g.complete()});function d(g){return g?function(i){return new y.Observable(function(u){return i.schedule(function(){return u.complete()})})}(g):v}},(_,E,s)=>{s.r(E),s.d(E,{queue:()=>d,queueScheduler:()=>v});var y=s(148),v=new(s(145)).QueueScheduler(y.QueueAction),d=v},(_,E,s)=>{s.r(E),s.d(E,{QueueScheduler:()=>v});var y=s(113),v=function(d){function g(){return d!==null&&d.apply(this,arguments)||this}return y.__extends(g,d),g}(s(146).AsyncScheduler)},(_,E,s)=>{s.r(E),s.d(E,{AsyncScheduler:()=>d});var y=s(113),v=s(147),d=function(g){function i(u,h){h===void 0&&(h=v.Scheduler.now);var c=g.call(this,u,function(){return i.delegate&&i.delegate!==c?i.delegate.now():h()})||this;return c.actions=[],c.active=!1,c.scheduled=void 0,c}return y.__extends(i,g),i.prototype.schedule=function(u,h,c){return h===void 0&&(h=0),i.delegate&&i.delegate!==this?i.delegate.schedule(u,h,c):g.prototype.schedule.call(this,u,h,c)},i.prototype.flush=function(u){var h=this.actions;if(this.active)h.push(u);else{var c;this.active=!0;do if(c=u.execute(u.state,u.delay))break;while(u=h.shift());if(this.active=!1,c){for(;u=h.shift();)u.unsubscribe();throw c}}},i}(v.Scheduler)},(_,E,s)=>{s.r(E),s.d(E,{Scheduler:()=>y});var y=function(){function v(d,g){g===void 0&&(g=v.now),this.SchedulerAction=d,this.now=g}return v.prototype.schedule=function(d,g,i){return g===void 0&&(g=0),new this.SchedulerAction(this,d).schedule(i,g)},v.now=function(){return Date.now()},v}()},(_,E,s)=>{s.r(E),s.d(E,{QueueAction:()=>v});var y=s(113),v=function(d){function g(i,u){var h=d.call(this,i,u)||this;return h.scheduler=i,h.work=u,h}return y.__extends(g,d),g.prototype.schedule=function(i,u){return u===void 0&&(u=0),u>0?d.prototype.schedule.call(this,i,u):(this.delay=u,this.state=i,this.scheduler.flush(this),this)},g.prototype.execute=function(i,u){return u>0||this.closed?d.prototype.execute.call(this,i,u):this._execute(i,u)},g.prototype.requestAsyncId=function(i,u,h){return h===void 0&&(h=0),h!==null&&h>0||h===null&&this.delay>0?d.prototype.requestAsyncId.call(this,i,u,h):i.flush(this)},g}(s(149).AsyncAction)},(_,E,s)=>{s.r(E),s.d(E,{AsyncAction:()=>v});var y=s(113),v=function(d){function g(i,u){var h=d.call(this,i,u)||this;return h.scheduler=i,h.work=u,h.pending=!1,h}return y.__extends(g,d),g.prototype.schedule=function(i,u){if(u===void 0&&(u=0),this.closed)return this;this.state=i;var h=this.id,c=this.scheduler;return h!=null&&(this.id=this.recycleAsyncId(c,h,u)),this.pending=!0,this.delay=u,this.id=this.id||this.requestAsyncId(c,this.id,u),this},g.prototype.requestAsyncId=function(i,u,h){return h===void 0&&(h=0),setInterval(i.flush.bind(i,this),h)},g.prototype.recycleAsyncId=function(i,u,h){if(h===void 0&&(h=0),h!==null&&this.delay===h&&this.pending===!1)return u;clearInterval(u)},g.prototype.execute=function(i,u){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var h=this._execute(i,u);if(h)return h;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},g.prototype._execute=function(i,u){var h=!1,c=void 0;try{this.work(i)}catch(p){h=!0,c=!!p&&p||new Error(p)}if(h)return this.unsubscribe(),c},g.prototype._unsubscribe=function(){var i=this.id,u=this.scheduler,h=u.actions,c=h.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,c!==-1&&h.splice(c,1),i!=null&&(this.id=this.recycleAsyncId(u,i,null)),this.delay=null},g}(s(150).Action)},(_,E,s)=>{s.r(E),s.d(E,{Action:()=>v});var y=s(113),v=function(d){function g(i,u){return d.call(this)||this}return y.__extends(g,d),g.prototype.schedule=function(i,u){return this},g}(s(118).Subscription)},(_,E,s)=>{s.r(E),s.d(E,{AsyncSubject:()=>g});var y=s(113),v=s(129),d=s(118),g=function(i){function u(){var h=i!==null&&i.apply(this,arguments)||this;return h.value=null,h.hasNext=!1,h.hasCompleted=!1,h}return y.__extends(u,i),u.prototype._subscribe=function(h){return this.hasError?(h.error(this.thrownError),d.Subscription.EMPTY):this.hasCompleted&&this.hasNext?(h.next(this.value),h.complete(),d.Subscription.EMPTY):i.prototype._subscribe.call(this,h)},u.prototype.next=function(h){this.hasCompleted||(this.value=h,this.hasNext=!0)},u.prototype.error=function(h){this.hasCompleted||i.prototype.error.call(this,h)},u.prototype.complete=function(){this.hasCompleted=!0,this.hasNext&&i.prototype.next.call(this,this.value),i.prototype.complete.call(this)},u}(v.Subject)},(_,E,s)=>{s.r(E),s.d(E,{asap:()=>d,asapScheduler:()=>v});var y=s(154),v=new(s(153)).AsapScheduler(y.AsapAction),d=v},(_,E,s)=>{s.r(E),s.d(E,{AsapScheduler:()=>v});var y=s(113),v=function(d){function g(){return d!==null&&d.apply(this,arguments)||this}return y.__extends(g,d),g.prototype.flush=function(i){this.active=!0,this.scheduled=void 0;var u,h=this.actions,c=-1,p=h.length;i=i||h.shift();do if(u=i.execute(i.state,i.delay))break;while(++c<p&&(i=h.shift()));if(this.active=!1,u){for(;++c<p&&(i=h.shift());)i.unsubscribe();throw u}},g}(s(146).AsyncScheduler)},(_,E,s)=>{s.r(E),s.d(E,{AsapAction:()=>d});var y=s(113),v=s(155),d=function(g){function i(u,h){var c=g.call(this,u,h)||this;return c.scheduler=u,c.work=h,c}return y.__extends(i,g),i.prototype.requestAsyncId=function(u,h,c){return c===void 0&&(c=0),c!==null&&c>0?g.prototype.requestAsyncId.call(this,u,h,c):(u.actions.push(this),u.scheduled||(u.scheduled=v.Immediate.setImmediate(u.flush.bind(u,null))))},i.prototype.recycleAsyncId=function(u,h,c){if(c===void 0&&(c=0),c!==null&&c>0||c===null&&this.delay>0)return g.prototype.recycleAsyncId.call(this,u,h,c);u.actions.length===0&&(v.Immediate.clearImmediate(h),u.scheduled=void 0)},i}(s(149).AsyncAction)},(_,E,s)=>{s.r(E),s.d(E,{Immediate:()=>i,TestTools:()=>u});var y=1,v=function(){return Promise.resolve()}(),d={};function g(h){return h in d&&(delete d[h],!0)}var i={setImmediate:function(h){var c=y++;return d[c]=!0,v.then(function(){return g(c)&&h()}),c},clearImmediate:function(h){g(h)}},u={pending:function(){return Object.keys(d).length}}},(_,E,s)=>{s.r(E),s.d(E,{async:()=>d,asyncScheduler:()=>v});var y=s(149),v=new(s(146)).AsyncScheduler(y.AsyncAction),d=v},(_,E,s)=>{s.r(E),s.d(E,{animationFrame:()=>d,animationFrameScheduler:()=>v});var y=s(159),v=new(s(158)).AnimationFrameScheduler(y.AnimationFrameAction),d=v},(_,E,s)=>{s.r(E),s.d(E,{AnimationFrameScheduler:()=>v});var y=s(113),v=function(d){function g(){return d!==null&&d.apply(this,arguments)||this}return y.__extends(g,d),g.prototype.flush=function(i){this.active=!0,this.scheduled=void 0;var u,h=this.actions,c=-1,p=h.length;i=i||h.shift();do if(u=i.execute(i.state,i.delay))break;while(++c<p&&(i=h.shift()));if(this.active=!1,u){for(;++c<p&&(i=h.shift());)i.unsubscribe();throw u}},g}(s(146).AsyncScheduler)},(_,E,s)=>{s.r(E),s.d(E,{AnimationFrameAction:()=>v});var y=s(113),v=function(d){function g(i,u){var h=d.call(this,i,u)||this;return h.scheduler=i,h.work=u,h}return y.__extends(g,d),g.prototype.requestAsyncId=function(i,u,h){return h===void 0&&(h=0),h!==null&&h>0?d.prototype.requestAsyncId.call(this,i,u,h):(i.actions.push(this),i.scheduled||(i.scheduled=requestAnimationFrame(function(){return i.flush(null)})))},g.prototype.recycleAsyncId=function(i,u,h){if(h===void 0&&(h=0),h!==null&&h>0||h===null&&this.delay>0)return d.prototype.recycleAsyncId.call(this,i,u,h);i.actions.length===0&&(cancelAnimationFrame(u),i.scheduled=void 0)},g}(s(149).AsyncAction)},(_,E,s)=>{s.r(E),s.d(E,{VirtualAction:()=>g,VirtualTimeScheduler:()=>d});var y=s(113),v=s(149),d=function(i){function u(h,c){h===void 0&&(h=g),c===void 0&&(c=Number.POSITIVE_INFINITY);var p=i.call(this,h,function(){return p.frame})||this;return p.maxFrames=c,p.frame=0,p.index=-1,p}return y.__extends(u,i),u.prototype.flush=function(){for(var h,c,p=this.actions,f=this.maxFrames;(c=p[0])&&c.delay<=f&&(p.shift(),this.frame=c.delay,!(h=c.execute(c.state,c.delay))););if(h){for(;c=p.shift();)c.unsubscribe();throw h}},u.frameTimeFactor=10,u}(s(146).AsyncScheduler),g=function(i){function u(h,c,p){p===void 0&&(p=h.index+=1);var f=i.call(this,h,c)||this;return f.scheduler=h,f.work=c,f.index=p,f.active=!0,f.index=h.index=p,f}return y.__extends(u,i),u.prototype.schedule=function(h,c){if(c===void 0&&(c=0),!this.id)return i.prototype.schedule.call(this,h,c);this.active=!1;var p=new u(this.scheduler,this.work);return this.add(p),p.schedule(h,c)},u.prototype.requestAsyncId=function(h,c,p){p===void 0&&(p=0),this.delay=h.frame+p;var f=h.actions;return f.push(this),f.sort(u.sortActions),!0},u.prototype.recycleAsyncId=function(h,c,p){},u.prototype._execute=function(h,c){if(this.active===!0)return i.prototype._execute.call(this,h,c)},u.sortActions=function(h,c){return h.delay===c.delay?h.index===c.index?0:h.index>c.index?1:-1:h.delay>c.delay?1:-1},u}(v.AsyncAction)},(_,E,s)=>{function y(){}s.r(E),s.d(E,{noop:()=>y})},(_,E,s)=>{s.r(E),s.d(E,{isObservable:()=>v});var y=s(110);function v(d){return!!d&&(d instanceof y.Observable||typeof d.lift=="function"&&typeof d.subscribe=="function")}},(_,E,s)=>{s.r(E),s.d(E,{ArgumentOutOfRangeError:()=>y});var y=function(){function v(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return v.prototype=Object.create(Error.prototype),v}()},(_,E,s)=>{s.r(E),s.d(E,{EmptyError:()=>y});var y=function(){function v(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return v.prototype=Object.create(Error.prototype),v}()},(_,E,s)=>{s.r(E),s.d(E,{TimeoutError:()=>y});var y=function(){function v(){return Error.call(this),this.message="Timeout has occurred",this.name="TimeoutError",this}return v.prototype=Object.create(Error.prototype),v}()},(_,E,s)=>{s.r(E),s.d(E,{bindCallback:()=>h});var y=s(110),v=s(151),d=s(167),g=s(123),i=s(121),u=s(138);function h(f,m,w){if(m){if(!(0,u.isScheduler)(m))return function(){for(var A=[],C=0;C<arguments.length;C++)A[C]=arguments[C];return h(f,w).apply(void 0,A).pipe((0,d.map)(function(M){return(0,i.isArray)(M)?m.apply(void 0,M):m(M)}))};w=m}return function(){for(var A=[],C=0;C<arguments.length;C++)A[C]=arguments[C];var M,S=this,q={context:S,subject:M,callbackFunc:f,scheduler:w};return new y.Observable(function(G){if(w){var U={args:A,subscriber:G,params:q};return w.schedule(c,0,U)}if(!M){M=new v.AsyncSubject;try{f.apply(S,A.concat([function(){for(var H=[],Q=0;Q<arguments.length;Q++)H[Q]=arguments[Q];M.next(H.length<=1?H[0]:H),M.complete()}]))}catch(H){(0,g.canReportError)(M)?M.error(H):console.warn(H)}}return M.subscribe(G)})}}function c(f){var m=this,w=f.args,A=f.subscriber,C=f.params,M=C.callbackFunc,S=C.context,q=C.scheduler,G=C.subject;if(!G){G=C.subject=new v.AsyncSubject;try{M.apply(S,w.concat([function(){for(var U=[],H=0;H<arguments.length;H++)U[H]=arguments[H];var Q=U.length<=1?U[0]:U;m.add(q.schedule(p,0,{value:Q,subject:G}))}]))}catch(U){G.error(U)}}this.add(G.subscribe(A))}function p(f){var m=f.value,w=f.subject;w.next(m),w.complete()}},(_,E,s)=>{s.r(E),s.d(E,{MapOperator:()=>g,map:()=>d});var y=s(113),v=s(112);function d(u,h){return function(c){if(typeof u!="function")throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return c.lift(new g(u,h))}}var g=function(){function u(h,c){this.project=h,this.thisArg=c}return u.prototype.call=function(h,c){return c.subscribe(new i(h,this.project,this.thisArg))},u}(),i=function(u){function h(c,p,f){var m=u.call(this,c)||this;return m.project=p,m.count=0,m.thisArg=f||m,m}return y.__extends(h,u),h.prototype._next=function(c){var p;try{p=this.project.call(this.thisArg,c,this.count++)}catch(f){return void this.destination.error(f)}this.destination.next(p)},h}(v.Subscriber)},(_,E,s)=>{s.r(E),s.d(E,{bindNodeCallback:()=>h});var y=s(110),v=s(151),d=s(167),g=s(123),i=s(138),u=s(121);function h(m,w,A){if(w){if(!(0,i.isScheduler)(w))return function(){for(var C=[],M=0;M<arguments.length;M++)C[M]=arguments[M];return h(m,A).apply(void 0,C).pipe((0,d.map)(function(S){return(0,u.isArray)(S)?w.apply(void 0,S):w(S)}))};A=w}return function(){for(var C=[],M=0;M<arguments.length;M++)C[M]=arguments[M];var S={subject:void 0,args:C,callbackFunc:m,scheduler:A,context:this};return new y.Observable(function(q){var G=S.context,U=S.subject;if(A)return A.schedule(c,0,{params:S,subscriber:q,context:G});if(!U){U=S.subject=new v.AsyncSubject;try{m.apply(G,C.concat([function(){for(var H=[],Q=0;Q<arguments.length;Q++)H[Q]=arguments[Q];var et=H.shift();et?U.error(et):(U.next(H.length<=1?H[0]:H),U.complete())}]))}catch(H){(0,g.canReportError)(U)?U.error(H):console.warn(H)}}return U.subscribe(q)})}}function c(m){var w=this,A=m.params,C=m.subscriber,M=m.context,S=A.callbackFunc,q=A.args,G=A.scheduler,U=A.subject;if(!U){U=A.subject=new v.AsyncSubject;try{S.apply(M,q.concat([function(){for(var H=[],Q=0;Q<arguments.length;Q++)H[Q]=arguments[Q];var et=H.shift();if(et)w.add(G.schedule(f,0,{err:et,subject:U}));else{var it=H.length<=1?H[0]:H;w.add(G.schedule(p,0,{value:it,subject:U}))}}]))}catch(H){this.add(G.schedule(f,0,{err:H,subject:U}))}}this.add(U.subscribe(C))}function p(m){var w=m.value,A=m.subject;A.next(w),A.complete()}function f(m){var w=m.err;m.subject.error(w)}},(_,E,s)=>{s.r(E),s.d(E,{CombineLatestOperator:()=>p,CombineLatestSubscriber:()=>f,combineLatest:()=>c});var y=s(113),v=s(138),d=s(121),g=s(179),i=s(170),u=s(140),h={};function c(){for(var m=[],w=0;w<arguments.length;w++)m[w]=arguments[w];var A=void 0,C=void 0;return(0,v.isScheduler)(m[m.length-1])&&(C=m.pop()),typeof m[m.length-1]=="function"&&(A=m.pop()),m.length===1&&(0,d.isArray)(m[0])&&(m=m[0]),(0,u.fromArray)(m,C).lift(new p(A))}var p=function(){function m(w){this.resultSelector=w}return m.prototype.call=function(w,A){return A.subscribe(new f(w,this.resultSelector))},m}(),f=function(m){function w(A,C){var M=m.call(this,A)||this;return M.resultSelector=C,M.active=0,M.values=[],M.observables=[],M}return y.__extends(w,m),w.prototype._next=function(A){this.values.push(h),this.observables.push(A)},w.prototype._complete=function(){var A=this.observables,C=A.length;if(C===0)this.destination.complete();else{this.active=C,this.toRespond=C;for(var M=0;M<C;M++){var S=A[M];this.add((0,i.subscribeToResult)(this,S,void 0,M))}}},w.prototype.notifyComplete=function(A){(this.active-=1)==0&&this.destination.complete()},w.prototype.notifyNext=function(A,C,M){var S=this.values,q=S[M],G=this.toRespond?q===h?--this.toRespond:this.toRespond:0;S[M]=C,G===0&&(this.resultSelector?this._tryResultSelector(S):this.destination.next(S.slice()))},w.prototype._tryResultSelector=function(A){var C;try{C=this.resultSelector.apply(this,A)}catch(M){return void this.destination.error(M)}this.destination.next(C)},w}(g.OuterSubscriber)},(_,E,s)=>{s.r(E),s.d(E,{subscribeToResult:()=>g});var y=s(171),v=s(172),d=s(110);function g(i,u,h,c,p){if(p===void 0&&(p=new y.InnerSubscriber(i,h,c)),!p.closed)return u instanceof d.Observable?u.subscribe(p):(0,v.subscribeTo)(u)(p)}},(_,E,s)=>{s.r(E),s.d(E,{InnerSubscriber:()=>v});var y=s(113),v=function(d){function g(i,u,h){var c=d.call(this)||this;return c.parent=i,c.outerValue=u,c.outerIndex=h,c.index=0,c}return y.__extends(g,d),g.prototype._next=function(i){this.parent.notifyNext(this.outerValue,i,this.outerIndex,this.index++,this)},g.prototype._error=function(i){this.parent.notifyError(i,this),this.unsubscribe()},g.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},g}(s(112).Subscriber)},(_,E,s)=>{s.r(E),s.d(E,{subscribeTo:()=>f});var y=s(141),v=s(176),d=s(178),g=s(173),i=s(174),u=s(175),h=s(122),c=s(177),p=s(124),f=function(m){if(m&&typeof m[p.observable]=="function")return(0,g.subscribeToObservable)(m);if((0,i.isArrayLike)(m))return(0,y.subscribeToArray)(m);if((0,u.isPromise)(m))return(0,v.subscribeToPromise)(m);if(m&&typeof m[c.iterator]=="function")return(0,d.subscribeToIterable)(m);var w=(0,h.isObject)(m)?"an invalid object":"'"+m+"'";throw new TypeError("You provided "+w+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.")}},(_,E,s)=>{s.r(E),s.d(E,{subscribeToObservable:()=>v});var y=s(124),v=function(d){return function(g){var i=d[y.observable]();if(typeof i.subscribe!="function")throw new TypeError("Provided object does not correctly implement Symbol.observable");return i.subscribe(g)}}},(_,E,s)=>{s.r(E),s.d(E,{isArrayLike:()=>y});var y=function(v){return v&&typeof v.length=="number"&&typeof v!="function"}},(_,E,s)=>{function y(v){return!!v&&typeof v.subscribe!="function"&&typeof v.then=="function"}s.r(E),s.d(E,{isPromise:()=>y})},(_,E,s)=>{s.r(E),s.d(E,{subscribeToPromise:()=>v});var y=s(116),v=function(d){return function(g){return d.then(function(i){g.closed||(g.next(i),g.complete())},function(i){return g.error(i)}).then(null,y.hostReportError),g}}},(_,E,s)=>{function y(){return typeof Symbol=="function"&&Symbol.iterator?Symbol.iterator:"@@iterator"}s.r(E),s.d(E,{$$iterator:()=>d,getSymbolIterator:()=>y,iterator:()=>v});var v=y(),d=v},(_,E,s)=>{s.r(E),s.d(E,{subscribeToIterable:()=>v});var y=s(177),v=function(d){return function(g){for(var i=d[y.iterator]();;){var u=void 0;try{u=i.next()}catch(h){return g.error(h),g}if(u.done){g.complete();break}if(g.next(u.value),g.closed)break}return typeof i.return=="function"&&g.add(function(){i.return&&i.return()}),g}}},(_,E,s)=>{s.r(E),s.d(E,{OuterSubscriber:()=>v});var y=s(113),v=function(d){function g(){return d!==null&&d.apply(this,arguments)||this}return y.__extends(g,d),g.prototype.notifyNext=function(i,u,h,c,p){this.destination.next(u)},g.prototype.notifyError=function(i,u){this.destination.error(i)},g.prototype.notifyComplete=function(i){this.destination.complete()},g}(s(112).Subscriber)},(_,E,s)=>{s.r(E),s.d(E,{concat:()=>d});var y=s(137),v=s(181);function d(){for(var g=[],i=0;i<arguments.length;i++)g[i]=arguments[i];return(0,v.concatAll)()(y.of.apply(void 0,g))}},(_,E,s)=>{s.r(E),s.d(E,{concatAll:()=>v});var y=s(182);function v(){return(0,y.mergeAll)(1)}},(_,E,s)=>{s.r(E),s.d(E,{mergeAll:()=>d});var y=s(183),v=s(126);function d(g){return g===void 0&&(g=Number.POSITIVE_INFINITY),(0,y.mergeMap)(v.identity,g)}},(_,E,s)=>{s.r(E),s.d(E,{MergeMapOperator:()=>u,MergeMapSubscriber:()=>h,flatMap:()=>c,mergeMap:()=>i});var y=s(113),v=s(167),d=s(184),g=s(191);function i(p,f,m){return m===void 0&&(m=Number.POSITIVE_INFINITY),typeof f=="function"?function(w){return w.pipe(i(function(A,C){return(0,d.from)(p(A,C)).pipe((0,v.map)(function(M,S){return f(A,M,C,S)}))},m))}:(typeof f=="number"&&(m=f),function(w){return w.lift(new u(p,m))})}var u=function(){function p(f,m){m===void 0&&(m=Number.POSITIVE_INFINITY),this.project=f,this.concurrent=m}return p.prototype.call=function(f,m){return m.subscribe(new h(f,this.project,this.concurrent))},p}(),h=function(p){function f(m,w,A){A===void 0&&(A=Number.POSITIVE_INFINITY);var C=p.call(this,m)||this;return C.project=w,C.concurrent=A,C.hasCompleted=!1,C.buffer=[],C.active=0,C.index=0,C}return y.__extends(f,p),f.prototype._next=function(m){this.active<this.concurrent?this._tryNext(m):this.buffer.push(m)},f.prototype._tryNext=function(m){var w,A=this.index++;try{w=this.project(m,A)}catch(C){return void this.destination.error(C)}this.active++,this._innerSub(w)},f.prototype._innerSub=function(m){var w=new g.SimpleInnerSubscriber(this),A=this.destination;A.add(w);var C=(0,g.innerSubscribe)(m,w);C!==w&&A.add(C)},f.prototype._complete=function(){this.hasCompleted=!0,this.active===0&&this.buffer.length===0&&this.destination.complete(),this.unsubscribe()},f.prototype.notifyNext=function(m){this.destination.next(m)},f.prototype.notifyComplete=function(){var m=this.buffer;this.active--,m.length>0?this._next(m.shift()):this.active===0&&this.hasCompleted&&this.destination.complete()},f}(g.SimpleOuterSubscriber),c=i},(_,E,s)=>{s.r(E),s.d(E,{from:()=>g});var y=s(110),v=s(172),d=s(185);function g(i,u){return u?(0,d.scheduled)(i,u):i instanceof y.Observable?i:new y.Observable((0,v.subscribeTo)(i))}},(_,E,s)=>{s.r(E),s.d(E,{scheduled:()=>p});var y=s(187),v=s(188),d=s(139),g=s(190),i=s(186),u=s(175),h=s(174),c=s(189);function p(f,m){if(f!=null){if((0,i.isInteropObservable)(f))return(0,y.scheduleObservable)(f,m);if((0,u.isPromise)(f))return(0,v.schedulePromise)(f,m);if((0,h.isArrayLike)(f))return(0,d.scheduleArray)(f,m);if((0,c.isIterable)(f)||typeof f=="string")return(0,g.scheduleIterable)(f,m)}throw new TypeError((f!==null&&typeof f||f)+" is not observable")}},(_,E,s)=>{s.r(E),s.d(E,{isInteropObservable:()=>v});var y=s(124);function v(d){return d&&typeof d[y.observable]=="function"}},(_,E,s)=>{s.r(E),s.d(E,{scheduleObservable:()=>g});var y=s(110),v=s(118),d=s(124);function g(i,u){return new y.Observable(function(h){var c=new v.Subscription;return c.add(u.schedule(function(){var p=i[d.observable]();c.add(p.subscribe({next:function(f){c.add(u.schedule(function(){return h.next(f)}))},error:function(f){c.add(u.schedule(function(){return h.error(f)}))},complete:function(){c.add(u.schedule(function(){return h.complete()}))}}))})),c})}},(_,E,s)=>{s.r(E),s.d(E,{schedulePromise:()=>d});var y=s(110),v=s(118);function d(g,i){return new y.Observable(function(u){var h=new v.Subscription;return h.add(i.schedule(function(){return g.then(function(c){h.add(i.schedule(function(){u.next(c),h.add(i.schedule(function(){return u.complete()}))}))},function(c){h.add(i.schedule(function(){return u.error(c)}))})})),h})}},(_,E,s)=>{s.r(E),s.d(E,{isIterable:()=>v});var y=s(177);function v(d){return d&&typeof d[y.iterator]=="function"}},(_,E,s)=>{s.r(E),s.d(E,{scheduleIterable:()=>g});var y=s(110),v=s(118),d=s(177);function g(i,u){if(!i)throw new Error("Iterable cannot be null");return new y.Observable(function(h){var c,p=new v.Subscription;return p.add(function(){c&&typeof c.return=="function"&&c.return()}),p.add(u.schedule(function(){c=i[d.iterator](),p.add(u.schedule(function(){if(!h.closed){var f,m;try{var w=c.next();f=w.value,m=w.done}catch(A){return void h.error(A)}m?h.complete():(h.next(f),this.schedule())}}))})),p})}},(_,E,s)=>{s.r(E),s.d(E,{ComplexInnerSubscriber:()=>u,ComplexOuterSubscriber:()=>c,SimpleInnerSubscriber:()=>i,SimpleOuterSubscriber:()=>h,innerSubscribe:()=>p});var y=s(113),v=s(112),d=s(110),g=s(172),i=function(f){function m(w){var A=f.call(this)||this;return A.parent=w,A}return y.__extends(m,f),m.prototype._next=function(w){this.parent.notifyNext(w)},m.prototype._error=function(w){this.parent.notifyError(w),this.unsubscribe()},m.prototype._complete=function(){this.parent.notifyComplete(),this.unsubscribe()},m}(v.Subscriber),u=function(f){function m(w,A,C){var M=f.call(this)||this;return M.parent=w,M.outerValue=A,M.outerIndex=C,M}return y.__extends(m,f),m.prototype._next=function(w){this.parent.notifyNext(this.outerValue,w,this.outerIndex,this)},m.prototype._error=function(w){this.parent.notifyError(w),this.unsubscribe()},m.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},m}(v.Subscriber),h=function(f){function m(){return f!==null&&f.apply(this,arguments)||this}return y.__extends(m,f),m.prototype.notifyNext=function(w){this.destination.next(w)},m.prototype.notifyError=function(w){this.destination.error(w)},m.prototype.notifyComplete=function(){this.destination.complete()},m}(v.Subscriber),c=function(f){function m(){return f!==null&&f.apply(this,arguments)||this}return y.__extends(m,f),m.prototype.notifyNext=function(w,A,C,M){this.destination.next(A)},m.prototype.notifyError=function(w){this.destination.error(w)},m.prototype.notifyComplete=function(w){this.destination.complete()},m}(v.Subscriber);function p(f,m){if(!m.closed){if(f instanceof d.Observable)return f.subscribe(m);var w;try{w=(0,g.subscribeTo)(f)(m)}catch(A){m.error(A)}return w}}},(_,E,s)=>{s.r(E),s.d(E,{defer:()=>g});var y=s(110),v=s(184),d=s(143);function g(i){return new y.Observable(function(u){var h;try{h=i()}catch(c){return void u.error(c)}return(h?(0,v.from)(h):(0,d.empty)()).subscribe(u)})}},(_,E,s)=>{s.r(E),s.d(E,{forkJoin:()=>u});var y=s(110),v=s(121),d=s(167),g=s(122),i=s(184);function u(){for(var c=[],p=0;p<arguments.length;p++)c[p]=arguments[p];if(c.length===1){var f=c[0];if((0,v.isArray)(f))return h(f,null);if((0,g.isObject)(f)&&Object.getPrototypeOf(f)===Object.prototype){var m=Object.keys(f);return h(m.map(function(A){return f[A]}),m)}}if(typeof c[c.length-1]=="function"){var w=c.pop();return h(c=c.length===1&&(0,v.isArray)(c[0])?c[0]:c,null).pipe((0,d.map)(function(A){return w.apply(void 0,A)}))}return h(c,null)}function h(c,p){return new y.Observable(function(f){var m=c.length;if(m!==0)for(var w=new Array(m),A=0,C=0,M=function(q){var G=(0,i.from)(c[q]),U=!1;f.add(G.subscribe({next:function(H){U||(U=!0,C++),w[q]=H},error:function(H){return f.error(H)},complete:function(){++A!==m&&U||(C===m&&f.next(p?p.reduce(function(H,Q,et){return H[Q]=w[et],H},{}):w),f.complete())}}))},S=0;S<m;S++)M(S);else f.complete()})}},(_,E,s)=>{s.r(E),s.d(E,{fromEvent:()=>i});var y=s(110),v=s(121),d=s(119),g=s(167);function i(h,c,p,f){return(0,d.isFunction)(p)&&(f=p,p=void 0),f?i(h,c,p).pipe((0,g.map)(function(m){return(0,v.isArray)(m)?f.apply(void 0,m):f(m)})):new y.Observable(function(m){u(h,c,function(w){arguments.length>1?m.next(Array.prototype.slice.call(arguments)):m.next(w)},m,p)})}function u(h,c,p,f,m){var w;if(function(G){return G&&typeof G.addEventListener=="function"&&typeof G.removeEventListener=="function"}(h)){var A=h;h.addEventListener(c,p,m),w=function(){return A.removeEventListener(c,p,m)}}else if(function(G){return G&&typeof G.on=="function"&&typeof G.off=="function"}(h)){var C=h;h.on(c,p),w=function(){return C.off(c,p)}}else if(function(G){return G&&typeof G.addListener=="function"&&typeof G.removeListener=="function"}(h)){var M=h;h.addListener(c,p),w=function(){return M.removeListener(c,p)}}else{if(!h||!h.length)throw new TypeError("Invalid event target");for(var S=0,q=h.length;S<q;S++)u(h[S],c,p,f,m)}f.add(w)}},(_,E,s)=>{s.r(E),s.d(E,{fromEventPattern:()=>i});var y=s(110),v=s(121),d=s(119),g=s(167);function i(u,h,c){return c?i(u,h).pipe((0,g.map)(function(p){return(0,v.isArray)(p)?c.apply(void 0,p):c(p)})):new y.Observable(function(p){var f,m=function(){for(var w=[],A=0;A<arguments.length;A++)w[A]=arguments[A];return p.next(w.length===1?w[0]:w)};try{f=u(m)}catch(w){return void p.error(w)}if((0,d.isFunction)(h))return function(){return h(m,f)}})}},(_,E,s)=>{s.r(E),s.d(E,{generate:()=>g});var y=s(110),v=s(126),d=s(138);function g(u,h,c,p,f){var m,w;if(arguments.length==1){var A=u;w=A.initialState,h=A.condition,c=A.iterate,m=A.resultSelector||v.identity,f=A.scheduler}else p===void 0||(0,d.isScheduler)(p)?(w=u,m=v.identity,f=p):(w=u,m=p);return new y.Observable(function(C){var M=w;if(f)return f.schedule(i,0,{subscriber:C,iterate:c,condition:h,resultSelector:m,state:M});for(;;){if(h){var S=void 0;try{S=h(M)}catch(G){return void C.error(G)}if(!S){C.complete();break}}var q=void 0;try{q=m(M)}catch(G){return void C.error(G)}if(C.next(q),C.closed)break;try{M=c(M)}catch(G){return void C.error(G)}}})}function i(u){var h=u.subscriber,c=u.condition;if(!h.closed){if(u.needIterate)try{u.state=u.iterate(u.state)}catch(m){return void h.error(m)}else u.needIterate=!0;if(c){var p=void 0;try{p=c(u.state)}catch(m){return void h.error(m)}if(!p)return void h.complete();if(h.closed)return}var f;try{f=u.resultSelector(u.state)}catch(m){return void h.error(m)}if(!h.closed&&(h.next(f),!h.closed))return this.schedule(u)}}},(_,E,s)=>{s.r(E),s.d(E,{iif:()=>d});var y=s(192),v=s(143);function d(g,i,u){return i===void 0&&(i=v.EMPTY),u===void 0&&(u=v.EMPTY),(0,y.defer)(function(){return g()?i:u})}},(_,E,s)=>{s.r(E),s.d(E,{interval:()=>g});var y=s(110),v=s(156),d=s(199);function g(u,h){return u===void 0&&(u=0),h===void 0&&(h=v.async),(!(0,d.isNumeric)(u)||u<0)&&(u=0),h&&typeof h.schedule=="function"||(h=v.async),new y.Observable(function(c){return c.add(h.schedule(i,u,{subscriber:c,counter:0,period:u})),c})}function i(u){var h=u.subscriber,c=u.counter,p=u.period;h.next(c),this.schedule({subscriber:h,counter:c+1,period:p},p)}},(_,E,s)=>{s.r(E),s.d(E,{isNumeric:()=>v});var y=s(121);function v(d){return!(0,y.isArray)(d)&&d-parseFloat(d)+1>=0}},(_,E,s)=>{s.r(E),s.d(E,{merge:()=>i});var y=s(110),v=s(138),d=s(182),g=s(140);function i(){for(var u=[],h=0;h<arguments.length;h++)u[h]=arguments[h];var c=Number.POSITIVE_INFINITY,p=null,f=u[u.length-1];return(0,v.isScheduler)(f)?(p=u.pop(),u.length>1&&typeof u[u.length-1]=="number"&&(c=u.pop())):typeof f=="number"&&(c=u.pop()),p===null&&u.length===1&&u[0]instanceof y.Observable?u[0]:(0,d.mergeAll)(c)((0,g.fromArray)(u,p))}},(_,E,s)=>{s.r(E),s.d(E,{NEVER:()=>d,never:()=>g});var y=s(110),v=s(161),d=new y.Observable(v.noop);function g(){return d}},(_,E,s)=>{s.r(E),s.d(E,{onErrorResumeNext:()=>i});var y=s(110),v=s(184),d=s(121),g=s(143);function i(){for(var u=[],h=0;h<arguments.length;h++)u[h]=arguments[h];if(u.length===0)return g.EMPTY;var c=u[0],p=u.slice(1);return u.length===1&&(0,d.isArray)(c)?i.apply(void 0,c):new y.Observable(function(f){var m=function(){return f.add(i.apply(void 0,p).subscribe(f))};return(0,v.from)(c).subscribe({next:function(w){f.next(w)},error:m,complete:m})})}},(_,E,s)=>{s.r(E),s.d(E,{dispatch:()=>g,pairs:()=>d});var y=s(110),v=s(118);function d(i,u){return u?new y.Observable(function(h){var c=Object.keys(i),p=new v.Subscription;return p.add(u.schedule(g,0,{keys:c,index:0,subscriber:h,subscription:p,obj:i})),p}):new y.Observable(function(h){for(var c=Object.keys(i),p=0;p<c.length&&!h.closed;p++){var f=c[p];i.hasOwnProperty(f)&&h.next([f,i[f]])}h.complete()})}function g(i){var u=i.keys,h=i.index,c=i.subscriber,p=i.subscription,f=i.obj;if(!c.closed)if(h<u.length){var m=u[h];c.next([m,f[m]]),p.add(this.schedule({keys:u,index:h+1,subscriber:c,subscription:p,obj:f}))}else c.complete()}},(_,E,s)=>{s.r(E),s.d(E,{partition:()=>i});var y=s(206),v=s(172),d=s(205),g=s(110);function i(u,h,c){return[(0,d.filter)(h,c)(new g.Observable((0,v.subscribeTo)(u))),(0,d.filter)((0,y.not)(h,c))(new g.Observable((0,v.subscribeTo)(u)))]}},(_,E,s)=>{s.r(E),s.d(E,{filter:()=>d});var y=s(113),v=s(112);function d(u,h){return function(c){return c.lift(new g(u,h))}}var g=function(){function u(h,c){this.predicate=h,this.thisArg=c}return u.prototype.call=function(h,c){return c.subscribe(new i(h,this.predicate,this.thisArg))},u}(),i=function(u){function h(c,p,f){var m=u.call(this,c)||this;return m.predicate=p,m.thisArg=f,m.count=0,m}return y.__extends(h,u),h.prototype._next=function(c){var p;try{p=this.predicate.call(this.thisArg,c,this.count++)}catch(f){return void this.destination.error(f)}p&&this.destination.next(c)},h}(v.Subscriber)},(_,E,s)=>{function y(v,d){function g(){return!g.pred.apply(g.thisArg,arguments)}return g.pred=v,g.thisArg=d,g}s.r(E),s.d(E,{not:()=>y})},(_,E,s)=>{s.r(E),s.d(E,{RaceOperator:()=>h,RaceSubscriber:()=>c,race:()=>u});var y=s(113),v=s(121),d=s(140),g=s(179),i=s(170);function u(){for(var p=[],f=0;f<arguments.length;f++)p[f]=arguments[f];if(p.length===1){if(!(0,v.isArray)(p[0]))return p[0];p=p[0]}return(0,d.fromArray)(p,void 0).lift(new h)}var h=function(){function p(){}return p.prototype.call=function(f,m){return m.subscribe(new c(f))},p}(),c=function(p){function f(m){var w=p.call(this,m)||this;return w.hasFirst=!1,w.observables=[],w.subscriptions=[],w}return y.__extends(f,p),f.prototype._next=function(m){this.observables.push(m)},f.prototype._complete=function(){var m=this.observables,w=m.length;if(w===0)this.destination.complete();else{for(var A=0;A<w&&!this.hasFirst;A++){var C=m[A],M=(0,i.subscribeToResult)(this,C,void 0,A);this.subscriptions&&this.subscriptions.push(M),this.add(M)}this.observables=null}},f.prototype.notifyNext=function(m,w,A){if(!this.hasFirst){this.hasFirst=!0;for(var C=0;C<this.subscriptions.length;C++)if(C!==A){var M=this.subscriptions[C];M.unsubscribe(),this.remove(M)}this.subscriptions=null}this.destination.next(w)},f}(g.OuterSubscriber)},(_,E,s)=>{s.r(E),s.d(E,{dispatch:()=>d,range:()=>v});var y=s(110);function v(g,i,u){return g===void 0&&(g=0),new y.Observable(function(h){i===void 0&&(i=g,g=0);var c=0,p=g;if(u)return u.schedule(d,0,{index:c,count:i,start:g,subscriber:h});for(;;){if(c++>=i){h.complete();break}if(h.next(p++),h.closed)break}})}function d(g){var i=g.start,u=g.index,h=g.count,c=g.subscriber;u>=h?c.complete():(c.next(i),c.closed||(g.index=u+1,g.start=i+1,this.schedule(g)))}},(_,E,s)=>{s.r(E),s.d(E,{timer:()=>i});var y=s(110),v=s(156),d=s(199),g=s(138);function i(h,c,p){h===void 0&&(h=0);var f=-1;return(0,d.isNumeric)(c)?f=Number(c)<1?1:Number(c):(0,g.isScheduler)(c)&&(p=c),(0,g.isScheduler)(p)||(p=v.async),new y.Observable(function(m){var w=(0,d.isNumeric)(h)?h:+h-p.now();return p.schedule(u,w,{index:0,period:f,subscriber:m})})}function u(h){var c=h.index,p=h.period,f=h.subscriber;if(f.next(c),!f.closed){if(p===-1)return f.complete();h.index=c+1,this.schedule(h,p)}}},(_,E,s)=>{s.r(E),s.d(E,{using:()=>g});var y=s(110),v=s(184),d=s(143);function g(i,u){return new y.Observable(function(h){var c,p;try{c=i()}catch(m){return void h.error(m)}try{p=u(c)}catch(m){return void h.error(m)}var f=(p?(0,v.from)(p):d.EMPTY).subscribe(h);return function(){f.unsubscribe(),c&&c.unsubscribe()}})}},(_,E,s)=>{s.r(E),s.d(E,{ZipOperator:()=>c,ZipSubscriber:()=>p,zip:()=>h});var y=s(113),v=s(140),d=s(121),g=s(112),i=s(177),u=s(191);function h(){for(var A=[],C=0;C<arguments.length;C++)A[C]=arguments[C];var M=A[A.length-1];return typeof M=="function"&&A.pop(),(0,v.fromArray)(A,void 0).lift(new c(M))}var c=function(){function A(C){this.resultSelector=C}return A.prototype.call=function(C,M){return M.subscribe(new p(C,this.resultSelector))},A}(),p=function(A){function C(M,S,q){var G=A.call(this,M)||this;return G.resultSelector=S,G.iterators=[],G.active=0,G.resultSelector=typeof S=="function"?S:void 0,G}return y.__extends(C,A),C.prototype._next=function(M){var S=this.iterators;(0,d.isArray)(M)?S.push(new m(M)):typeof M[i.iterator]=="function"?S.push(new f(M[i.iterator]())):S.push(new w(this.destination,this,M))},C.prototype._complete=function(){var M=this.iterators,S=M.length;if(this.unsubscribe(),S!==0){this.active=S;for(var q=0;q<S;q++){var G=M[q];G.stillUnsubscribed?this.destination.add(G.subscribe()):this.active--}}else this.destination.complete()},C.prototype.notifyInactive=function(){this.active--,this.active===0&&this.destination.complete()},C.prototype.checkIterators=function(){for(var M=this.iterators,S=M.length,q=this.destination,G=0;G<S;G++)if(typeof(Q=M[G]).hasValue=="function"&&!Q.hasValue())return;var U=!1,H=[];for(G=0;G<S;G++){var Q,et=(Q=M[G]).next();if(Q.hasCompleted()&&(U=!0),et.done)return void q.complete();H.push(et.value)}this.resultSelector?this._tryresultSelector(H):q.next(H),U&&q.complete()},C.prototype._tryresultSelector=function(M){var S;try{S=this.resultSelector.apply(this,M)}catch(q){return void this.destination.error(q)}this.destination.next(S)},C}(g.Subscriber),f=function(){function A(C){this.iterator=C,this.nextResult=C.next()}return A.prototype.hasValue=function(){return!0},A.prototype.next=function(){var C=this.nextResult;return this.nextResult=this.iterator.next(),C},A.prototype.hasCompleted=function(){var C=this.nextResult;return Boolean(C&&C.done)},A}(),m=function(){function A(C){this.array=C,this.index=0,this.length=0,this.length=C.length}return A.prototype[i.iterator]=function(){return this},A.prototype.next=function(C){var M=this.index++,S=this.array;return M<this.length?{value:S[M],done:!1}:{value:null,done:!0}},A.prototype.hasValue=function(){return this.array.length>this.index},A.prototype.hasCompleted=function(){return this.array.length===this.index},A}(),w=function(A){function C(M,S,q){var G=A.call(this,M)||this;return G.parent=S,G.observable=q,G.stillUnsubscribed=!0,G.buffer=[],G.isComplete=!1,G}return y.__extends(C,A),C.prototype[i.iterator]=function(){return this},C.prototype.next=function(){var M=this.buffer;return M.length===0&&this.isComplete?{value:null,done:!0}:{value:M.shift(),done:!1}},C.prototype.hasValue=function(){return this.buffer.length>0},C.prototype.hasCompleted=function(){return this.buffer.length===0&&this.isComplete},C.prototype.notifyComplete=function(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()},C.prototype.notifyNext=function(M){this.buffer.push(M),this.parent.checkIterators()},C.prototype.subscribe=function(){return(0,u.innerSubscribe)(this.observable,new u.SimpleInnerSubscriber(this))},C}(u.SimpleOuterSubscriber)},(_,E,s)=>{var y=s(9).Buffer;Object.defineProperty(E,"__esModule",{value:!0}),E.receiveAPDU=void 0;var v=s(54),d=s(109),g=s(104);E.receiveAPDU=i=>d.Observable.create(u=>{let h=0,c=0,p=y.alloc(0);const f=i.subscribe({complete:()=>{u.error(new v.DisconnectedDevice),f.unsubscribe()},error:m=>{(0,g.log)("ble-error","in receiveAPDU "+String(m)),u.error(m),f.unsubscribe()},next:m=>{const w=m.readUInt8(0),A=m.readUInt16BE(1);let C=m.slice(3);w===5?h===A?(A===0&&(c=C.readUInt16BE(0),C=C.slice(2)),h++,p=y.concat([p,C]),p.length>c?u.error(new v.TransportError("BLE: received too much data. discontinued chunk. Received "+p.length+" but expected "+c,"BLETooMuchData")):p.length===c&&(u.next(p),u.complete(),f.unsubscribe())):u.error(new v.TransportError("BLE: Invalid sequence number. discontinued chunk. Received "+A+" but expected "+h,"InvalidSequence")):u.error(new v.TransportError("Invalid tag "+w.toString(16),"InvalidTag"))}});return()=>{f.unsubscribe()}})},(_,E,s)=>{s.r(E),s.d(E,{monitorCharacteristic:()=>g});var y=s(110),v=s(104),d=s(9).Buffer;const g=i=>y.Observable.create(u=>{function h(c){const p=c.target;p.value&&u.next(d.from(p.value.buffer))}return(0,v.log)("ble-verbose","start monitor "+i.uuid),i.startNotifications().then(()=>{i.addEventListener("characteristicvaluechanged",h)}),()=>{(0,v.log)("ble-verbose","end monitor "+i.uuid),i.stopNotifications()}})},(_,E,s)=>{s.r(E),s.d(E,{tap:()=>i});var y=s(113),v=s(112),d=s(161),g=s(119);function i(c,p,f){return function(m){return m.lift(new u(c,p,f))}}var u=function(){function c(p,f,m){this.nextOrObserver=p,this.error=f,this.complete=m}return c.prototype.call=function(p,f){return f.subscribe(new h(p,this.nextOrObserver,this.error,this.complete))},c}(),h=function(c){function p(f,m,w,A){var C=c.call(this,f)||this;return C._tapNext=d.noop,C._tapError=d.noop,C._tapComplete=d.noop,C._tapError=w||d.noop,C._tapComplete=A||d.noop,(0,g.isFunction)(m)?(C._context=C,C._tapNext=m):m&&(C._context=m,C._tapNext=m.next||d.noop,C._tapError=m.error||d.noop,C._tapComplete=m.complete||d.noop),C}return y.__extends(p,c),p.prototype._next=function(f){try{this._tapNext.call(this._context,f)}catch(m){return void this.destination.error(m)}this.destination.next(f)},p.prototype._error=function(f){try{this._tapError.call(this._context,f)}catch(m){return void this.destination.error(m)}this.destination.error(f)},p.prototype._complete=function(){try{this._tapComplete.call(this._context)}catch(f){return void this.destination.error(f)}return this.destination.complete()},p}(v.Subscriber)},(_,E,s)=>{s.r(E),s.d(E,{share:()=>i});var y=s(216),v=s(128),d=s(129);function g(){return new d.Subject}function i(){return function(u){return(0,v.refCount)()((0,y.multicast)(g)(u))}}},(_,E,s)=>{s.r(E),s.d(E,{MulticastOperator:()=>d,multicast:()=>v});var y=s(127);function v(g,i){return function(u){var h;if(h=typeof g=="function"?g:function(){return g},typeof i=="function")return u.lift(new d(h,i));var c=Object.create(u,y.connectableObservableDescriptor);return c.source=u,c.subjectFactory=h,c}}var d=function(){function g(i,u){this.subjectFactory=i,this.selector=u}return g.prototype.call=function(i,u){var h=this.selector,c=this.subjectFactory(),p=h(c).subscribe(i);return p.add(u.subscribe(c)),p},g}()},(_,E,s)=>{s.r(E),s.d(E,{first:()=>h});var y=s(164),v=s(205),d=s(218),g=s(219),i=s(220),u=s(126);function h(c,p){var f=arguments.length>=2;return function(m){return m.pipe(c?(0,v.filter)(function(w,A){return c(w,A,m)}):u.identity,(0,d.take)(1),f?(0,g.defaultIfEmpty)(p):(0,i.throwIfEmpty)(function(){return new y.EmptyError}))}}},(_,E,s)=>{s.r(E),s.d(E,{take:()=>i});var y=s(113),v=s(112),d=s(163),g=s(143);function i(c){return function(p){return c===0?(0,g.empty)():p.lift(new u(c))}}var u=function(){function c(p){if(this.total=p,this.total<0)throw new d.ArgumentOutOfRangeError}return c.prototype.call=function(p,f){return f.subscribe(new h(p,this.total))},c}(),h=function(c){function p(f,m){var w=c.call(this,f)||this;return w.total=m,w.count=0,w}return y.__extends(p,c),p.prototype._next=function(f){var m=this.total,w=++this.count;w<=m&&(this.destination.next(f),w===m&&(this.destination.complete(),this.unsubscribe()))},p}(v.Subscriber)},(_,E,s)=>{s.r(E),s.d(E,{defaultIfEmpty:()=>d});var y=s(113),v=s(112);function d(u){return u===void 0&&(u=null),function(h){return h.lift(new g(u))}}var g=function(){function u(h){this.defaultValue=h}return u.prototype.call=function(h,c){return c.subscribe(new i(h,this.defaultValue))},u}(),i=function(u){function h(c,p){var f=u.call(this,c)||this;return f.defaultValue=p,f.isEmpty=!0,f}return y.__extends(h,u),h.prototype._next=function(c){this.isEmpty=!1,this.destination.next(c)},h.prototype._complete=function(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()},h}(v.Subscriber)},(_,E,s)=>{s.r(E),s.d(E,{throwIfEmpty:()=>g});var y=s(113),v=s(164),d=s(112);function g(c){return c===void 0&&(c=h),function(p){return p.lift(new i(c))}}var i=function(){function c(p){this.errorFactory=p}return c.prototype.call=function(p,f){return f.subscribe(new u(p,this.errorFactory))},c}(),u=function(c){function p(f,m){var w=c.call(this,f)||this;return w.errorFactory=m,w.hasValue=!1,w}return y.__extends(p,c),p.prototype._next=function(f){this.hasValue=!0,this.destination.next(f)},p.prototype._complete=function(){if(this.hasValue)return this.destination.complete();var f=void 0;try{f=this.errorFactory()}catch(m){f=m}this.destination.error(f)},p}(d.Subscriber);function h(){return new v.EmptyError}},(_,E,s)=>{s.r(E),s.d(E,{ignoreElements:()=>d});var y=s(113),v=s(112);function d(){return function(u){return u.lift(new g)}}var g=function(){function u(){}return u.prototype.call=function(h,c){return c.subscribe(new i(h))},u}(),i=function(u){function h(){return u!==null&&u.apply(this,arguments)||this}return y.__extends(h,u),h.prototype._next=function(c){},h}(v.Subscriber)},(_,E,s)=>{const y=s(223).default,{DnsCollection:v}=s(225),{DnsItem:d}=s(226);_.exports.default={Dns:y,DnsCollection:v,DnsItem:d}},(_,E,s)=>{s(19);const{BN:y,Address:v}=s(1),{DNS_CATEGORY_NEXT_RESOLVER:d,DNS_CATEGORY_SITE:g,DNS_CATEGORY_WALLET:i,createSmartContractAddressRecord:u,createAdnlAddressRecord:h,createNextResolverRecord:c,parseNextResolverRecord:p,parseSmartContractAddressRecord:f,dnsResolve:m}=s(224),w="Ef_BimcWrQ5pmAWfRqfeVHUCNV8XgsLqeAMBivKryXrghFW3";class A{constructor(M){this.provider=M}async getRootDnsAddress(){return this.provider.host.indexOf("testnet")===-1?null:new v(w)}resolve(M,S,q){return this.provider.host.indexOf("testnet")===-1?null:m(this.provider,w,M,S,q)}getWalletAddress(M){return this.provider.host.indexOf("testnet")===-1?null:this.resolve(M,i)}}A.resolve=m,A.createSmartContractAddressRecord=u,A.createAdnlAddressRecord=h,A.createNextResolverRecord=c,A.parseNextResolverRecord=p,A.parseSmartContractAddressRecord=f,A.DNS_CATEGORY_NEXT_RESOLVER=d,A.DNS_CATEGORY_WALLET=i,A.DNS_CATEGORY_SITE=g,_.exports.default=A},(_,E,s)=>{const{parseAddress:y}=s(37),{BN:v,sha256:d,bytesToHex:g,bytesToBase64:i}=s(1),{Cell:u}=s(19),h="dns_next_resolver",c="wallet",p="site",f=async S=>{if(!S)return new v(0);const q=new TextEncoder().encode(S),G=new Uint8Array(await d(q));return new v(g(G),16)},m=(S,q,G)=>{if(S.bits.array[0]!==q||S.bits.array[1]!==G)throw new Error("Invalid dns record value prefix");return S.bits.array=S.bits.array.slice(2),y(S)},w=S=>m(S,159,211),A=S=>m(S,186,147),C=async(S,q,G,U,H)=>{const Q=8*G.length,et=new u;et.bits.writeBytes(G);const it=await f(U),n=await S.call2(q,"dnsresolve",[["tvm.Slice",i(await et.toBoc(!1))],["num",it.toString()]]);if(n.length!==2)throw new Error("Invalid dnsresolve response");const l=n[0].toNumber();let r=n[1];if(r instanceof Array&&r.length===0&&(r=null),r&&!r.bits)throw new Error("Invalid dnsresolve response");if(l===0)return null;if(l%8!=0)throw new Error("domain split not at a component boundary");if(l>Q)throw new Error("invalid response "+l+"/"+Q);if(l===Q)return U===h?r?A(r):null:U===c?r?w(r):null:U===p?r||null:r;if(r){const e=A(r);return H?U===h?e:null:await C(S,e.toString(),G.slice(l/8),U,!1)}return null},M=S=>{if(!S||!S.length)throw new Error("empty domain");if(S===".")return new Uint8Array([0]);S=S.toLowerCase();for(let U=0;U<S.length;U++)if(S.charCodeAt(U)<=32)throw new Error("bytes in range 0..32 are not allowed in domain names");for(let U=0;U<S.length;U++){const H=S.substring(U,U+1);for(let Q=127;Q<=159;Q++)if(H===String.fromCharCode(Q))throw new Error("bytes in range 127..159 are not allowed in domain names")}const q=S.split(".");q.forEach(U=>{if(!U.length)throw new Error("domain name cannot have an empty component")});const G="\0"+q.reverse().join("\0")+"\0";return new TextEncoder().encode(G)};_.exports={DNS_CATEGORY_NEXT_RESOLVER:h,DNS_CATEGORY_SITE:p,DNS_CATEGORY_WALLET:c,categoryToBN:f,domainToBytes:M,createSmartContractAddressRecord:S=>{const q=new u;return q.bits.writeUint(40915,16),q.bits.writeAddress(S),q.bits.writeUint(0,8),q},createAdnlAddressRecord:S=>{const q=new u;return q.bits.writeUint(44289,16),q.bits.writeUint(S,256),q.bits.writeUint(0,8),q},createNextResolverRecord:S=>{const q=new u;return q.bits.writeUint(47763,16),q.bits.writeAddress(S),q},parseNextResolverRecord:A,parseSmartContractAddressRecord:w,dnsResolve:async(S,q,G,U,H)=>{const Q=M(G);return C(S,q,Q,U,H)}}},(_,E,s)=>{const{Contract:y}=s(23),{Cell:v}=s(19);s(1);const{parseAddress:d}=s(37),{dnsResolve:g}=s(224),{parseOffchainUriCell:i}=s(37);_.exports={DnsCollection:class extends y{constructor(u,h){if(h.wc=0,h.code=h.code||v.oneFromBoc("B5EE9C724102170100020E000114FF00F4A413F4BCF2C80B0102016202030202CC0405020120111202012006070201D40F1002012008090201200D0E01F543221C70094840FF2F0DED0D3030171B0915BE0FA403001D31FED44D0D4D4303122C0008E5032F00320D74920C218F2E0C8208103F0BBF2E0C978A908C000F2E0CA20F004F2E0CB20F9018050F833206EB38E10D0F4043052108307F40E6FA131F2D0CC9130E2C858CF16C9C85004CF1613CCC9F009E010235F0380A0201200B0C000EC007DC840FF2F000331C27C074C1C07000082CE500A98200B784B98C4830003CB43260004F3223880875D244B5C61673C58875D2883000082CE6C070007CB83280B50C3400A44C78B98C727420007F47021D7498E355CBA20B38E2E3002D30721C02D23C200B024A6F85240B9B022C22F23C13AB0B122C26003C17B13B012B1B320B39402A60802DE13DEE66C12BA8002D501C8CBFFF828CF16C97020C8CB0113F400F400CB00C98001B3E401D3232C084B281F2FFF274200039167C01DC087C021DE0063232C15633C59C3E80B2DAF3333260103EC020020120131402012015160007B8B5D318001FBA7A3ED44D0D4D43031F0077001F00880019B905BED44D0D4D4303070016D8009DBA30C3020D74978A908C000F2E04620D70A07C00021D749C0085210B0935B786DE0209501D3073101DE21F0025122D71830F9018200BA93C8CB0F01820167A3ED43D8CF16C90191789170E212A0018467EBCAB"),super(u,h),!h.collectionContent&&!h.address)throw new Error("required collectionContent cell");this.methods.getCollectionData=this.getCollectionData.bind(this),this.methods.getNftItemAddressByIndex=this.getNftItemAddressByIndex.bind(this),this.methods.getNftItemContent=this.getNftItemContent.bind(this),this.methods.resolve=this.resolve.bind(this)}createDataCell(){const u=new v;return u.refs[0]=this.options.collectionContent,u.refs[1]=v.oneFromBoc(this.options.dnsItemCodeHex),u}async getCollectionData(){const u=await this.getAddress(),h=(await this.provider.call2(u.toString(),"get_collection_data"))[1];return{collectionContentUri:i(h),collectionContent:h,ownerAddress:null,nextItemIndex:0}}async getNftItemContent(u){return await u.getData()}async getNftItemAddressByIndex(u){const h=await this.getAddress(),c=await this.provider.call2(h.toString(),"get_nft_address_by_index",[["num",u.toString()]]);return d(c)}async resolve(u,h,c){const p=await this.getAddress();return g(this.provider,p.toString(),u,h,c)}}}},(_,E,s)=>{const{Contract:y}=s(23),{Cell:v}=s(19),{Address:d,BN:g}=s(1),{parseAddress:i}=s(37),{dnsResolve:u,categoryToBN:h}=s(224),c="B5EE9C7241022C010006F8000114FF00F4A413F4BCF2C80B0102016202030202CC0405020120232402012006070201481F2002014808090201201B1C03F7007434C0C05C6C2497C1383E903E900C7E800C5C75C87E800C7E800C3C0249ECF8C094D671C1462C238CC426D7C2FE900C1C14C01B60101C20043232C15401F3C594017E808572DA84B2C7F2CFC89BACE51633C5C0644CB88072407EC0380A71C0245C254274C7D42AB8887C01FE08C86F09300038C08C4374CFC9600A0B0C00113E910C1C2EBCB8536002FC5F056C22355242C705F2E19501FA40D4306D21D08B42E746F6E8F00682F082A3537FF0DBCE7EEC35D69EDC3A189EE6F17D82F353A553F9AA96CB0BE3CE89588307F4168BA544F4E20446F6D61696E86DF00682F0C9046F7A37AD0EA7CEE73355984FA5428982F8B37C8F7BCEC91F7AC71A7CD104588307F4168922D0F0060D0E013C343A3A3B8E1636363737375135C705F2E196102510241023F823F00AE30E0F03FC6EB31FB08E5A343652DDA1820AFAF0805210A15260BC9835820AFAF08015A1923004E220C2FF8E2F77706D722951454434708010C8CB055007CF165005FA0215CB6A12CB1FCB3F226EB39458CF17019132E201C901FB00DE0C6D0DA150CC0B04923E5BE2F82328A18209E14320BC226EB0E30282105FCC3D145210BAE302101112003A68747470733A2F2F646E732E746F6E2E6F72672F69636F6E2E706E672300C682F06105D6CC76AF400325E94D588CE511BE5BFDBB73B437DC51ECA43917D7A43E3D588307F41670C8CB07F400C981012C8050F833206EB38E14D0F4043070018307F40E6FA19431D31F309130E29130E2F82301A0F0054466F00810351034F823F00A00F0302680698064A98452A0BCF2E197820AFAF08052B0A15270BC9836820AFAF0801AA1933A0905E220C2FF8E2C70206D21105B708010C8CB055007CF165005FA0215CB6A12CB1FCB3F226EB39458CF17019132E201C901FB00923036E27A23F823A1A120C2009313A0029130E24464F00810451024F823F00A00305B6C55F005F82381012CA04470F0081045103412F823F00A0128305383C705F2E191105A104910381027103655021303FE82102FCB26A25210BA8E3F5F0535365B7082108B77173505C8CBFF5003CF164440138040708010C8CB055007CF165005FA0215CB6A12CB1FCB3F226EB39458CF17019132E201C901FB00E082101A0B9D515210BA8E193032353537375135C705F2E19A03D4304015045033F823F00AE020C00AE3023A09C00BE3025F0B840F14151603F63603FA4021F001FA40D20031FA00820AFAF0801EA121945315A0A1DE22D70B01C300209206A19136E220C2FFF2E192218E3E821005138D91C8500CCF16500ECF1671244C145449D0708010C8CB055007CF165005FA0215CB6A12CB1FCB3F226EB39458CF17019132E201C901FB00107A94102D3A5BE202E30F105618191A0086303739395155C705F2E19B05D3FF20D74AC20009D0D30701C000F2E19CF404300999D430D040188307F416983050078307F45B30E270C8CB07F400C91045034444F00A01DA8050F833D0F4043052508307F40E6FA18ED7D30721C0008E932510BD107A09105810471046105C4313504C1D96303B5F036C61E201C0018E2D7053006D8100A0708010C8CB055007CF165005FA0215CB6A12CB1FCB3F226EB39458CF17019132E201C901FB009130E2925F0CE2170004F2F003F83603FA4021F001FA40D20031FA00820AFAF0801EA121945315A0A1DE22D70B01C300209206A19136E220C2FFF2E192218E3E821005138D91C8500CCF16500ECF1671244C145449D0708010C8CB055007CF165005FA0215CB6A12CB1FCB3F226EB39458CF17019132E201C901FB00107A94102D3A5BE202E30F10560118191A006A29F0018210D53276DB103A47046D71708010C8CB055007CF165005FA0215CB6A12CB1FCB3F226EB39458CF17019132E201C901FB00000A10293335300010104510344033F00A000D570C8CB01C9D080201201D1E00531C3232C1C8B3C5885BACE385C0B5D24875D2682040FDEEE4B3C5A5F20073C5B2407338A49B0878B274200021081BA50C1B5C0838343E903E8034CFCC200201202122002B406C8CBFF5005CF165003CF16CCCCF400CB3FC9ED5480017321400F3C5807E80B2CFF26000513B513434FFFE900835D2708027DFC07E9035353D0134CFCC0415C415B80C1C1B5B5B5B490415C415A0020120252602012027280013BBB39F009175F07F0078000DBA559F0096C718000DB8FCFF0095F038020120292A0013B64A5E012204EBE0FA1001FBB461843AE9240F152118001E5C08DE012206EBE0FA1A60E038001E5C339E8086047AE140E68078001E5C33B80111C344180012660F003C003060FE81CDF432CF190B19E2D93C060F0DBC06105E033E04883DCB11FB64DDC4964AD1BA06B879240DC23572F37CC5CAAAB143A2FFE03060FE81CDF432CF190B19E2D93C06102B0004786DA9E7FD01";class p extends y{constructor(m,w){w.wc=0,w.code=w.code||v.oneFromBoc(c),super(m,w),this.methods.getData=this.getData.bind(this),this.methods.getDomain=this.getDomain.bind(this),this.methods.getAuctionInfo=this.getAuctionInfo.bind(this),this.methods.getLastFillUpTime=this.getLastFillUpTime.bind(this),this.methods.resolve=this.resolve.bind(this)}createDataCell(){const m=new v;return m.bits.writeUint(this.options.index,256),m.bits.writeAddress(this.options.collectionAddress),m}async getData(){const m=await this.getAddress(),w=await this.provider.call2(m.toString(),"get_nft_data"),A=w[0].toNumber()===-1;return{isInitialized:A,index:w[1],collectionAddress:i(w[2]),ownerAddress:A?i(w[3]):null,contentCell:w[4]}}async createTransferBody(m){const w=new v;return w.bits.writeUint(1607220500,32),w.bits.writeUint(m.queryId||0,64),w.bits.writeAddress(m.newOwnerAddress),w.bits.writeAddress(m.responseAddress),w.bits.writeBit(!1),w.bits.writeCoins(m.forwardAmount||new g(0)),w.bits.writeBit(!1),m.forwardPayload&&w.bits.writeBytes(m.forwardPayload),w}createGetStaticDataBody(m){const w=new v;return w.bits.writeUint(801842850,32),w.bits.writeUint(m.queryId||0,64),w}async getDomain(){const m=await this.getAddress(),w=await this.provider.call2(m.toString(),"get_domain");return new TextDecoder().decode(w.bits.array.buffer)}async getAuctionInfo(){const m=await this.getAddress(),w=await this.provider.call2(m.toString(),"get_auction_info");return{maxBidAddress:i(w[0]),maxBidAmount:w[1],auctionEndTime:w[2].toNumber()}}async getLastFillUpTime(){const m=await this.getAddress();return(await this.provider.call2(m.toString(),"get_last_fill_up_time")).toNumber()}async resolve(m,w,A){const C=await this.getAddress();return u(this.provider,C.toString(),m,w,A)}}p.createChangeContentEntryBody=async f=>{const m=new v;return m.bits.writeUint(10,32),m.bits.writeUint(f.queryId||0,64),m.bits.writeUint(await h(f.category),256),f.value&&(m.refs[0]=f.value),m},p.codeHex=c,_.exports={DnsItem:p}}],z={};function tt(_){var E=z[_];if(E!==void 0)return E.exports;var s=z[_]={id:_,loaded:!1,exports:{}};return K[_].call(s.exports,s,s.exports,tt),s.loaded=!0,s.exports}return tt.n=_=>{var E=_&&_.__esModule?()=>_.default:()=>_;return tt.d(E,{a:E}),E},tt.d=(_,E)=>{for(var s in E)tt.o(E,s)&&!tt.o(_,s)&&Object.defineProperty(_,s,{enumerable:!0,get:E[s]})},tt.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),tt.o=(_,E)=>Object.prototype.hasOwnProperty.call(_,E),tt.r=_=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(_,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(_,"__esModule",{value:!0})},tt.nmd=_=>(_.paths=[],_.children||(_.children=[]),_),tt(0)})()})})(Fr);const Re=jr(Fr.exports),qr=Re.utils.BN;Re.utils.nacl;Re.utils.Address;Re.utils.fromNano;const Kr=window.TonWeb.mnemonic;async function Hr(Y,O){const K=new TextEncoder().encode(O),z=await crypto.subtle.digest("SHA-256",K),tt=crypto.getRandomValues(new Uint8Array(12)),_={name:"AES-GCM",iv:tt},E=await crypto.subtle.importKey("raw",z,_,!1,["encrypt"]),s=new TextEncoder().encode(Y),y=await crypto.subtle.encrypt(_,E,s),d=Array.from(new Uint8Array(y)).map(u=>String.fromCharCode(u)).join(""),g=btoa(d);return Array.from(tt).map(u=>("00"+u.toString(16)).slice(-2)).join("")+g}async function Gr(Y,O){const K=new TextEncoder().encode(O),z=await crypto.subtle.digest("SHA-256",K),tt=Y.slice(0,24).match(/.{2}/g).map(g=>parseInt(g,16)),_={name:"AES-GCM",iv:new Uint8Array(tt)},E=await crypto.subtle.importKey("raw",z,_,!1,["decrypt"]),s=atob(Y.slice(24)),y=new Uint8Array(s.match(/[\s\S]/g).map(g=>g.charCodeAt(0))),v=await crypto.subtle.decrypt(_,E,y);return new TextDecoder().decode(v)}class Ye{static async wordsToPrivateKey(O){const K=await Kr.mnemonicToKeyPair(O);return Re.utils.bytesToBase64(K.secretKey.slice(0,32))}static async saveWords(O,K){await rr.setItem("words",await Hr(O.join(","),K))}static async loadWords(O){return(await Gr(await rr.getItem("words"),O)).split(",")}static async getBalance(O){return new qr(O.balance)}}const pr=Y=>{var O;return(O=Y==null?void 0:Y.match(/^.{6}|.{4}$/g))==null?void 0:O.join("...")},Wr=Y=>{navigator.clipboard.writeText(Y)},Mr=()=>JSON.parse(JSON.stringify(Object.fromEntries(new URLSearchParams(location.search))));function zr(Y){let O,K,z,tt,_,E;const s=Y[10].default,y=ir(s,Y,Y[9],null);return{c(){O=we("button"),K=we("span"),y&&y.c(),this.h()},l(v){O=be(v,"BUTTON",{class:!0,style:!0,type:!0});var d=Ce(O);K=be(d,"SPAN",{});var g=Ce(K);y&&y.l(g),g.forEach(Rt),d.forEach(Rt),this.h()},h(){Ae(O,"class",z=Je(Y[2])+" svelte-1rql73e"),ze(O,"width",Y[1]?"":Y[0]),Ae(O,"type","button")},m(v,d){re(v,O,d),oe(O,K),y&&y.m(K,null),tt=!0,_||(E=[Ne(O,"click",Y[11]),Ne(O,"keypress",Y[12])],_=!0)},p(v,[d]){y&&y.p&&(!tt||d&512)&&sr(y,s,v,v[9],tt?ar(s,v[9],d,null):or(v[9]),null),(!tt||d&4&&z!==(z=Je(v[2])+" svelte-1rql73e"))&&Ae(O,"class",z),(!tt||d&3)&&ze(O,"width",v[1]?"":v[0])},i(v){tt||(ge(y,v),tt=!0)},o(v){Ee(y,v),tt=!1},d(v){v&&Rt(O),y&&y.d(v),_=!1,hr(E)}}}function Vr(Y,O,K){let{$$slots:z={},$$scope:tt}=O,{size:_="lg"}=O,{type:E="default"}=O,{icon:s=""}=O,{label:y=""}=O,{width:v=""}=O,{wide:d=!1}=O,{loading:g=!1}=O,{disabled:i=!1}=O,u=O.class||O.className||"",h;function c(f){je.call(this,Y,f)}function p(f){je.call(this,Y,f)}return Y.$$set=f=>{K(14,O=Qe(Qe({},O),tr(f))),"size"in f&&K(3,_=f.size),"type"in f&&K(4,E=f.type),"icon"in f&&K(5,s=f.icon),"label"in f&&K(6,y=f.label),"width"in f&&K(0,v=f.width),"wide"in f&&K(1,d=f.wide),"loading"in f&&K(7,g=f.loading),"disabled"in f&&K(8,i=f.disabled),"$$scope"in f&&K(9,tt=f.$$scope)},Y.$$.update=()=>{Y.$$.dirty&410&&K(2,h=[E,_,u,d&&"wide",g&&"loading",i&&"disabled"].filter(f=>f).join(" "))},O=tr(O),[v,d,h,_,E,s,y,g,i,tt,z,c,p]}class qe extends Ve{constructor(O){super(),$e(this,O,Vr,zr,Ze,{size:3,type:4,icon:5,label:6,width:0,wide:1,loading:7,disabled:8})}}function $r(Y){let O,K,z,tt,_,E;return{c(){O=we("div"),K=we("div"),z=we("input"),this.h()},l(s){O=be(s,"DIV",{class:!0,style:!0});var y=Ce(O);K=be(y,"DIV",{class:!0});var v=Ce(K);z=be(v,"INPUT",{type:!0,name:!0,placeholder:!0,autocomplete:!0,class:!0}),v.forEach(Rt),y.forEach(Rt),this.h()},h(){Ae(z,"type","text"),Ae(z,"name",Y[8]),Ae(z,"placeholder",Y[4]),z.readOnly=Y[2],z.disabled=Y[3],Ae(z,"autocomplete","off"),Ae(z,"class","svelte-nulhdu"),Ae(K,"class","inp svelte-nulhdu"),Ae(O,"class",tt=Je(Y[9])+" svelte-nulhdu"),Ae(O,"style",Y[6]),Pe(O,"error",Y[7]),Pe(O,"success",Y[5]),Pe(O,"readonly",Y[2]),Pe(O,"disabled",Y[3])},m(s,y){re(s,O,y),oe(O,K),oe(K,z),Y[27](z),fr(z,Y[0]),_||(E=[Ne(z,"input",Y[28]),Ne(z,"focus",Y[10]),Ne(z,"blur",Y[11]),Ne(z,"input",Y[12]),Ne(z,"focus",Y[20]),Ne(z,"blur",Y[21]),Ne(z,"input",Y[22]),Ne(z,"change",Y[23]),Ne(z,"keypress",Y[24]),Ne(z,"keydown",Y[25]),Ne(z,"keyup",Y[26])],_=!0)},p(s,y){y[0]&256&&Ae(z,"name",s[8]),y[0]&16&&Ae(z,"placeholder",s[4]),y[0]&4&&(z.readOnly=s[2]),y[0]&8&&(z.disabled=s[3]),y[0]&1&&z.value!==s[0]&&fr(z,s[0]),y[0]&512&&tt!==(tt=Je(s[9])+" svelte-nulhdu")&&Ae(O,"class",tt),y[0]&64&&Ae(O,"style",s[6]),y[0]&640&&Pe(O,"error",s[7]),y[0]&544&&Pe(O,"success",s[5]),y[0]&516&&Pe(O,"readonly",s[2]),y[0]&520&&Pe(O,"disabled",s[3])},i:Xe,o:Xe,d(s){s&&Rt(O),Y[27](null),_=!1,hr(E)}}}function Zr(Y,O,K){let z,{size:tt="md"}=O,{value:_=""}=O,{readonly:E=!1}=O,{disabled:s=!1}=O,{placeholder:y=null}=O,{validateOnBlur:v=!1}=O,{rules:d=[]}=O,{success:g=!1}=O,{style:i=null}=O,{inputElement:u=null}=O,{message:h=""}=O,{error:c=""}=O,{name:p=""}=O,f=O.class||O.className||"",m=!1,w=[],A,C;function M(){return w=d.map(t=>t(_)).filter(t=>typeof t=="string"),A=!!w.length||!!c,A}function S(){K(18,m=!0)}function q(){K(18,m=!1),v&&M()}function G(){v||M()}function U(t){je.call(this,Y,t)}function H(t){je.call(this,Y,t)}function Q(t){je.call(this,Y,t)}function et(t){je.call(this,Y,t)}function it(t){je.call(this,Y,t)}function n(t){je.call(this,Y,t)}function l(t){je.call(this,Y,t)}function r(t){nr[t?"unshift":"push"](()=>{u=t,K(1,u)})}function e(){_=this.value,K(0,_)}return Y.$$set=t=>{K(32,O=Qe(Qe({},O),tr(t))),"size"in t&&K(13,tt=t.size),"value"in t&&K(0,_=t.value),"readonly"in t&&K(2,E=t.readonly),"disabled"in t&&K(3,s=t.disabled),"placeholder"in t&&K(4,y=t.placeholder),"validateOnBlur"in t&&K(14,v=t.validateOnBlur),"rules"in t&&K(15,d=t.rules),"success"in t&&K(5,g=t.success),"style"in t&&K(6,i=t.style),"inputElement"in t&&K(1,u=t.inputElement),"message"in t&&K(16,h=t.message),"error"in t&&K(7,c=t.error),"name"in t&&K(8,p=t.name)},Y.$$.update=()=>{Y.$$.dirty[0]&1&&K(19,z=!!_),Y.$$.dirty[0]&128&&(A=!!c),Y.$$.dirty[0]&794624&&K(9,C=[f,tt,m&&"focused",z&&"filled"].filter(t=>t).join(" "))},O=tr(O),[_,u,E,s,y,g,i,c,p,C,S,q,G,tt,v,d,h,M,m,z,U,H,Q,et,it,n,l,r,e]}class cr extends Ve{constructor(O){super(),$e(this,O,Zr,$r,Ze,{size:13,value:0,readonly:2,disabled:3,placeholder:4,validateOnBlur:14,rules:15,success:5,style:6,inputElement:1,message:16,error:7,name:8,validate:17},null,[-1,-1])}get validate(){return this.$$.ctx[17]}}class Yr{constructor(O,K,z,tt,_,E,s,y,v,d){this.channelId=O,this.addressA=K,this.addressB=z,this.initBalanceA=tt,this.initBalanceB=_,this.isA=E,this.myKeyPair=s,this.hisPublicKey=y,this.apiKey=v,this.providerUrl=d,this.channelId=O,this.addressA=K,this.addressB=z,this.initBalanceA=tt,this.initBalanceB=_,this.isA=E,this.myKeyPair=s,this.hisPublicKey=y,this.ton=new Re(new Re.HttpProvider(d,{apiKey:v})),this.channel=this.ton.payments.createChannel({channelId:O,addressA:K,addressB:z,initBalanceA:tt,initBalanceB:_,isA:E,myKeyPair:s,hisPublicKey:y}),this.wallet=this.ton.wallet.create({publicKey:s==null?void 0:s.publicKey}),this.fromWallet=this.channel.fromWallet({wallet:this.wallet,secretKey:s==null?void 0:s.secretKey})}}function mr(Y,{delay:O=0,duration:K=400,easing:z=Tr}={}){const tt=+getComputedStyle(Y).opacity;return{delay:O,duration:K,easing:z,css:_=>`opacity: ${_*tt}`}}const Xr=Y=>({}),gr=Y=>({});function yr(Y){let O,K,z,tt,_,E,s,y,v,d,g,i,u,h,c;const p=Y[11].default,f=ir(p,Y,Y[10],null);let m=Y[8].controls&&vr(Y);return{c(){O=we("div"),K=we("div"),z=Be(),tt=we("div"),_=we("header"),E=we("h2"),s=pe(Y[2]),y=Be(),v=we("button"),d=Be(),f&&f.c(),g=Be(),m&&m.c(),this.h()},l(w){O=be(w,"DIV",{class:!0,style:!0});var A=Ce(O);K=be(A,"DIV",{class:!0}),Ce(K).forEach(Rt),z=Fe(A),tt=be(A,"DIV",{class:!0});var C=Ce(tt);_=be(C,"HEADER",{class:!0});var M=Ce(_);E=be(M,"H2",{class:!0});var S=Ce(E);s=me(S,Y[2]),S.forEach(Rt),y=Fe(M),v=be(M,"BUTTON",{class:!0}),Ce(v).forEach(Rt),M.forEach(Rt),d=Fe(C),f&&f.l(C),g=Fe(C),m&&m.l(C),C.forEach(Rt),A.forEach(Rt),this.h()},h(){Ae(K,"class","overlay svelte-1qbado8"),Ae(E,"class","title svelte-1qbado8"),Ae(v,"class","block h-4 w-4 rounded-3xl border-0 bg-no-repeat bg-cover bg-cross"),Ae(_,"class","mb-4 flex justify-between items-center"),Ae(tt,"class","modal svelte-1qbado8"),Pe(tt,"full",Y[4]),Ae(O,"class","wrapper svelte-1qbado8"),ze(O,"--modal-width",Y[3]),ze(O,"z-index",Y[1])},m(w,A){re(w,O,A),oe(O,K),oe(O,z),oe(O,tt),oe(tt,_),oe(_,E),oe(E,s),oe(_,y),oe(_,v),oe(tt,d),f&&f.m(tt,null),oe(tt,g),m&&m.m(tt,null),u=!0,h||(c=[Ne(K,"click",Y[12]),Ne(v,"click",function(){Ur(Y[6])&&Y[6].apply(this,arguments)}),Or(Y[7].call(null,O))],h=!0)},p(w,A){Y=w,(!u||A&4)&&Ke(s,Y[2]),f&&f.p&&(!u||A&1024)&&sr(f,p,Y,Y[10],u?ar(p,Y[10],A,null):or(Y[10]),null),Y[8].controls?m?(m.p(Y,A),A&256&&ge(m,1)):(m=vr(Y),m.c(),ge(m,1),m.m(tt,null)):m&&(He(),Ee(m,1,1,()=>{m=null}),Ge()),A&16&&Pe(tt,"full",Y[4]),(!u||A&8)&&ze(O,"--modal-width",Y[3]),(!u||A&2)&&ze(O,"z-index",Y[1])},i(w){u||(ge(f,w),ge(m),kr(()=>{i||(i=dr(O,mr,{duration:100},!0)),i.run(1)}),u=!0)},o(w){Ee(f,w),Ee(m),i||(i=dr(O,mr,{duration:100},!1)),i.run(0),u=!1},d(w){w&&Rt(O),f&&f.d(w),m&&m.d(),w&&i&&i.end(),h=!1,hr(c)}}}function vr(Y){let O;const K=Y[11].controls,z=ir(K,Y,Y[10],gr);return{c(){z&&z.c()},l(tt){z&&z.l(tt)},m(tt,_){z&&z.m(tt,_),O=!0},p(tt,_){z&&z.p&&(!O||_&1024)&&sr(z,K,tt,tt[10],O?ar(K,tt[10],_,Xr):or(tt[10]),gr)},i(tt){O||(ge(z,tt),O=!0)},o(tt){Ee(z,tt),O=!1},d(tt){z&&z.d(tt)}}}function Jr(Y){let O,K,z=Y[0]&&yr(Y);return{c(){z&&z.c(),O=er()},l(tt){z&&z.l(tt),O=er()},m(tt,_){z&&z.m(tt,_),re(tt,O,_),K=!0},p(tt,[_]){tt[0]?z?(z.p(tt,_),_&1&&ge(z,1)):(z=yr(tt),z.c(),ge(z,1),z.m(O.parentNode,O)):z&&(He(),Ee(z,1,1,()=>{z=null}),Ge())},i(tt){K||(ge(z),K=!0)},o(tt){Ee(z),K=!1},d(tt){z&&z.d(tt),tt&&Rt(O)}}}function Qr(Y,O,K){let{$$slots:z={},$$scope:tt}=O;const _=Nr(z),E=Rr();let{target:s="body"}=O,{z_index:y=100}=O,{title:v=""}=O,{open:d=!1}=O,{width:g="40rem"}=O,{full:i=!1}=O,{closeOnOutsideClick:u=!0}=O,{close:h=()=>{K(0,d=!1),E("close")}}=O;const c=f=>{var m;return(m=document==null?void 0:document.querySelector(s))==null||m.appendChild(f),{destroy(){f.parentNode&&f.parentNode.removeChild(f)}}},p=()=>u&&h();return Y.$$set=f=>{"target"in f&&K(9,s=f.target),"z_index"in f&&K(1,y=f.z_index),"title"in f&&K(2,v=f.title),"open"in f&&K(0,d=f.open),"width"in f&&K(3,g=f.width),"full"in f&&K(4,i=f.full),"closeOnOutsideClick"in f&&K(5,u=f.closeOnOutsideClick),"close"in f&&K(6,h=f.close),"$$scope"in f&&K(10,tt=f.$$scope)},[d,y,v,g,i,u,h,c,_,s,tt,z,p]}class _r extends Ve{constructor(O){super(),$e(this,O,Qr,Jr,Ze,{target:9,z_index:1,title:2,open:0,width:3,full:4,closeOnOutsideClick:5,close:6})}}function tn(Y){let O;return{c(){O=pe("sign transaction")},l(K){O=me(K,"sign transaction")},m(K,z){re(K,O,z)},p:Xe,d(K){K&&Rt(O)}}}function en(Y){var tt;let O,K=((tt=Y[4])==null?void 0:tt.channelId)+"",z;return{c(){O=pe("Confirm and Init Channel with Id: "),z=pe(K)},l(_){O=me(_,"Confirm and Init Channel with Id: "),z=me(_,K)},m(_,E){re(_,O,E),re(_,z,E)},p:Xe,d(_){_&&Rt(O),_&&Rt(z)}}}function rn(Y){let O;return{c(){O=pe("Sign The Open Channel Transaction(~0.05 TON)")},l(K){O=me(K,"Sign The Open Channel Transaction(~0.05 TON)")},m(K,z){re(K,O,z)},p:Xe,d(K){K&&Rt(O)}}}function wr(Y){let O,K;return{c(){O=we("p"),K=pe(Y[1]),this.h()},l(z){O=be(z,"P",{class:!0});var tt=Ce(O);K=me(tt,Y[1]),tt.forEach(Rt),this.h()},h(){Ae(O,"class","error svelte-1mgnoe7")},m(z,tt){re(z,O,tt),oe(O,K)},p(z,tt){tt&2&&Ke(K,z[1])},d(z){z&&Rt(O)}}}function nn(Y){let O=Y[2]||Y[3]?"Loading...":"Confirm",K;return{c(){K=pe(O)},l(z){K=me(z,O)},m(z,tt){re(z,K,tt)},p(z,tt){tt&12&&O!==(O=z[2]||z[3]?"Loading...":"Confirm")&&Ke(K,O)},d(z){z&&Rt(K)}}}function sn(Y){var C,M;let O,K,z,tt,_,E=((C=Y[4])==null?void 0:C.channelId)+"",s,y,v=((M=Y[4])==null?void 0:M.action)=="createPaymentChannel"?"create channel":"confirm channel",d,g,i,u,h,c,p;function f(S,q){var G,U;return((G=S[4])==null?void 0:G.action)=="createPaymentChannel"?rn:((U=S[4])==null?void 0:U.action)=="topUpAndInitPaymentChannel"?en:tn}let w=f(Y)(Y),A=Y[1]&&wr(Y);return c=new qe({props:{wide:!0,type:"accent",$$slots:{default:[nn]},$$scope:{ctx:Y}}}),c.$on("click",Y[10]),{c(){O=we("h2"),K=pe("Sign Transaction"),z=Be(),tt=we("p"),_=pe("channelId: "),s=pe(E),y=pe(" action: "),d=pe(v),g=Be(),i=we("p"),w.c(),u=Be(),A&&A.c(),h=Be(),Ue(c.$$.fragment)},l(S){O=be(S,"H2",{});var q=Ce(O);K=me(q,"Sign Transaction"),q.forEach(Rt),z=Fe(S),tt=be(S,"P",{});var G=Ce(tt);_=me(G,"channelId: "),s=me(G,E),y=me(G," action: "),d=me(G,v),G.forEach(Rt),g=Fe(S),i=be(S,"P",{});var U=Ce(i);w.l(U),U.forEach(Rt),u=Fe(S),A&&A.l(S),h=Fe(S),Oe(c.$$.fragment,S)},m(S,q){re(S,O,q),oe(O,K),re(S,z,q),re(S,tt,q),oe(tt,_),oe(tt,s),oe(tt,y),oe(tt,d),re(S,g,q),re(S,i,q),w.m(i,null),re(S,u,q),A&&A.m(S,q),re(S,h,q),ke(c,S,q),p=!0},p(S,q){w.p(S,q),S[1]?A?A.p(S,q):(A=wr(S),A.c(),A.m(h.parentNode,h)):A&&(A.d(1),A=null);const G={};q&131084&&(G.$$scope={dirty:q,ctx:S}),c.$set(G)},i(S){p||(ge(c.$$.fragment,S),p=!0)},o(S){Ee(c.$$.fragment,S),p=!1},d(S){S&&Rt(O),S&&Rt(z),S&&Rt(tt),S&&Rt(g),S&&Rt(i),w.d(),S&&Rt(u),A&&A.d(S),S&&Rt(h),Le(c,S)}}}function on(Y){let O,K;return O=new _r({props:{open:Y[0],$$slots:{default:[sn]},$$scope:{ctx:Y}}}),{c(){Ue(O.$$.fragment)},l(z){Oe(O.$$.fragment,z)},m(z,tt){ke(O,z,tt),K=!0},p(z,[tt]){const _={};tt&1&&(_.open=z[0]),tt&131086&&(_.$$scope={dirty:tt,ctx:z}),O.$set(_)},i(z){K||(ge(O.$$.fragment,z),K=!0)},o(z){Ee(O.$$.fragment,z),K=!1},d(z){Le(O,z)}}}function an(Y,O,K){let{open:z=!1}=O,{myKeyPair:tt}=O,{providerUrl:_=""}=O,{apiKey:E=""}=O;const s=new Re(new Re.HttpProvider(_,{apiKey:E})),y=Mr(),v=Re.utils.BN,d=Re.utils.toNano,g=window.Telegram.WebApp;let i,u="";async function h(){if((tt==null?void 0:tt.publicKey)&&y.action){const A=y.hisPublicKey.slice(1,y.hisPublicKey.length-1).split(", ").map(C=>Number(C));i=new Yr(new v(y.channelId),await s.wallet.create({publicKey:y.isA=="True"?tt.publicKey:A}).getAddress(),await s.wallet.create({publicKey:y.isA=="True"?A:tt.publicKey}).getAddress(),new v(y.initialBalanceA),new v(y.initialBalanceB),y.isA=="True",tt,A,E,_)}}let c=!1;const p=async()=>{try{await h(),K(2,c=!0),await i.fromWallet.deploy().send(d("0.05"));const A=await i.fromWallet.topUp({coinsA:new v(i.initBalanceA),coinsB:new v(0)}).send(new v(i.initBalanceA).add(d("0.05"))),C=(await i.channel.getAddress()).toString(!0,!0,!0);A&&g.sendData(JSON.stringify({channelAddress:C,action:"paymentChannelCreated"}))}catch(A){K(1,u=A),console.log(A)}finally{K(2,c=!1)}};let f=!1;const m=async()=>{try{await h(),K(3,f=!0);const A=await i.fromWallet.topUp({coinsA:new v(i.initBalanceA),coinsB:new v(0)}).send(new v(i.initBalanceA).add(d("0.05"))),C=await i.fromWallet.init({balanceA:i.initBalanceA,balanceB:i.initBalanceB,seqnoA:new v(0),seqnoB:new v(0)}).send(d("0.05")),M=(await i.channel.getAddress()).toString(!0,!0,!0);C&&g.sendData(JSON.stringify({channelId:y.channelId,channelAddress:M,action:"paymentChannelInited"}))}catch(A){K(1,u=A),console.log(A)}finally{K(3,f=!1)}},w=()=>{y.action=="createPaymentChannel"?p():y.action=="topUpAndInitPaymentChannel"&&m()};return Y.$$set=A=>{"open"in A&&K(0,z=A.open),"myKeyPair"in A&&K(7,tt=A.myKeyPair),"providerUrl"in A&&K(8,_=A.providerUrl),"apiKey"in A&&K(9,E=A.apiKey)},[z,u,c,f,y,p,m,tt,_,E,w]}class hn extends Ve{constructor(O){super(),$e(this,O,an,on,Ze,{open:0,myKeyPair:7,providerUrl:8,apiKey:9})}}function un(Y){let O;return{c(){O=pe("Confirm")},l(K){O=me(K,"Confirm")},m(K,z){re(K,O,z)},d(K){K&&Rt(O)}}}function ln(Y){let O,K,z,tt,_,E,s,y,v,d,g;function i(h){Y[4](h)}let u={};return Y[2]!==void 0&&(u.value=Y[2]),tt=new cr({props:u}),nr.push(()=>ur(tt,"value",i)),tt.$on("keypress",Y[5]),s=new qe({props:{wide:!0,type:"accent",$$slots:{default:[un]},$$scope:{ctx:Y}}}),s.$on("keypress",Y[6]),s.$on("click",Y[7]),{c(){O=we("h2"),K=pe("Enter your password"),z=Be(),Ue(tt.$$.fragment),E=Be(),Ue(s.$$.fragment),y=Be(),v=we("div"),d=pe(Y[3]),this.h()},l(h){O=be(h,"H2",{});var c=Ce(O);K=me(c,"Enter your password"),c.forEach(Rt),z=Fe(h),Oe(tt.$$.fragment,h),E=Fe(h),Oe(s.$$.fragment,h),y=Fe(h),v=be(h,"DIV",{class:!0});var p=Ce(v);d=me(p,Y[3]),p.forEach(Rt),this.h()},h(){Ae(v,"class","error")},m(h,c){re(h,O,c),oe(O,K),re(h,z,c),ke(tt,h,c),re(h,E,c),ke(s,h,c),re(h,y,c),re(h,v,c),oe(v,d),g=!0},p(h,c){const p={};!_&&c&4&&(_=!0,p.value=h[2],lr(()=>_=!1)),tt.$set(p);const f={};c&256&&(f.$$scope={dirty:c,ctx:h}),s.$set(f),(!g||c&8)&&Ke(d,h[3])},i(h){g||(ge(tt.$$.fragment,h),ge(s.$$.fragment,h),g=!0)},o(h){Ee(tt.$$.fragment,h),Ee(s.$$.fragment,h),g=!1},d(h){h&&Rt(O),h&&Rt(z),Le(tt,h),h&&Rt(E),Le(s,h),h&&Rt(y),h&&Rt(v)}}}function cn(Y){let O,K;return O=new _r({props:{open:Y[1],$$slots:{default:[ln]},$$scope:{ctx:Y}}}),{c(){Ue(O.$$.fragment)},l(z){Oe(O.$$.fragment,z)},m(z,tt){ke(O,z,tt),K=!0},p(z,[tt]){const _={};tt&2&&(_.open=z[1]),tt&269&&(_.$$scope={dirty:tt,ctx:z}),O.$set(_)},i(z){K||(ge(O.$$.fragment,z),K=!0)},o(z){Ee(O.$$.fragment,z),K=!1},d(z){Le(O,z)}}}function fn(Y,O,K){let{confirmPassword:z}=O,{open:tt=!1}=O,_="",E="";function s(g){_=g,K(2,_)}const y=g=>{g.key==="Enter"&&(g.preventDefault(),z(_))},v=g=>{g.key==="Enter"&&(g.preventDefault(),z(_))},d=()=>{try{z(_),K(3,E="")}catch{K(3,E="ERROR")}};return Y.$$set=g=>{"confirmPassword"in g&&K(0,z=g.confirmPassword),"open"in g&&K(1,tt=g.open)},[z,tt,_,E,s,y,v,d]}class dn extends Ve{constructor(O){super(),$e(this,O,fn,cn,Ze,{confirmPassword:0,open:1})}}function br(Y,O,K){const z=Y.slice();return z[31]=O[K],z[33]=K,z}function pn(Y){let O,K,z,tt;const _=[vn,yn,gn],E=[];function s(y,v){return y[11]==1?0:y[11]==2?1:2}return K=s(Y),z=E[K]=_[K](Y),{c(){O=we("div"),z.c(),this.h()},l(y){O=be(y,"DIV",{class:!0});var v=Ce(O);z.l(v),v.forEach(Rt),this.h()},h(){Ae(O,"class","create-box svelte-c4knxa")},m(y,v){re(y,O,v),E[K].m(O,null),tt=!0},p(y,v){let d=K;K=s(y),K===d?E[K].p(y,v):(He(),Ee(E[d],1,1,()=>{E[d]=null}),Ge(),z=E[K],z?z.p(y,v):(z=E[K]=_[K](y),z.c()),ge(z,1),z.m(O,null))},i(y){tt||(ge(z),tt=!0)},o(y){Ee(z),tt=!1},d(y){y&&Rt(O),E[K].d()}}}function mn(Y){let O,K,z,tt,_,E,s,y,v=Y[7]&&Er(Y);return _=new qe({props:{type:"default",wide:!0,$$slots:{default:[Mn]},$$scope:{ctx:Y}}}),_.$on("click",Y[21]),s=new qe({props:{type:"default",wide:!0,$$slots:{default:[_n]},$$scope:{ctx:Y}}}),s.$on("click",Y[22]),{c(){O=we("h2"),K=pe("The Open Wallet"),z=Be(),v&&v.c(),tt=Be(),Ue(_.$$.fragment),E=Be(),Ue(s.$$.fragment)},l(d){O=be(d,"H2",{});var g=Ce(O);K=me(g,"The Open Wallet"),g.forEach(Rt),z=Fe(d),v&&v.l(d),tt=Fe(d),Oe(_.$$.fragment,d),E=Fe(d),Oe(s.$$.fragment,d)},m(d,g){re(d,O,g),oe(O,K),re(d,z,g),v&&v.m(d,g),re(d,tt,g),ke(_,d,g),re(d,E,g),ke(s,d,g),y=!0},p(d,g){d[7]?v?(v.p(d,g),g[0]&128&&ge(v,1)):(v=Er(d),v.c(),ge(v,1),v.m(tt.parentNode,tt)):v&&(He(),Ee(v,1,1,()=>{v=null}),Ge());const i={};g[1]&8&&(i.$$scope={dirty:g,ctx:d}),_.$set(i);const u={};g[1]&8&&(u.$$scope={dirty:g,ctx:d}),s.$set(u)},i(d){y||(ge(v),ge(_.$$.fragment,d),ge(s.$$.fragment,d),y=!0)},o(d){Ee(v),Ee(_.$$.fragment,d),Ee(s.$$.fragment,d),y=!1},d(d){d&&Rt(O),d&&Rt(z),v&&v.d(d),d&&Rt(tt),Le(_,d),d&&Rt(E),Le(s,d)}}}function gn(Y){let O,K,z,tt,_,E,s,y,v,d,g,i,u,h,c=Y[1],p=[];for(let w=0;w<c.length;w+=1)p[w]=Cr(br(Y,c,w));function f(w){Y[25](w)}let m={class:"create"};return Y[2]!==void 0&&(m.value=Y[2]),d=new cr({props:m}),nr.push(()=>ur(d,"value",f)),d.$on("keypress",Y[26]),u=new qe({props:{type:"accent",wide:!0,$$slots:{default:[wn]},$$scope:{ctx:Y}}}),u.$on("click",Y[14]),{c(){O=we("h2"),K=we("h2"),z=pe("Your phrase is:"),tt=Be(),_=we("div");for(let w=0;w<p.length;w+=1)p[w].c();E=Be(),s=we("h2"),y=pe("Please save phrase and setup your Pin-code and continue:"),v=Be(),Ue(d.$$.fragment),i=Be(),Ue(u.$$.fragment),this.h()},l(w){O=be(w,"H2",{});var A=Ce(O);K=be(A,"H2",{});var C=Ce(K);z=me(C,"Your phrase is:"),C.forEach(Rt),tt=Fe(A),_=be(A,"DIV",{class:!0});var M=Ce(_);for(let q=0;q<p.length;q+=1)p[q].l(M);M.forEach(Rt),A.forEach(Rt),E=Fe(w),s=be(w,"H2",{});var S=Ce(s);y=me(S,"Please save phrase and setup your Pin-code and continue:"),S.forEach(Rt),v=Fe(w),Oe(d.$$.fragment,w),i=Fe(w),Oe(u.$$.fragment,w),this.h()},h(){Ae(_,"class","phrase svelte-c4knxa")},m(w,A){re(w,O,A),oe(O,K),oe(K,z),oe(O,tt),oe(O,_);for(let C=0;C<p.length;C+=1)p[C].m(_,null);re(w,E,A),re(w,s,A),oe(s,y),re(w,v,A),ke(d,w,A),re(w,i,A),ke(u,w,A),h=!0},p(w,A){if(A[0]&2){c=w[1];let S;for(S=0;S<c.length;S+=1){const q=br(w,c,S);p[S]?p[S].p(q,A):(p[S]=Cr(q),p[S].c(),p[S].m(_,null))}for(;S<p.length;S+=1)p[S].d(1);p.length=c.length}const C={};!g&&A[0]&4&&(g=!0,C.value=w[2],lr(()=>g=!1)),d.$set(C);const M={};A[1]&8&&(M.$$scope={dirty:A,ctx:w}),u.$set(M)},i(w){h||(ge(d.$$.fragment,w),ge(u.$$.fragment,w),h=!0)},o(w){Ee(d.$$.fragment,w),Ee(u.$$.fragment,w),h=!1},d(w){w&&Rt(O),Pr(p,w),w&&Rt(E),w&&Rt(s),w&&Rt(v),Le(d,w),w&&Rt(i),Le(u,w)}}}function yn(Y){let O,K,z,tt,_,E,s,y;return s=new qe({props:{wide:!0,type:"accent",$$slots:{default:[bn]},$$scope:{ctx:Y}}}),s.$on("click",Y[24]),{c(){O=we("h2"),K=pe("To create a wallet need to generate and write down a seed phrase."),z=Be(),tt=we("p"),_=pe("Please memorize the phrase and keep it in a safe place."),E=Be(),Ue(s.$$.fragment)},l(v){O=be(v,"H2",{});var d=Ce(O);K=me(d,"To create a wallet need to generate and write down a seed phrase."),d.forEach(Rt),z=Fe(v),tt=be(v,"P",{});var g=Ce(tt);_=me(g,"Please memorize the phrase and keep it in a safe place."),g.forEach(Rt),E=Fe(v),Oe(s.$$.fragment,v)},m(v,d){re(v,O,d),oe(O,K),re(v,z,d),re(v,tt,d),oe(tt,_),re(v,E,d),ke(s,v,d),y=!0},p(v,d){const g={};d[1]&8&&(g.$$scope={dirty:d,ctx:v}),s.$set(g)},i(v){y||(ge(s.$$.fragment,v),y=!0)},o(v){Ee(s.$$.fragment,v),y=!1},d(v){v&&Rt(O),v&&Rt(z),v&&Rt(tt),v&&Rt(E),Le(s,v)}}}function vn(Y){let O,K,z,tt,_;return tt=new qe({props:{wide:!0,type:"accent",$$slots:{default:[Cn]},$$scope:{ctx:Y}}}),tt.$on("click",Y[23]),{c(){O=we("h2"),K=pe("Welcome to the open wallet"),z=Be(),Ue(tt.$$.fragment)},l(E){O=be(E,"H2",{});var s=Ce(O);K=me(s,"Welcome to the open wallet"),s.forEach(Rt),z=Fe(E),Oe(tt.$$.fragment,E)},m(E,s){re(E,O,s),oe(O,K),re(E,z,s),ke(tt,E,s),_=!0},p(E,s){const y={};s[1]&8&&(y.$$scope={dirty:s,ctx:E}),tt.$set(y)},i(E){_||(ge(tt.$$.fragment,E),_=!0)},o(E){Ee(tt.$$.fragment,E),_=!1},d(E){E&&Rt(O),E&&Rt(z),Le(tt,E)}}}function Cr(Y){let O,K=Y[33]+1+"",z,tt,_=Y[31]+"",E,s;return{c(){O=we("span"),z=pe(K),tt=pe("."),E=pe(_),s=Be(),this.h()},l(y){O=be(y,"SPAN",{class:!0});var v=Ce(O);z=me(v,K),tt=me(v,"."),E=me(v,_),s=Fe(v),v.forEach(Rt),this.h()},h(){Ae(O,"class","word svelte-c4knxa")},m(y,v){re(y,O,v),oe(O,z),oe(O,tt),oe(O,E),oe(O,s)},p(y,v){v[0]&2&&_!==(_=y[31]+"")&&Ke(E,_)},d(y){y&&Rt(O)}}}function wn(Y){let O;return{c(){O=pe("Save pincode")},l(K){O=me(K,"Save pincode")},m(K,z){re(K,O,z)},d(K){K&&Rt(O)}}}function bn(Y){let O;return{c(){O=pe("Generate phrase")},l(K){O=me(K,"Generate phrase")},m(K,z){re(K,O,z)},d(K){K&&Rt(O)}}}function Cn(Y){let O;return{c(){O=pe("Create Wallet")},l(K){O=me(K,"Create Wallet")},m(K,z){re(K,O,z)},d(K){K&&Rt(O)}}}function Er(Y){var U;let O,K,z,tt=pr(Y[7])+"",_,E,s,y,v,d,g=((U=Y[8])!=null?U:"Loading...")+"",i,u,h,c,p,f,m,w,A,C=Y[0]&&Ar(),M=Y[10]&&Br(Y);const S=[An,En],q=[];function G(H,Q){return H[10]?0:1}return c=G(Y),p=q[c]=S[c](Y),{c(){O=we("div"),K=we("p"),z=pe("wallet: "),_=pe(tt),E=Be(),s=we("i"),C&&C.c(),y=Be(),v=we("p"),d=pe("balance: "),i=pe(g),u=Be(),M&&M.c(),h=Be(),p.c(),f=er(),this.h()},l(H){O=be(H,"DIV",{class:!0});var Q=Ce(O);K=be(Q,"P",{class:!0});var et=Ce(K);z=me(et,"wallet: "),_=me(et,tt),E=Fe(et),s=be(et,"I",{class:!0}),Ce(s).forEach(Rt),C&&C.l(et),et.forEach(Rt),y=Fe(Q),v=be(Q,"P",{class:!0});var it=Ce(v);d=me(it,"balance: "),i=me(it,g),it.forEach(Rt),Q.forEach(Rt),u=Fe(H),M&&M.l(H),h=Fe(H),p.l(H),f=er(),this.h()},h(){Ae(s,"class","fa-solid fa-copy"),Ae(K,"class","info svelte-c4knxa"),Ae(v,"class","info svelte-c4knxa"),Ae(O,"class","info-box")},m(H,Q){re(H,O,Q),oe(O,K),oe(K,z),oe(K,_),oe(K,E),oe(K,s),C&&C.m(K,null),oe(O,y),oe(O,v),oe(v,d),oe(v,i),re(H,u,Q),M&&M.m(H,Q),re(H,h,Q),q[c].m(H,Q),re(H,f,Q),m=!0,w||(A=Ne(s,"click",Y[17]),w=!0)},p(H,Q){var it;(!m||Q[0]&128)&&tt!==(tt=pr(H[7])+"")&&Ke(_,tt),H[0]?C||(C=Ar(),C.c(),C.m(K,null)):C&&(C.d(1),C=null),(!m||Q[0]&256)&&g!==(g=((it=H[8])!=null?it:"Loading...")+"")&&Ke(i,g),H[10]?M?(M.p(H,Q),Q[0]&1024&&ge(M,1)):(M=Br(H),M.c(),ge(M,1),M.m(h.parentNode,h)):M&&(He(),Ee(M,1,1,()=>{M=null}),Ge());let et=c;c=G(H),c===et?q[c].p(H,Q):(He(),Ee(q[et],1,1,()=>{q[et]=null}),Ge(),p=q[c],p?p.p(H,Q):(p=q[c]=S[c](H),p.c()),ge(p,1),p.m(f.parentNode,f))},i(H){m||(ge(M),ge(p),m=!0)},o(H){Ee(M),Ee(p),m=!1},d(H){H&&Rt(O),C&&C.d(),H&&Rt(u),M&&M.d(H),H&&Rt(h),q[c].d(H),H&&Rt(f),w=!1,A()}}}function Ar(Y){let O,K;return{c(){O=we("span"),K=pe("Copied!")},l(z){O=be(z,"SPAN",{});var tt=Ce(O);K=me(tt,"Copied!"),tt.forEach(Rt)},m(z,tt){re(z,O,tt),oe(O,K)},d(z){z&&Rt(O)}}}function Br(Y){let O,K,z,tt,_,E;function s(v){Y[18](v)}let y={class:"input"};return Y[2]!==void 0&&(y.value=Y[2]),tt=new cr({props:y}),nr.push(()=>ur(tt,"value",s)),{c(){O=we("h2"),K=pe("Change Pin-Code"),z=Be(),Ue(tt.$$.fragment)},l(v){O=be(v,"H2",{});var d=Ce(O);K=me(d,"Change Pin-Code"),d.forEach(Rt),z=Fe(v),Oe(tt.$$.fragment,v)},m(v,d){re(v,O,d),oe(O,K),re(v,z,d),ke(tt,v,d),E=!0},p(v,d){const g={};!_&&d[0]&4&&(_=!0,g.value=v[2],lr(()=>_=!1)),tt.$set(g)},i(v){E||(ge(tt.$$.fragment,v),E=!0)},o(v){Ee(tt.$$.fragment,v),E=!1},d(v){v&&Rt(O),v&&Rt(z),Le(tt,v)}}}function En(Y){let O,K;return O=new qe({props:{wide:!0,type:"accent",$$slots:{default:[Bn]},$$scope:{ctx:Y}}}),O.$on("click",Y[20]),{c(){Ue(O.$$.fragment)},l(z){Oe(O.$$.fragment,z)},m(z,tt){ke(O,z,tt),K=!0},p(z,tt){const _={};tt[1]&8&&(_.$$scope={dirty:tt,ctx:z}),O.$set(_)},i(z){K||(ge(O.$$.fragment,z),K=!0)},o(z){Ee(O.$$.fragment,z),K=!1},d(z){Le(O,z)}}}function An(Y){let O,K;return O=new qe({props:{wide:!0,type:"accent",$$slots:{default:[Fn]},$$scope:{ctx:Y}}}),O.$on("click",Y[19]),{c(){Ue(O.$$.fragment)},l(z){Oe(O.$$.fragment,z)},m(z,tt){ke(O,z,tt),K=!0},p(z,tt){const _={};tt[1]&8&&(_.$$scope={dirty:tt,ctx:z}),O.$set(_)},i(z){K||(ge(O.$$.fragment,z),K=!0)},o(z){Ee(O.$$.fragment,z),K=!1},d(z){Le(O,z)}}}function Bn(Y){let O;return{c(){O=pe("Change Pin-Code")},l(K){O=me(K,"Change Pin-Code")},m(K,z){re(K,O,z)},d(K){K&&Rt(O)}}}function Fn(Y){let O;return{c(){O=pe("Confirm Pin-Code")},l(K){O=me(K,"Confirm Pin-Code")},m(K,z){re(K,O,z)},d(K){K&&Rt(O)}}}function Mn(Y){let O;return{c(){O=pe("Close")},l(K){O=me(K,"Close")},m(K,z){re(K,O,z)},d(K){K&&Rt(O)}}}function _n(Y){let O;return{c(){O=pe("Disconnect and Forget Wallet")},l(K){O=me(K,"Disconnect and Forget Wallet")},m(K,z){re(K,O,z)},d(K){K&&Rt(O)}}}function Dn(Y){let O,K,z,tt,_,E,s,y,v,d,g;const i=[mn,pn],u=[];function h(c,p){return c[9]=="LOGIN"?0:1}return _=h(Y),E=u[_]=i[_](Y),y=new hn({props:{apiKey:Sr,providerUrl:Dr,myKeyPair:Y[6],open:Y[4]}}),d=new dn({props:{confirmPassword:Y[15],open:Y[3]}}),{c(){O=we("main"),K=we("div"),z=pe(Y[5]),tt=Be(),E.c(),s=Be(),Ue(y.$$.fragment),v=Be(),Ue(d.$$.fragment),this.h()},l(c){O=be(c,"MAIN",{class:!0});var p=Ce(O);K=be(p,"DIV",{class:!0});var f=Ce(K);z=me(f,Y[5]),f.forEach(Rt),tt=Fe(p),E.l(p),s=Fe(p),Oe(y.$$.fragment,p),v=Fe(p),Oe(d.$$.fragment,p),p.forEach(Rt),this.h()},h(){Ae(K,"class","error svelte-c4knxa"),Ae(O,"class","svelte-c4knxa")},m(c,p){re(c,O,p),oe(O,K),oe(K,z),oe(O,tt),u[_].m(O,null),oe(O,s),ke(y,O,null),oe(O,v),ke(d,O,null),g=!0},p(c,p){(!g||p[0]&32)&&Ke(z,c[5]);let f=_;_=h(c),_===f?u[_].p(c,p):(He(),Ee(u[f],1,1,()=>{u[f]=null}),Ge(),E=u[_],E?E.p(c,p):(E=u[_]=i[_](c),E.c()),ge(E,1),E.m(O,s));const m={};p[0]&64&&(m.myKeyPair=c[6]),p[0]&16&&(m.open=c[4]),y.$set(m);const w={};p[0]&8&&(w.open=c[3]),d.$set(w)},i(c){g||(ge(E),ge(y.$$.fragment,c),ge(d.$$.fragment,c),g=!0)},o(c){Ee(E),Ee(y.$$.fragment,c),Ee(d.$$.fragment,c),g=!1},d(c){c&&Rt(O),u[_].d(),Le(y),Le(d)}}}const Dr="https://toncenter.com/api/v2/jsonRPC",Sr="6494499baadce5c74d337dfa79efd3b525e3d94c012aa3f88a3f1a1c6eb4aa7c";function Sn(Y,O,K){let{name:z}=O,tt=[],_="",E=!1,s=!1,y="",v,d,g,i="WELCOME",u=!1,h=!1,c=1;const p=window.TonWeb.mnemonic,f=new Re(new Re.HttpProvider(Dr,{apiKey:Sr})),m=window.Telegram.WebApp,w=Re.utils.nacl,A=async()=>{const e=await Ye.wordsToPrivateKey(tt);K(6,v=w.sign.keyPair.fromSeed(Re.utils.base64ToBytes(e))),K(7,d=(await f.wallet.create({publicKey:v.publicKey}).getAddress()).toString(!0,!0,!0));const t=await f.provider.getWalletInfo(d);K(8,g=Re.utils.fromNano(await Ye.getBalance(t)))},C=async()=>{K(1,tt=await p.generateMnemonic()),await A()},M=async()=>{await Ye.saveWords(tt,_),K(2,_=""),K(9,i="LOGIN"),m.sendData(JSON.stringify({wallet:d,publicKey:v.publicKey,walletBalance:g,action:"walletCreated"}))},S=async e=>{try{K(1,tt=await Ye.loadWords(e)),await A(),K(3,E=!1);const t=Mr();(t.action=="createPaymentChannel"||t.action=="topUpAndInitPaymentChannel")&&K(4,s=!0),K(5,y="")}catch{K(5,y="ERROR")}};Lr(async()=>{await rr.getItem("words")&&(K(3,E=!0),K(9,i="LOGIN"))});const q=()=>{Wr(d),K(0,u=!0)};function G(e){_=e,K(2,_)}const U=async()=>{await Ye.saveWords(tt,_),K(2,_=""),K(10,h=!1)},H=()=>{K(10,h=!0)},Q=async()=>{await m.sendData(JSON.stringify({wallet:d,publicKey:v==null?void 0:v.publicKey,walletBalance:g,action:"walletUpdated"})),K(9,i="WELCOME"),K(11,c=1)},et=async()=>{await m.sendData(JSON.stringify({wallet:d,publicKey:v==null?void 0:v.publicKey,walletBalance:g,action:"walletDeleted"})),rr.clear(),K(9,i="WELCOME"),K(11,c=1)},it=()=>{K(11,c++,c)},n=async()=>{await C(),K(11,c++,c)};function l(e){_=e,K(2,_)}const r=e=>{e.key==="Enter"&&(e.preventDefault(),M())};return Y.$$set=e=>{"name"in e&&K(16,z=e.name)},Y.$$.update=()=>{Y.$$.dirty[0]&1&&u&&setTimeout(()=>{K(0,u=!1)},2e3)},[u,tt,_,E,s,y,v,d,g,i,h,c,m,C,M,S,z,q,G,U,H,Q,et,it,n,l,r]}class Tn extends Ve{constructor(O){super(),$e(this,O,Sn,Dn,Ze,{name:16},null,[-1,-1])}}export{Tn as default};
